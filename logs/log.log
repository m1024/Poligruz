2018-09-11T20:42:13.672Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-11T20:42:13.676Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-11T20:42:13.676Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-11T20:42:13.676Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-11T20:42:34.804Z [ERROR] db: Qery error: { Error: connect ETIMEDOUT 10.11.2.231:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)
  errno: 'ETIMEDOUT',
  code: 'ETIMEDOUT',
  syscall: 'connect',
  address: '10.11.2.231',
  port: 5432 }
2018-09-16T20:52:33.805Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T20:52:33.811Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T20:52:33.813Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T20:52:33.813Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T20:52:54.977Z [ERROR] db: Qery error: { Error: connect ETIMEDOUT 10.11.2.231:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)
  errno: 'ETIMEDOUT',
  code: 'ETIMEDOUT',
  syscall: 'connect',
  address: '10.11.2.231',
  port: 5432 }
2018-09-16T20:57:10.154Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T20:57:10.160Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T20:57:10.161Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T20:57:10.162Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T20:57:31.302Z [ERROR] db: Qery error: { Error: connect ETIMEDOUT 10.11.2.231:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1191:14)
  errno: 'ETIMEDOUT',
  code: 'ETIMEDOUT',
  syscall: 'connect',
  address: '10.11.2.231',
  port: 5432 }
2018-09-16T20:59:22.343Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T20:59:22.349Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T20:59:22.349Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T20:59:22.350Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T20:59:22.520Z [ERROR] db: Qery error: { error: ������������ "admin " �� ������ �������� ����������� (�� ������)
    at Connection.parseE (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:119:22)
    at emitOne (events.js:116:13)
    at Socket.emit (events.js:211:7)
    at addChunk (_stream_readable.js:263:12)
    at readableAddChunk (_stream_readable.js:250:11)
    at Socket.Readable.push (_stream_readable.js:208:10)
    at TCP.onread (net.js:601:20)
  name: 'error',
  length: 118,
  severity: '�����',
  code: '28P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'auth.c',
  line: '328',
  routine: 'auth_failed' }
2018-09-16T20:59:40.870Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T20:59:40.874Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T20:59:40.875Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T20:59:40.875Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T20:59:41.117Z [ERROR] db: Qery error: { error: ������������ "admin " �� ������ �������� ����������� (�� ������)
    at Connection.parseE (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (C:\Users\glmak\Downloads\Telegram Desktop\Poligruz 1.0.3\node_modules\pg\lib\connection.js:119:22)
    at emitOne (events.js:116:13)
    at Socket.emit (events.js:211:7)
    at addChunk (_stream_readable.js:263:12)
    at readableAddChunk (_stream_readable.js:250:11)
    at Socket.Readable.push (_stream_readable.js:208:10)
    at TCP.onread (net.js:601:20)
  name: 'error',
  length: 118,
  severity: '�����',
  code: '28P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'auth.c',
  line: '328',
  routine: 'auth_failed' }
2018-09-16T21:03:09.148Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T21:03:09.152Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T21:03:09.152Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T21:03:09.152Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T21:03:09.258Z [ERROR] db: Qery error: { Error: getaddrinfo ENOTFOUND localhost:5432 localhost:5432:5432
    at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:67:26)
  errno: 'ENOTFOUND',
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'localhost:5432',
  host: 'localhost:5432',
  port: 5432 }
2018-09-16T21:03:32.184Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-09-16T21:03:32.188Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-09-16T21:03:32.188Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-09-16T21:03:32.189Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-09-16T21:03:32.381Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-09-16T21:04:02.635Z [DEBUG] io: Client connected:  NKBiTB7D9MGy11MHAAAA
2018-09-16T21:04:11.158Z [DEBUG] commands: Command: logon. From: NKBiTB7D9MGy11MHAAAA
2018-09-16T21:04:11.159Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-09-16T21:04:11.206Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-09-16T21:04:11.208Z [DEBUG] commands: Logon granted for: admin. From: NKBiTB7D9MGy11MHAAAA
2018-09-16T21:04:11.209Z [DEBUG] users: Add user: admin, SessionID: 8rtIaz19ulZDZQ_5NegaYamgB5xPl-W7
2018-09-16T21:04:11.210Z [INFO]  users: User admin was added
2018-09-16T21:04:11.210Z [DEBUG] messages: Send command: logon. To: NKBiTB7D9MGy11MHAAAA
2018-09-16T21:04:11.224Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:11.229Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-09-16T21:04:11.232Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-09-16T21:04:11.235Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:11.621Z [DEBUG] io: Client connected:  taeA0sAnxoTZZPehAAAB
2018-09-16T21:04:17.935Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:17.938Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-09-16T21:04:17.939Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-09-16T21:04:17.941Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:18.422Z [DEBUG] io: Client connected:  aKWYEQbs-uBMFoJdAAAC
2018-09-16T21:04:19.837Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:19.839Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-09-16T21:04:19.840Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-09-16T21:04:19.842Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:19.868Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:19.873Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-09-16T21:04:19.874Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-09-16T21:04:19.877Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:20.266Z [DEBUG] io: Client connected:  TKFhjJ0IHu-C-AhhAAAD
2018-09-16T21:04:21.821Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:21.824Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-09-16T21:04:21.825Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-09-16T21:04:21.827Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:21.847Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:21.850Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-09-16T21:04:21.851Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-09-16T21:04:21.855Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:22.285Z [DEBUG] io: Client connected:  wYpPpI2tj5D9Lt3LAAAE
2018-09-16T21:04:23.135Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:23.137Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-09-16T21:04:23.138Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-09-16T21:04:23.140Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:23.164Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:23.166Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-09-16T21:04:23.167Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-09-16T21:04:23.169Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:23.606Z [DEBUG] io: Client connected:  DhADo08gR__dnFDeAAAF
2018-09-16T21:04:23.799Z [DEBUG] commands: Command: getTickets. From: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:23.800Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-09-16T21:04:23.805Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-09-16T21:04:23.805Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:23.808Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-09-16T21:04:23.818Z [DEBUG] messages: Send data: getTickets. To: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:23.867Z [DEBUG] commands: Command: getLoadTypes. From: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:23.867Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-09-16T21:04:23.870Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-09-16T21:04:23.870Z [DEBUG] messages: Send data: getLoadTypes. To: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:24.174Z [DEBUG] commands: Command: getOrganizations. From: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:24.175Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-09-16T21:04:24.177Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-09-16T21:04:24.178Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-09-16T21:04:24.179Z [DEBUG] messages: Send data: getOrganizations. To: DhADo08gR__dnFDeAAAF
2018-09-16T21:04:24.562Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:24.565Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-09-16T21:04:24.566Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-09-16T21:04:24.568Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:24.945Z [DEBUG] io: Client connected:  8BhQR0UcJPqqjBSAAAAG
2018-09-16T21:04:25.137Z [DEBUG] commands: Command: getAchiveTickets. From: 8BhQR0UcJPqqjBSAAAAG
2018-09-16T21:04:25.137Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-09-16T21:04:25.140Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-09-16T21:04:25.141Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:25.143Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-09-16T21:04:25.150Z [DEBUG] messages: Send data: getAchiveTickets. To: 8BhQR0UcJPqqjBSAAAAG
2018-09-16T21:04:25.177Z [DEBUG] commands: Command: getLoadTypes. From: 8BhQR0UcJPqqjBSAAAAG
2018-09-16T21:04:25.177Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-09-16T21:04:25.183Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-09-16T21:04:25.184Z [DEBUG] messages: Send data: getLoadTypes. To: 8BhQR0UcJPqqjBSAAAAG
2018-09-16T21:04:25.744Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:25.746Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/templates';
2018-09-16T21:04:25.749Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/templates' AND users.user_id=1;
2018-09-16T21:04:25.751Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:26.154Z [DEBUG] io: Client connected:  yJ1njYDs3MxAiTZdAAAH
2018-09-16T21:04:27.532Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:27.534Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-09-16T21:04:27.535Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-09-16T21:04:27.540Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:27.561Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:27.565Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-09-16T21:04:27.566Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-09-16T21:04:27.567Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:28.108Z [DEBUG] io: Client connected:  o6qFasTb2X_XnLq3AAAI
2018-09-16T21:04:28.447Z [DEBUG] commands: Command: getPersons. From: o6qFasTb2X_XnLq3AAAI
2018-09-16T21:04:28.447Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-09-16T21:04:28.450Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-09-16T21:04:28.451Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-09-16T21:04:28.452Z [DEBUG] messages: Send data: getPersons. To: o6qFasTb2X_XnLq3AAAI
2018-09-16T21:04:32.295Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:32.299Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-09-16T21:04:32.300Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-09-16T21:04:32.302Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:32.324Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:32.326Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-09-16T21:04:32.328Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-09-16T21:04:32.331Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:32.761Z [DEBUG] io: Client connected:  t--q2qCwyHFQm-64AAAJ
2018-09-16T21:04:45.103Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:45.151Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-09-16T21:04:45.152Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-09-16T21:04:45.153Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:45.578Z [DEBUG] io: Client connected:  CdYflX2LbRYOL7_OAAAK
2018-09-16T21:04:45.665Z [DEBUG] commands: Command: getUsersGroups. From: CdYflX2LbRYOL7_OAAAK
2018-09-16T21:04:45.666Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-09-16T21:04:45.670Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-09-16T21:04:45.671Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-09-16T21:04:45.672Z [DEBUG] messages: Send data: getUsersGroups. To: CdYflX2LbRYOL7_OAAAK
2018-09-16T21:04:45.845Z [DEBUG] commands: Command: getPermissionsTree. From: CdYflX2LbRYOL7_OAAAK
2018-09-16T21:04:45.845Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-09-16T21:04:45.848Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-09-16T21:04:45.848Z [DEBUG] messages: Send data: getPermissionsTree. To: CdYflX2LbRYOL7_OAAAK
2018-09-16T21:04:47.798Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:04:47.800Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-09-16T21:04:47.801Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-09-16T21:04:47.803Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:04:48.126Z [DEBUG] io: Client connected:  6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.227Z [DEBUG] commands: Command: getUsersGroups. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.227Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-09-16T21:04:48.231Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-09-16T21:04:48.232Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-09-16T21:04:48.233Z [DEBUG] messages: Send data: getUsersGroups. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.404Z [DEBUG] commands: Command: getPermissionsTree. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.404Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-09-16T21:04:48.404Z [DEBUG] commands: Command: getUsersGroup. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.404Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroup'                 AND users.login = 'admin';
2018-09-16T21:04:48.404Z [DEBUG] commands: Command: getUsersGroup. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.404Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroup'                 AND users.login = 'admin';
2018-09-16T21:04:48.407Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-09-16T21:04:48.407Z [DEBUG] messages: Send data: getPermissionsTree. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.490Z [DEBUG] commands: Granted command  getUsersGroup  for user admin
2018-09-16T21:04:48.490Z [DEBUG] db: DB query: SELECT * FROM groups WHERE group_id = 1;
2018-09-16T21:04:48.491Z [DEBUG] messages: Send data: getUsersGroup. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.503Z [DEBUG] commands: Granted command  getUsersGroup  for user admin
2018-09-16T21:04:48.504Z [DEBUG] db: DB query: SELECT * FROM groups WHERE group_id = 1;
2018-09-16T21:04:48.504Z [DEBUG] messages: Send data: getUsersGroup. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.693Z [DEBUG] commands: Command: getGroupUsers. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.693Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getGroupUsers'                 AND users.login = 'admin';
2018-09-16T21:04:48.694Z [DEBUG] commands: Command: getUsersGroupPermissions. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.694Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroupPermissions'                 AND users.login = 'admin';
2018-09-16T21:04:48.697Z [DEBUG] commands: Command: getGroupUsers. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.697Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getGroupUsers'                 AND users.login = 'admin';
2018-09-16T21:04:48.698Z [DEBUG] commands: Granted command  getGroupUsers  for user admin
2018-09-16T21:04:48.698Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM groups            INNER JOIN users_groups ON groups.group_id = users_groups.group_id            INNER JOIN users ON users_groups.user_id = users.user_id            INNER JOIN persons ON users.person_id = persons.person_id        WHERE            groups.group_id = 1;
2018-09-16T21:04:48.699Z [DEBUG] commands: Granted command  getUsersGroupPermissions  for user admin
2018-09-16T21:04:48.699Z [DEBUG] db: DB query: SELECT * FROM permissions            INNER JOIN groups_permissions g ON permissions.permission_id = g.permission_id        WHERE g.group_id = 1;
2018-09-16T21:04:48.700Z [DEBUG] commands: Granted command  getGroupUsers  for user admin
2018-09-16T21:04:48.700Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM groups            INNER JOIN users_groups ON groups.group_id = users_groups.group_id            INNER JOIN users ON users_groups.user_id = users.user_id            INNER JOIN persons ON users.person_id = persons.person_id        WHERE            groups.group_id = 1;
2018-09-16T21:04:48.701Z [DEBUG] messages: Send data: getUsersGroupPermissions. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.704Z [DEBUG] messages: Send data: getGroupUsers. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.705Z [DEBUG] messages: Send data: getGroupUsers. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.706Z [DEBUG] commands: Command: getUsersGroupPermissions. From: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:04:48.706Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroupPermissions'                 AND users.login = 'admin';
2018-09-16T21:04:48.708Z [DEBUG] commands: Granted command  getUsersGroupPermissions  for user admin
2018-09-16T21:04:48.708Z [DEBUG] db: DB query: SELECT * FROM permissions            INNER JOIN groups_permissions g ON permissions.permission_id = g.permission_id        WHERE g.group_id = 1;
2018-09-16T21:04:48.709Z [DEBUG] messages: Send data: getUsersGroupPermissions. To: 6_MejWQG4GHES6-4AAAL
2018-09-16T21:05:08.703Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:08.749Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-09-16T21:05:08.750Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-09-16T21:05:08.751Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:08.801Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:08.802Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-09-16T21:05:08.803Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-09-16T21:05:08.804Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:09.283Z [DEBUG] io: Client connected:  m3XPoxLZXP8kEdIZAAAM
2018-09-16T21:05:11.010Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:11.012Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-09-16T21:05:11.014Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-09-16T21:05:11.015Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:11.036Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:11.040Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-09-16T21:05:11.040Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-09-16T21:05:11.042Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:11.382Z [DEBUG] io: Client connected:  EdMlk_WobJ5kjoh6AAAN
2018-09-16T21:05:11.551Z [DEBUG] commands: Command: getPersons. From: EdMlk_WobJ5kjoh6AAAN
2018-09-16T21:05:11.551Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-09-16T21:05:11.556Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-09-16T21:05:11.556Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-09-16T21:05:11.559Z [DEBUG] messages: Send data: getPersons. To: EdMlk_WobJ5kjoh6AAAN
2018-09-16T21:05:12.541Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:12.543Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-09-16T21:05:12.544Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-09-16T21:05:12.546Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:12.567Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:12.569Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-09-16T21:05:12.570Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-09-16T21:05:12.572Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:12.872Z [DEBUG] io: Client connected:  f6Lh4I04kvUdV3kkAAAO
2018-09-16T21:05:13.627Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:13.629Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-09-16T21:05:13.630Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-09-16T21:05:13.632Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:13.997Z [DEBUG] io: Client connected:  VOpoR1xQYx9b4_reAAAP
2018-09-16T21:05:15.579Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:15.581Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-09-16T21:05:15.582Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-09-16T21:05:15.584Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:15.887Z [DEBUG] io: Client connected:  QPX20ZSG5i-kYP9KAAAQ
2018-09-16T21:05:21.394Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:21.397Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-09-16T21:05:21.397Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-09-16T21:05:21.399Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:21.421Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:21.423Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-09-16T21:05:21.424Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-09-16T21:05:21.426Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:21.783Z [DEBUG] io: Client connected:  1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:21.972Z [DEBUG] commands: Command: getTickets. From: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:21.974Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-09-16T21:05:21.977Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-09-16T21:05:21.977Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:21.979Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-09-16T21:05:21.992Z [DEBUG] messages: Send data: getTickets. To: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:22.026Z [DEBUG] commands: Command: getLoadTypes. From: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:22.026Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-09-16T21:05:22.029Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-09-16T21:05:22.029Z [DEBUG] messages: Send data: getLoadTypes. To: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:22.167Z [DEBUG] commands: Command: getOrganizations. From: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:22.167Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-09-16T21:05:22.172Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-09-16T21:05:22.172Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-09-16T21:05:22.173Z [DEBUG] messages: Send data: getOrganizations. To: 1DOsS8lTZo_pAEIkAAAR
2018-09-16T21:05:22.640Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:22.643Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-09-16T21:05:22.644Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-09-16T21:05:22.646Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:22.666Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:05:22.669Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-09-16T21:05:22.669Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-09-16T21:05:22.672Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:05:22.994Z [DEBUG] io: Client connected:  5LfkDwZa_7sbuBy4AAAS
2018-09-16T21:58:38.363Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:58:38.440Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/chats';
2018-09-16T21:58:38.443Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/chats' AND users.user_id=1;
2018-09-16T21:58:38.445Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:58:39.019Z [DEBUG] io: Client connected:  Ad-nkhBd4fbp_RWMAAAT
2018-09-16T21:58:40.247Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:58:40.251Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/contacts';
2018-09-16T21:58:40.252Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/contacts' AND users.user_id=1;
2018-09-16T21:58:40.254Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:58:40.675Z [DEBUG] io: Client connected:  r2ySR7nBa7rnWueXAAAU
2018-09-16T21:58:41.444Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-09-16T21:58:41.447Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-09-16T21:58:41.448Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-09-16T21:58:41.450Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-09-16T21:58:41.785Z [DEBUG] io: Client connected:  Sv6djma8jedymP-lAAAV
2018-09-17T17:18:34.851Z [DEBUG] io: Client connected:  WrB3nsM70eFMwocdAAAW
2018-09-18T17:49:21.424Z [DEBUG] io: Client connected:  6EkKbWBnC7bfd-kdAAAX
2018-10-08T15:26:22.576Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-08T15:26:22.582Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-08T15:26:22.583Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-08T15:26:22.583Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-08T15:26:23.092Z [ERROR] db: Qery error: { error: role "admin" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 97,
  severity: 'FATAL',
  code: '28000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'miscinit.c',
  line: '504',
  routine: 'InitializeSessionUserId' }
2018-10-08T15:27:31.946Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-08T15:27:31.951Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-08T15:27:31.952Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-08T15:27:31.952Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-08T15:27:32.061Z [ERROR] db: Qery error: { error: role "admin" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 97,
  severity: 'FATAL',
  code: '28000',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'miscinit.c',
  line: '504',
  routine: 'InitializeSessionUserId' }
2018-10-08T15:29:09.021Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-08T15:29:09.025Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-08T15:29:09.026Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-08T15:29:09.026Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-08T15:29:09.524Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-08T15:29:18.977Z [DEBUG] io: Client connected:  y71-9KtCrEUeoesMAAAA
2018-10-08T15:29:24.941Z [DEBUG] commands: Command: logon. From: y71-9KtCrEUeoesMAAAA
2018-10-08T15:29:24.941Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-08T15:29:24.974Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-08T15:29:24.986Z [DEBUG] commands: Logon granted for: admin. From: y71-9KtCrEUeoesMAAAA
2018-10-08T15:29:24.987Z [DEBUG] users: Add user: admin, SessionID: AFeYkdWuAlJlHV0qhWmMsKdctqNBwTjH
2018-10-08T15:29:24.987Z [INFO]  users: User admin was added
2018-10-08T15:29:24.988Z [DEBUG] messages: Send command: logon. To: y71-9KtCrEUeoesMAAAA
2018-10-08T15:29:24.998Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:29:25.017Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-08T15:29:25.017Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-08T15:29:25.018Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:29:25.137Z [DEBUG] io: Client connected:  EJA1phhUPvcRVYg4AAAB
2018-10-08T15:29:34.105Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:29:34.106Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-08T15:29:34.107Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-08T15:29:34.108Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:29:34.115Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:29:34.116Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-08T15:29:34.117Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-08T15:29:34.117Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:29:34.222Z [DEBUG] io: Client connected:  7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.292Z [DEBUG] commands: Command: getTickets. From: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.292Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-08T15:29:34.312Z [DEBUG] commands: Command: getLoadTypes. From: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.312Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-08T15:29:34.340Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-08T15:29:34.341Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:29:34.342Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-08T15:29:34.351Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-08T15:29:34.351Z [DEBUG] messages: Send data: getLoadTypes. To: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.394Z [DEBUG] messages: Send data: getTickets. To: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.399Z [DEBUG] commands: Command: getOrganizations. From: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:29:34.399Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-08T15:29:34.400Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-08T15:29:34.400Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-08T15:29:34.401Z [DEBUG] messages: Send data: getOrganizations. To: 7fxZvSBPBdwpAgeNAAAC
2018-10-08T15:36:07.343Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-08T15:36:07.347Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-08T15:36:07.348Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-08T15:36:07.348Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-08T15:36:07.472Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-08T15:39:08.306Z [DEBUG] io: Client connected:  wLta1GdbFE-Y0GNDAAAA
2018-10-08T15:39:15.910Z [DEBUG] commands: Command: logon. From: wLta1GdbFE-Y0GNDAAAA
2018-10-08T15:39:15.910Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-08T15:39:15.930Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-08T15:39:15.931Z [DEBUG] commands: Logon granted for: admin. From: wLta1GdbFE-Y0GNDAAAA
2018-10-08T15:39:15.932Z [DEBUG] users: Add user: admin, SessionID: AFeYkdWuAlJlHV0qhWmMsKdctqNBwTjH
2018-10-08T15:39:15.932Z [INFO]  users: User admin was added
2018-10-08T15:39:15.932Z [DEBUG] messages: Send command: logon. To: wLta1GdbFE-Y0GNDAAAA
2018-10-08T15:39:15.940Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:39:15.943Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-08T15:39:15.944Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-08T15:39:15.945Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:39:16.057Z [DEBUG] io: Client connected:  m9ZSOHe9047LWMscAAAB
2018-10-08T15:39:25.299Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:39:25.301Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-08T15:39:25.302Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-08T15:39:25.303Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:39:25.310Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:39:25.311Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-08T15:39:25.311Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-08T15:39:25.312Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:39:25.424Z [DEBUG] io: Client connected:  yIrsopNSScns0fEYAAAC
2018-10-08T15:39:25.497Z [DEBUG] commands: Command: getPersons. From: yIrsopNSScns0fEYAAAC
2018-10-08T15:39:25.497Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-08T15:39:25.500Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-08T15:39:25.500Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-08T15:39:25.501Z [DEBUG] messages: Send data: getPersons. To: yIrsopNSScns0fEYAAAC
2018-10-08T15:39:27.843Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T15:39:27.844Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-08T15:39:27.844Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-08T15:39:27.845Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T15:39:27.954Z [DEBUG] io: Client connected:  RKvWqxkBncr8KJBzAAAD
2018-10-08T15:39:34.364Z [DEBUG] commands: Command: getReport_dayReport. From: RKvWqxkBncr8KJBzAAAD
2018-10-08T15:39:34.364Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-08T15:39:34.365Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-08T15:39:34.369Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-09 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-08T15:39:34.387Z [DEBUG] messages: Send data: getReport_dayReport. To: RKvWqxkBncr8KJBzAAAD
2018-10-08T16:00:50.864Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T16:00:50.887Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-08T16:00:50.888Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-08T16:00:50.889Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T16:00:50.916Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T16:00:50.917Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-08T16:00:50.918Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-08T16:00:50.918Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T16:00:51.061Z [DEBUG] io: Client connected:  rvsqO5tKnexZLpiGAAAE
2018-10-08T16:00:52.921Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-08T16:00:52.922Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-08T16:00:52.923Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-08T16:00:52.924Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-08T16:00:53.023Z [DEBUG] io: Client connected:  29G-0jupkTaOz7QuAAAF
2018-10-08T16:04:01.896Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-08T16:04:01.901Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-08T16:04:01.901Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-08T16:04:01.902Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-08T16:04:02.030Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-08T16:04:02.060Z [DEBUG] io: Client connected:  pDx4HIR1KspitwIdAAAA
2018-10-08T16:04:02.061Z [DEBUG] messages: Send command: logout. To: pDx4HIR1KspitwIdAAAA
2018-10-08T16:04:02.237Z [DEBUG] io: Client connected:  y_YpV5iH0RnTmOnrAAAB
2018-10-12T15:41:45.670Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-12T15:41:45.690Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-12T15:41:45.691Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-12T15:41:45.691Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-12T15:41:52.015Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-12T15:41:56.997Z [DEBUG] io: Client connected:  kWyYuIYA2-UaIv2qAAAA
2018-10-12T15:42:11.803Z [DEBUG] commands: Command: logon. From: kWyYuIYA2-UaIv2qAAAA
2018-10-12T15:42:11.803Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-12T15:42:11.837Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-12T15:42:11.850Z [DEBUG] commands: Logon granted for: admin. From: kWyYuIYA2-UaIv2qAAAA
2018-10-12T15:42:11.851Z [DEBUG] users: Add user: admin, SessionID: E75hDBFqpQ2HtqDmu28HpH6Fu2ZnMFn-
2018-10-12T15:42:11.870Z [INFO]  users: User admin was added
2018-10-12T15:42:11.871Z [DEBUG] messages: Send command: logon. To: kWyYuIYA2-UaIv2qAAAA
2018-10-12T15:42:11.900Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:42:11.943Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-12T15:42:11.945Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-12T15:42:11.947Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:42:12.168Z [DEBUG] io: Client connected:  XolzxOBYk6-5wW3wAAAB
2018-10-12T15:42:14.129Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:42:14.131Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:42:14.131Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:42:14.132Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:42:14.330Z [DEBUG] io: Client connected:  Wt7HRDijQN6WMLCeAAAC
2018-10-12T15:43:07.838Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:43:07.858Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:43:07.859Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:43:07.860Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:43:08.005Z [DEBUG] io: Client connected:  tA3h0qExGiBbap6yAAAD
2018-10-12T15:43:10.329Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:43:10.333Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:43:10.334Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:43:10.335Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:43:10.456Z [DEBUG] io: Client connected:  ti3ArXvvDKYXt2z-AAAE
2018-10-12T15:46:12.979Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:46:13.004Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:46:13.006Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:46:13.007Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:46:13.177Z [DEBUG] io: Client connected:  pgQdwpK4GHvWrYQcAAAF
2018-10-12T15:46:49.161Z [DEBUG] commands: Command: getReport_dayReport. From: pgQdwpK4GHvWrYQcAAAF
2018-10-12T15:46:49.161Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:46:49.270Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:46:49.273Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-10 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:46:49.348Z [DEBUG] messages: Send data: getReport_dayReport. To: pgQdwpK4GHvWrYQcAAAF
2018-10-12T15:47:33.314Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:47:33.336Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:47:33.337Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:47:33.341Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:47:33.509Z [DEBUG] io: Client connected:  EIiFmgshVypG0t0PAAAG
2018-10-12T15:48:04.940Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:48:04.963Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:48:04.964Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:48:04.965Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:48:05.098Z [DEBUG] io: Client connected:  toHxTpXo0rapq02BAAAH
2018-10-12T15:48:54.604Z [DEBUG] commands: Command: getReport_dayReport. From: toHxTpXo0rapq02BAAAH
2018-10-12T15:48:54.604Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:48:54.628Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:48:54.628Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:48:54.630Z [DEBUG] messages: Send data: getReport_dayReport. To: toHxTpXo0rapq02BAAAH
2018-10-12T15:55:59.340Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:55:59.371Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:55:59.372Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:55:59.373Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:55:59.513Z [DEBUG] io: Client connected:  Qto6vx8ngv2e9-CyAAAI
2018-10-12T15:56:20.100Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:56:20.122Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:56:20.123Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:56:20.124Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:56:20.257Z [DEBUG] io: Client connected:  uyvnHX2Cl0nnlVR2AAAJ
2018-10-12T15:57:28.527Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:57:28.554Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:57:28.555Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:57:28.556Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:57:28.719Z [DEBUG] io: Client connected:  6k630wVnbdO7Kl3GAAAK
2018-10-12T15:57:54.806Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T15:57:54.843Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T15:57:54.844Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T15:57:54.845Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T15:57:55.008Z [DEBUG] io: Client connected:  3diBSfwHiwIaMYEXAAAL
2018-10-12T15:57:59.293Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:57:59.293Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:57:59.295Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:57:59.295Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:57:59.298Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:08.877Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:08.877Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:08.879Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:08.879Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-01 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:08.880Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:14.388Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:14.388Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:14.390Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:14.390Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-12 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:14.391Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:16.348Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:16.348Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:16.349Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:16.350Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-20 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:16.351Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:17.814Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:17.814Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:17.816Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:17.816Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:17.816Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:19.653Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:19.653Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:19.655Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:19.655Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-10 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:19.656Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:22.487Z [DEBUG] commands: Command: getReport_dayReport. From: 3diBSfwHiwIaMYEXAAAL
2018-10-12T15:58:22.487Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T15:58:22.488Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T15:58:22.489Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-24 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T15:58:22.489Z [DEBUG] messages: Send data: getReport_dayReport. To: 3diBSfwHiwIaMYEXAAAL
2018-10-12T16:01:35.811Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:01:35.831Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T16:01:35.832Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T16:01:35.833Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T16:01:35.986Z [DEBUG] io: Client connected:  8r66X5Bbxi9ArSJVAAAM
2018-10-12T16:01:49.405Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:01:49.426Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-12T16:02:21.561Z [DEBUG] commands: Command: getReport_dayReport. From: 8r66X5Bbxi9ArSJVAAAM
2018-10-12T16:02:21.561Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T16:02:21.614Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T16:02:21.615Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-13 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T16:02:21.617Z [DEBUG] messages: Send data: getReport_dayReport. To: 8r66X5Bbxi9ArSJVAAAM
2018-10-12T16:04:05.707Z [DEBUG] commands: Command: getReport_dayReport. From: 8r66X5Bbxi9ArSJVAAAM
2018-10-12T16:04:05.707Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-12T16:04:05.734Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-12T16:04:05.734Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-10 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-12T16:04:05.736Z [DEBUG] messages: Send data: getReport_dayReport. To: 8r66X5Bbxi9ArSJVAAAM
<<<<<<< Updated upstream
2018-10-13T18:56:43.955Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T18:56:43.965Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T18:56:43.965Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T18:56:43.966Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T18:56:44.789Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T18:56:48.893Z [DEBUG] io: Client connected:  2HA2XVTdTC2r-YQoAAAA
2018-10-13T18:56:54.477Z [DEBUG] commands: Command: logon. From: 2HA2XVTdTC2r-YQoAAAA
2018-10-13T18:56:54.478Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T18:56:54.499Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T18:56:54.520Z [DEBUG] commands: Logon granted for: admin. From: 2HA2XVTdTC2r-YQoAAAA
2018-10-13T18:56:54.521Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T18:56:54.522Z [INFO]  users: User admin was added
2018-10-13T18:56:54.522Z [DEBUG] messages: Send command: logon. To: 2HA2XVTdTC2r-YQoAAAA
2018-10-13T18:56:54.534Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:56:54.572Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T18:56:54.573Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T18:56:54.574Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T18:56:54.900Z [DEBUG] io: Client connected:  0F5vmVP_ha6OhpHlAAAB
2018-10-13T18:56:58.733Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:56:58.736Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T18:56:58.737Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T18:56:58.740Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T18:56:59.101Z [DEBUG] io: Client connected:  WinWclwCB7WPKspNAAAC
2018-10-13T18:57:10.451Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:57:10.506Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T18:57:50.886Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T18:57:50.897Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T18:57:50.900Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T18:57:50.907Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T18:57:51.285Z [DEBUG] io: Client connected:  o94zcF52d49Ntf5MAAAA
2018-10-13T18:57:51.288Z [DEBUG] messages: Send command: logout. To: o94zcF52d49Ntf5MAAAA
2018-10-13T18:57:51.369Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T18:57:52.306Z [DEBUG] io: Client connected:  sE5XQjeI20Icvv94AAAB
2018-10-13T18:57:59.476Z [DEBUG] commands: Command: logon. From: sE5XQjeI20Icvv94AAAB
2018-10-13T18:57:59.478Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T18:57:59.481Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T18:57:59.485Z [DEBUG] commands: Logon granted for: admin. From: sE5XQjeI20Icvv94AAAB
2018-10-13T18:57:59.487Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T18:57:59.489Z [INFO]  users: User admin was added
2018-10-13T18:57:59.490Z [DEBUG] messages: Send command: logon. To: sE5XQjeI20Icvv94AAAB
2018-10-13T18:57:59.509Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:57:59.514Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T18:57:59.516Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T18:57:59.521Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T18:58:00.097Z [DEBUG] io: Client connected:  8epkOgf5mpbh5PJ-AAAC
2018-10-13T18:58:00.139Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:58:00.148Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T18:58:06.886Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:58:06.889Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T18:58:06.892Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T18:58:06.895Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T18:58:07.474Z [DEBUG] io: Client connected:  5ACIducsadO1UFAMAAAD
2018-10-13T18:58:07.518Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T18:58:07.522Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T19:00:16.936Z [DEBUG] commands: Command: getReport_dayReport. From: 5ACIducsadO1UFAMAAAD
2018-10-13T19:00:16.937Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T19:00:17.041Z [DEBUG] commands: Denided command  getReport_dayReport  for user admin
2018-10-13T19:00:17.042Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_dayReport. To: 5ACIducsadO1UFAMAAAD
2018-10-13T19:00:22.241Z [DEBUG] commands: Command: getReport_dayReport. From: 5ACIducsadO1UFAMAAAD
2018-10-13T19:00:22.242Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T19:00:22.247Z [DEBUG] commands: Denided command  getReport_dayReport  for user admin
2018-10-13T19:00:22.248Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_dayReport. To: 5ACIducsadO1UFAMAAAD
2018-10-13T19:00:44.022Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T19:00:44.030Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T19:00:44.032Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T19:00:44.033Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T19:00:44.277Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T19:00:44.596Z [DEBUG] io: Client connected:  7-FzRMBD68iGsxPOAAAA
2018-10-13T19:00:44.599Z [DEBUG] messages: Send command: logout. To: 7-FzRMBD68iGsxPOAAAA
2018-10-13T19:00:45.068Z [DEBUG] io: Client connected:  piqB41ljA4R1ZoIgAAAB
2018-10-13T19:00:51.055Z [DEBUG] commands: Command: logon. From: piqB41ljA4R1ZoIgAAAB
2018-10-13T19:00:51.056Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T19:00:51.059Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T19:00:51.061Z [DEBUG] commands: Logon granted for: admin. From: piqB41ljA4R1ZoIgAAAB
2018-10-13T19:00:51.063Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T19:00:51.064Z [INFO]  users: User admin was added
2018-10-13T19:00:51.064Z [DEBUG] messages: Send command: logon. To: piqB41ljA4R1ZoIgAAAB
2018-10-13T19:00:51.087Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:00:51.092Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T19:00:51.095Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T19:00:51.099Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:00:51.654Z [DEBUG] io: Client connected:  tWvyT55x6BHaBjArAAAC
2018-10-13T19:00:57.306Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:00:57.310Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T19:00:57.312Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T19:00:57.315Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:00:57.612Z [DEBUG] io: Client connected:  cqGPctQxUO3RsaSBAAAD
2018-10-13T19:01:00.876Z [DEBUG] commands: Command: getReport_dayReport. From: cqGPctQxUO3RsaSBAAAD
2018-10-13T19:01:00.877Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T19:01:00.881Z [DEBUG] commands: Denided command  getReport_dayReport  for user admin
2018-10-13T19:01:00.882Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_dayReport. To: cqGPctQxUO3RsaSBAAAD
2018-10-13T19:01:13.020Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:13.060Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:01:13.063Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:01:13.067Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:13.127Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:13.129Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:01:13.131Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:01:13.134Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:13.543Z [DEBUG] io: Client connected:  boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.716Z [DEBUG] commands: Command: getTickets. From: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.718Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:01:13.725Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:01:13.727Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:13.733Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:01:13.776Z [DEBUG] commands: Command: getLoadTypes. From: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.778Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:01:13.826Z [DEBUG] messages: Send data: getTickets. To: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.851Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:01:13.854Z [DEBUG] messages: Send data: getLoadTypes. To: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.940Z [DEBUG] commands: Command: getOrganizations. From: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:13.941Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:01:13.945Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:01:13.947Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:01:13.951Z [DEBUG] messages: Send data: getOrganizations. To: boI4VaKREABeoDiTAAAE
2018-10-13T19:01:17.815Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:17.820Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T19:01:17.823Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T19:01:17.827Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:17.848Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:17.851Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T19:01:17.853Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T19:01:17.856Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:18.287Z [DEBUG] io: Client connected:  bIPniy7miXX8EpQWAAAF
2018-10-13T19:01:19.439Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:19.443Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T19:01:19.447Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T19:01:19.451Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:19.755Z [DEBUG] io: Client connected:  YlCzAl4eqSbW6SS5AAAG
2018-10-13T19:01:21.005Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:21.010Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T19:01:21.013Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T19:01:21.017Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:21.367Z [DEBUG] io: Client connected:  SszVWcfxpK2Bo1GsAAAH
2018-10-13T19:01:22.385Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:22.390Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T19:01:22.393Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T19:01:22.397Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:22.414Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:22.418Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T19:01:22.421Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T19:01:22.425Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:22.711Z [DEBUG] io: Client connected:  pNFvf7lR-bZhAp1AAAAI
2018-10-13T19:01:23.871Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:23.876Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T19:01:23.878Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T19:01:23.882Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:23.901Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:23.904Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T19:01:23.908Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T19:01:23.912Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:24.332Z [DEBUG] io: Client connected:  zI-Q5JNOo-Rsd3owAAAJ
2018-10-13T19:01:24.497Z [DEBUG] commands: Command: getPersons. From: zI-Q5JNOo-Rsd3owAAAJ
2018-10-13T19:01:24.499Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T19:01:24.503Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T19:01:24.505Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T19:01:24.512Z [DEBUG] messages: Send data: getPersons. To: zI-Q5JNOo-Rsd3owAAAJ
2018-10-13T19:01:25.152Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:25.157Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T19:01:25.160Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T19:01:25.164Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:25.187Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:25.192Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T19:01:25.194Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T19:01:25.197Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:25.484Z [DEBUG] io: Client connected:  FNHyE7gPH9ZUZbmnAAAK
2018-10-13T19:01:26.549Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:26.554Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T19:01:26.556Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T19:01:26.560Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:26.578Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:26.582Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T19:01:26.585Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T19:01:26.589Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:26.905Z [DEBUG] io: Client connected:  5XUUppzy8qSYf_OrAAAL
2018-10-13T19:01:27.027Z [DEBUG] commands: Command: getPersons. From: 5XUUppzy8qSYf_OrAAAL
2018-10-13T19:01:27.029Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T19:01:27.033Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T19:01:27.035Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T19:01:27.038Z [DEBUG] messages: Send data: getPersons. To: 5XUUppzy8qSYf_OrAAAL
2018-10-13T19:01:28.925Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:28.929Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:01:28.932Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:01:28.935Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:28.953Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:28.957Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:01:28.959Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:01:28.961Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:29.527Z [DEBUG] io: Client connected:  APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:29.760Z [DEBUG] commands: Command: getTickets. From: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:29.761Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:01:29.765Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:01:29.768Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:29.772Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:01:29.786Z [DEBUG] messages: Send data: getTickets. To: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:29.826Z [DEBUG] commands: Command: getLoadTypes. From: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:29.827Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:01:29.832Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:01:29.834Z [DEBUG] messages: Send data: getLoadTypes. To: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:30.011Z [DEBUG] commands: Command: getOrganizations. From: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:30.013Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:01:30.017Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:01:30.019Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:01:30.021Z [DEBUG] messages: Send data: getOrganizations. To: APQSe_yoCq_wDp_wAAAM
2018-10-13T19:01:30.497Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:30.502Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T19:01:30.504Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T19:01:30.508Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:30.529Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:01:30.534Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T19:01:30.536Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T19:01:30.540Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:01:30.822Z [DEBUG] io: Client connected:  mLajYqnTym1fzVWXAAAN
2018-10-13T19:15:12.879Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T19:15:12.889Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T19:15:12.891Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T19:15:12.892Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T19:15:13.068Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T19:15:16.243Z [DEBUG] io: Client connected:  ZJtiw_n7hnsmcRz-AAAA
2018-10-13T19:15:16.249Z [DEBUG] messages: Send command: logout. To: ZJtiw_n7hnsmcRz-AAAA
2018-10-13T19:15:17.001Z [DEBUG] io: Client connected:  pV1UdurfCKt-NJr2AAAB
2018-10-13T19:15:23.044Z [DEBUG] commands: Command: logon. From: pV1UdurfCKt-NJr2AAAB
2018-10-13T19:15:23.045Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T19:15:23.048Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T19:15:23.051Z [DEBUG] commands: Logon granted for: admin. From: pV1UdurfCKt-NJr2AAAB
2018-10-13T19:15:23.054Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T19:15:23.055Z [INFO]  users: User admin was added
2018-10-13T19:15:23.056Z [DEBUG] messages: Send command: logon. To: pV1UdurfCKt-NJr2AAAB
2018-10-13T19:15:23.075Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:23.080Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T19:15:23.084Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T19:15:23.087Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:23.554Z [DEBUG] io: Client connected:  9jdbwzXr9ypeyQl_AAAC
2018-10-13T19:15:26.976Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:26.980Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:15:26.982Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:15:26.986Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:27.023Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:27.026Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:15:27.029Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:15:27.033Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:27.541Z [DEBUG] io: Client connected:  6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.749Z [DEBUG] commands: Command: getTickets. From: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.751Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:15:27.758Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:15:27.760Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:27.764Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:15:27.777Z [DEBUG] messages: Send data: getTickets. To: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.804Z [DEBUG] commands: Command: getLoadTypes. From: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.806Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:15:27.810Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:15:27.811Z [DEBUG] messages: Send data: getLoadTypes. To: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.920Z [DEBUG] commands: Command: getOrganizations. From: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:27.921Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:15:27.924Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:15:27.925Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:15:27.927Z [DEBUG] messages: Send data: getOrganizations. To: 6B24np5oIJB1PriFAAAD
2018-10-13T19:15:35.769Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:35.773Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T19:15:35.776Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T19:15:35.779Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:35.800Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:35.803Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T19:15:35.806Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T19:15:35.809Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:36.121Z [DEBUG] io: Client connected:  FDxdhiw1YnFz_xrpAAAE
2018-10-13T19:15:37.733Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:37.739Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:15:37.742Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:15:37.745Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:37.766Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:37.770Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:15:37.771Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:15:37.775Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:38.066Z [DEBUG] io: Client connected:  CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.316Z [DEBUG] commands: Command: getTickets. From: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.317Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:15:38.323Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:15:38.324Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:38.327Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:15:38.350Z [DEBUG] messages: Send data: getTickets. To: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.448Z [DEBUG] commands: Command: getLoadTypes. From: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.449Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:15:38.451Z [DEBUG] commands: Command: getOrganizations. From: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.453Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:15:38.456Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:15:38.457Z [DEBUG] messages: Send data: getLoadTypes. To: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:38.512Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:15:38.513Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:15:38.516Z [DEBUG] messages: Send data: getOrganizations. To: CU8z6LeFqrGZo10uAAAF
2018-10-13T19:15:44.334Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:44.338Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T19:15:44.341Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T19:15:44.345Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:44.364Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:44.368Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T19:15:44.371Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T19:15:44.374Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:44.698Z [DEBUG] io: Client connected:  5IB5J5I2ljYxHWVQAAAG
2018-10-13T19:15:47.635Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:47.640Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T19:15:47.642Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T19:15:47.646Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:47.986Z [DEBUG] io: Client connected:  eiZ0tO2vaUvXN16qAAAH
2018-10-13T19:15:48.655Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:48.659Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T19:15:48.663Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T19:15:48.666Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:48.687Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:48.689Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T19:15:48.692Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T19:15:48.697Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:48.995Z [DEBUG] io: Client connected:  FwtyUYa7NGnezNonAAAI
2018-10-13T19:15:49.762Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:49.766Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:15:49.769Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:15:49.772Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:49.791Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:49.793Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:15:49.796Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:15:49.800Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:50.118Z [DEBUG] io: Client connected:  4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.291Z [DEBUG] commands: Command: getTickets. From: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.293Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:15:50.299Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:15:50.301Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:50.305Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:15:50.318Z [DEBUG] messages: Send data: getTickets. To: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.404Z [DEBUG] commands: Command: getLoadTypes. From: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.405Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:15:50.408Z [DEBUG] commands: Command: getOrganizations. From: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.409Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:15:50.411Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:15:50.413Z [DEBUG] messages: Send data: getLoadTypes. To: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:50.472Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:15:50.473Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:15:50.476Z [DEBUG] messages: Send data: getOrganizations. To: 4iu-T9SWbqAK3naOAAAJ
2018-10-13T19:15:51.143Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:51.148Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T19:15:51.151Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T19:15:51.156Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:51.187Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:51.190Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T19:15:51.193Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T19:15:51.198Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:51.675Z [DEBUG] io: Client connected:  TY7jRwas0xkgAYcFAAAK
2018-10-13T19:15:52.685Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:52.689Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T19:15:52.692Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T19:15:52.696Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:52.716Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:52.719Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T19:15:52.722Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T19:15:52.728Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:53.022Z [DEBUG] io: Client connected:  QWSvA8zusOLCwTUeAAAL
2018-10-13T19:15:53.162Z [DEBUG] commands: Command: getPersons. From: QWSvA8zusOLCwTUeAAAL
2018-10-13T19:15:53.163Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T19:15:53.169Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T19:15:53.171Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T19:15:53.175Z [DEBUG] messages: Send data: getPersons. To: QWSvA8zusOLCwTUeAAAL
2018-10-13T19:15:53.758Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:53.761Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T19:15:53.764Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T19:15:53.769Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:53.786Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:53.791Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T19:15:53.794Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T19:15:53.797Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:54.109Z [DEBUG] io: Client connected:  RoCwWw0TlYuqY0nhAAAM
2018-10-13T19:15:54.984Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:54.989Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T19:15:54.992Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T19:15:54.996Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:55.012Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:55.015Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T19:15:55.018Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T19:15:55.020Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:55.363Z [DEBUG] io: Client connected:  m6ckGgXFroOOVrUFAAAN
2018-10-13T19:15:55.519Z [DEBUG] commands: Command: getPersons. From: m6ckGgXFroOOVrUFAAAN
2018-10-13T19:15:55.520Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T19:15:55.525Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T19:15:55.528Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T19:15:55.531Z [DEBUG] messages: Send data: getPersons. To: m6ckGgXFroOOVrUFAAAN
2018-10-13T19:15:56.193Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:56.197Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/organizations';
2018-10-13T19:15:56.201Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/organizations' AND users.user_id=1;
2018-10-13T19:15:56.205Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:56.523Z [DEBUG] io: Client connected:  iDHoejTFIG2gYqUMAAAO
2018-10-13T19:15:56.653Z [DEBUG] commands: Command: getOrganizations. From: iDHoejTFIG2gYqUMAAAO
2018-10-13T19:15:56.655Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:15:56.659Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:15:56.661Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:15:56.667Z [DEBUG] messages: Send data: getOrganizations. To: iDHoejTFIG2gYqUMAAAO
2018-10-13T19:15:58.105Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:15:58.109Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/points';
2018-10-13T19:15:58.111Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/points' AND users.user_id=1;
2018-10-13T19:15:58.115Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:15:58.475Z [DEBUG] io: Client connected:  sFm207TBt3DbFObVAAAP
2018-10-13T19:15:58.539Z [DEBUG] commands: Command: getPoints. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:15:58.541Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoints'                 AND users.login = 'admin';
2018-10-13T19:15:58.545Z [DEBUG] commands: Granted command  getPoints  for user admin
2018-10-13T19:15:58.548Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id
2018-10-13T19:15:58.552Z [DEBUG] messages: Send data: getPoints. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:00.439Z [DEBUG] commands: Command: getStates. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:00.440Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getStates'                 AND users.login = 'admin';
2018-10-13T19:16:00.443Z [DEBUG] commands: Granted command  getStates  for user admin
2018-10-13T19:16:00.445Z [DEBUG] messages: Send data: getStates. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:00.460Z [DEBUG] commands: Command: getLocalities. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:00.461Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLocalities'                 AND users.login = 'admin';
2018-10-13T19:16:00.466Z [DEBUG] commands: Granted command  getLocalities  for user admin
2018-10-13T19:16:00.467Z [DEBUG] messages: Send data: getLocalities. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:29.893Z [DEBUG] commands: Command: getOrganizations. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:29.894Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:16:29.945Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:16:29.945Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:16:29.948Z [DEBUG] messages: Send data: getOrganizations. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:32.690Z [DEBUG] commands: Command: addPoint. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:32.690Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addPoint'                 AND users.login = 'admin';
2018-10-13T19:16:32.693Z [DEBUG] commands: Granted command  addPoint  for user admin
2018-10-13T19:16:32.694Z [DEBUG] db: DB query: INSERT INTO points (organization_id, name, state_id, locality_id, locality_name, address, notes)        VALUES (1, 'Точка1', 1, 1, 'Иваново', 'Адрес1', 'Примечание');
2018-10-13T19:16:32.730Z [DEBUG] messages: Send info message: Точка добавлена. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:32.731Z [DEBUG] messages: Send data: addPoint. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:32.735Z [DEBUG] commands: Command: getPoints. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:32.736Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoints'                 AND users.login = 'admin';
2018-10-13T19:16:32.740Z [DEBUG] commands: Granted command  getPoints  for user admin
2018-10-13T19:16:32.741Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id
2018-10-13T19:16:32.744Z [DEBUG] messages: Send data: getPoints. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:35.040Z [DEBUG] commands: Command: getStates. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:35.041Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getStates'                 AND users.login = 'admin';
2018-10-13T19:16:35.045Z [DEBUG] commands: Granted command  getStates  for user admin
2018-10-13T19:16:35.046Z [DEBUG] messages: Send data: getStates. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:35.054Z [DEBUG] commands: Command: getLocalities. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:35.055Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLocalities'                 AND users.login = 'admin';
2018-10-13T19:16:35.060Z [DEBUG] commands: Granted command  getLocalities  for user admin
2018-10-13T19:16:35.061Z [DEBUG] messages: Send data: getLocalities. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:52.810Z [DEBUG] commands: Command: getOrganizations. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:16:52.811Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:16:52.865Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:16:52.867Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:16:52.870Z [DEBUG] messages: Send data: getOrganizations. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:00.103Z [DEBUG] commands: Command: addPoint. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:00.104Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addPoint'                 AND users.login = 'admin';
2018-10-13T19:17:00.108Z [DEBUG] commands: Granted command  addPoint  for user admin
2018-10-13T19:17:00.109Z [DEBUG] db: DB query: INSERT INTO points (organization_id, name, state_id, locality_id, locality_name, address, notes)        VALUES (2, 'Точка2', 2, 1, 'Яр', 'Точка2', 'вавы');
2018-10-13T19:17:00.118Z [DEBUG] messages: Send info message: Точка добавлена. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:00.119Z [DEBUG] messages: Send data: addPoint. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:00.124Z [DEBUG] commands: Command: getPoints. From: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:00.125Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoints'                 AND users.login = 'admin';
2018-10-13T19:17:00.129Z [DEBUG] commands: Granted command  getPoints  for user admin
2018-10-13T19:17:00.131Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id
2018-10-13T19:17:00.135Z [DEBUG] messages: Send data: getPoints. To: sFm207TBt3DbFObVAAAP
2018-10-13T19:17:03.887Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:17:03.890Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/points';
2018-10-13T19:17:03.892Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/points' AND users.user_id=1;
2018-10-13T19:17:03.895Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:17:04.346Z [DEBUG] io: Client connected:  bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.441Z [DEBUG] commands: Command: getPoints. From: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.442Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoints'                 AND users.login = 'admin';
2018-10-13T19:17:04.446Z [DEBUG] commands: Granted command  getPoints  for user admin
2018-10-13T19:17:04.448Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id
2018-10-13T19:17:04.450Z [DEBUG] messages: Send data: getPoints. To: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.585Z [DEBUG] commands: Command: getPoint. From: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.587Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T19:17:04.592Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T19:17:04.594Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T19:17:04.597Z [DEBUG] messages: Send data: getPoint. To: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.718Z [DEBUG] commands: Command: getStates. From: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.719Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getStates'                 AND users.login = 'admin';
2018-10-13T19:17:04.720Z [DEBUG] commands: Command: getLocalities. From: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.723Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLocalities'                 AND users.login = 'admin';
2018-10-13T19:17:04.727Z [DEBUG] commands: Granted command  getStates  for user admin
2018-10-13T19:17:04.728Z [DEBUG] messages: Send data: getStates. To: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:04.785Z [DEBUG] commands: Granted command  getLocalities  for user admin
2018-10-13T19:17:04.786Z [DEBUG] messages: Send data: getLocalities. To: bkG6_aQJYcNG54ovAAAQ
2018-10-13T19:17:25.234Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:17:25.292Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/points';
2018-10-13T19:17:25.295Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/points' AND users.user_id=1;
2018-10-13T19:17:25.297Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:57:59.084Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T19:57:59.097Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T19:57:59.099Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T19:57:59.100Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T19:57:59.596Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T19:58:08.383Z [DEBUG] io: Client connected:  V9T8RmzRqTaIbo7rAAAA
2018-10-13T19:58:17.091Z [DEBUG] commands: Command: logon. From: V9T8RmzRqTaIbo7rAAAA
2018-10-13T19:58:17.091Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T19:58:17.155Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T19:58:17.190Z [DEBUG] commands: Logon granted for: admin. From: V9T8RmzRqTaIbo7rAAAA
2018-10-13T19:58:17.193Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T19:58:17.193Z [INFO]  users: User admin was added
2018-10-13T19:58:17.194Z [DEBUG] messages: Send command: logon. To: V9T8RmzRqTaIbo7rAAAA
2018-10-13T19:58:17.263Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:17.286Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T19:58:17.290Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T19:58:17.293Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:58:17.705Z [DEBUG] io: Client connected:  -2k2jRHnxUL4wiPTAAAB
2018-10-13T19:58:20.252Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:20.255Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T19:58:20.256Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T19:58:20.258Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:58:20.323Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:20.325Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T19:58:20.326Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T19:58:20.327Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:58:20.736Z [DEBUG] io: Client connected:  s5sSoiRN__sMBEzBAAAC
2018-10-13T19:58:21.043Z [DEBUG] commands: Command: getPersons. From: s5sSoiRN__sMBEzBAAAC
2018-10-13T19:58:21.044Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T19:58:21.074Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T19:58:21.074Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T19:58:21.076Z [DEBUG] messages: Send data: getPersons. To: s5sSoiRN__sMBEzBAAAC
2018-10-13T19:58:22.201Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:22.203Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T19:58:22.205Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T19:58:22.207Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:58:22.241Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:22.243Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T19:58:22.245Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T19:58:22.248Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T19:58:22.632Z [DEBUG] io: Client connected:  Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:22.819Z [DEBUG] commands: Command: getTickets. From: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:22.819Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T19:58:22.824Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T19:58:22.824Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T19:58:22.826Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T19:58:22.887Z [DEBUG] commands: Command: getLoadTypes. From: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:22.888Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T19:58:22.918Z [DEBUG] messages: Send data: getTickets. To: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:22.957Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T19:58:22.957Z [DEBUG] messages: Send data: getLoadTypes. To: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:23.039Z [DEBUG] commands: Command: getOrganizations. From: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T19:58:23.039Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T19:58:23.041Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T19:58:23.041Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T19:58:23.043Z [DEBUG] messages: Send data: getOrganizations. To: Z_fDlnzmbAoIRi9zAAAD
2018-10-13T20:03:40.378Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:03:40.424Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:03:40.426Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:03:40.427Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:03:40.836Z [DEBUG] io: Client connected:  J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.012Z [DEBUG] commands: Command: getTickets. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.012Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:03:41.017Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:03:41.018Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:03:41.020Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:03:41.031Z [DEBUG] messages: Send data: getTickets. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.068Z [DEBUG] commands: Command: getLoadTypes. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.068Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:03:41.071Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:03:41.071Z [DEBUG] messages: Send data: getLoadTypes. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.266Z [DEBUG] commands: Command: getOrganizations. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:41.266Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:03:41.270Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:03:41.270Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:03:41.271Z [DEBUG] messages: Send data: getOrganizations. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:43.086Z [DEBUG] commands: Command: getLoadTypes. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:43.086Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:03:43.089Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:03:43.089Z [DEBUG] messages: Send data: getLoadTypes. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:48.049Z [DEBUG] commands: Command: getOrganizationPoints. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:48.049Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-13T20:03:48.052Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-13T20:03:48.052Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 1;
2018-10-13T20:03:48.054Z [DEBUG] messages: Send data: getOrganizationPoints. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:51.969Z [DEBUG] commands: Command: getOrganizationPoints. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:03:51.970Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-13T20:03:51.972Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-13T20:03:51.972Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 2;
2018-10-13T20:03:51.973Z [DEBUG] messages: Send data: getOrganizationPoints. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:04.100Z [DEBUG] commands: Command: addTicket. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:04.100Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addTicket'                 AND users.login = 'admin';
2018-10-13T20:04:04.139Z [DEBUG] commands: Granted command  addTicket  for user admin
2018-10-13T20:04:04.140Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-13T20:04:04.142Z [DEBUG] db: DB query: INSERT INTO tickets (load_organization_id, load_point_id, unload_organization_id, unload_point_id, weight, volume, creator_person_id, notes, load_type_id)    VALUES (1, 1, 2, 2, 122, 122, 1, '333',1);
2018-10-13T20:04:04.160Z [DEBUG] messages: Send info message: Точка добавлена. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:04.160Z [DEBUG] messages: Send data: addTicket. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:04.160Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-13T20:04:04.170Z [DEBUG] commands: Command: getTickets. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:04.171Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:04:04.175Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:04:04.175Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:04:04.177Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:04:04.203Z [DEBUG] messages: Send data: getTickets. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:05.709Z [DEBUG] commands: Command: getLoadTypes. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:05.709Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:04:05.712Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:04:05.712Z [DEBUG] messages: Send data: getLoadTypes. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:08.553Z [DEBUG] commands: Command: getOrganizationPoints. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:08.553Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-13T20:04:08.556Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-13T20:04:08.556Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 2;
2018-10-13T20:04:08.558Z [DEBUG] messages: Send data: getOrganizationPoints. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:11.784Z [DEBUG] commands: Command: getOrganizationPoints. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:11.784Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-13T20:04:11.788Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-13T20:04:11.788Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 1;
2018-10-13T20:04:11.789Z [DEBUG] messages: Send data: getOrganizationPoints. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:20.734Z [DEBUG] commands: Command: addTicket. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:20.734Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addTicket'                 AND users.login = 'admin';
2018-10-13T20:04:20.736Z [DEBUG] commands: Granted command  addTicket  for user admin
2018-10-13T20:04:20.736Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-13T20:04:20.737Z [DEBUG] db: DB query: INSERT INTO tickets (load_organization_id, load_point_id, unload_organization_id, unload_point_id, weight, volume, creator_person_id, notes, load_type_id)    VALUES (2, 2, 1, 1, 32, 333, 1, '45',2);
2018-10-13T20:04:20.738Z [DEBUG] messages: Send info message: Точка добавлена. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:20.739Z [DEBUG] messages: Send data: addTicket. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:20.739Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-13T20:04:20.741Z [DEBUG] commands: Command: getTickets. From: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:20.741Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:04:20.743Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:04:20.744Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:04:20.745Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:04:20.750Z [DEBUG] messages: Send data: getTickets. To: J_ELOPg2oT05lbAOAAAE
2018-10-13T20:04:22.272Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:04:22.273Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:04:22.275Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:04:22.276Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:04:22.637Z [DEBUG] io: Client connected:  pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:22.800Z [DEBUG] commands: Command: getTickets. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:22.801Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:04:22.804Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:04:22.804Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:04:22.807Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:04:22.814Z [DEBUG] messages: Send data: getTickets. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:22.856Z [DEBUG] commands: Command: getTicket. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:22.856Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:04:22.859Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:04:22.860Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-13T20:04:22.869Z [DEBUG] messages: Send data: getTicket. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.032Z [DEBUG] commands: Command: getLoadTypes. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.032Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:04:23.033Z [DEBUG] commands: Command: getOrganizations. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.034Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:04:23.035Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:04:23.035Z [DEBUG] messages: Send data: getLoadTypes. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.036Z [DEBUG] commands: Command: getOrganization. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.037Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:04:23.038Z [DEBUG] commands: Command: getOrganization. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.039Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:04:23.040Z [DEBUG] commands: Command: getPoint. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.040Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:04:23.041Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:04:23.042Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:04:23.044Z [DEBUG] messages: Send data: getOrganization. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.045Z [DEBUG] commands: Command: getPoint. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.046Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:04:23.047Z [DEBUG] commands: Command: getPerson. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.048Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:04:23.049Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:04:23.049Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:04:23.052Z [DEBUG] messages: Send data: getPoint. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.053Z [DEBUG] commands: Command: getTicketHistory. From: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.053Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:04:23.057Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:04:23.057Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-13T20:04:23.067Z [DEBUG] messages: Send data: getTicketHistory. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.139Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:04:23.139Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:04:23.141Z [DEBUG] messages: Send data: getOrganization. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.144Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:04:23.145Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:04:23.146Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:04:23.146Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:04:23.148Z [DEBUG] messages: Send data: getPerson. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.150Z [DEBUG] messages: Send data: getOrganizations. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:23.158Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:04:23.158Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:04:23.161Z [DEBUG] messages: Send data: getPoint. To: pUnZiOIZ6HD3TspSAAAF
2018-10-13T20:04:36.959Z [DEBUG] io: Client connected:  Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.111Z [DEBUG] commands: Command: getTickets. From: Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.111Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:04:37.156Z [DEBUG] commands: Command: getLoadTypes. From: Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.156Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:04:37.198Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:04:37.198Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:04:37.202Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:04:37.232Z [DEBUG] messages: Send data: getTickets. To: Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.309Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:04:37.309Z [DEBUG] messages: Send data: getLoadTypes. To: Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.399Z [DEBUG] commands: Command: getOrganizations. From: Sg23V-EIgfjssegeAAAG
2018-10-13T20:04:37.399Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:04:37.402Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:04:37.403Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:04:37.405Z [DEBUG] messages: Send data: getOrganizations. To: Sg23V-EIgfjssegeAAAG
2018-10-13T20:05:03.166Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:03.239Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:05:03.242Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:05:03.245Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:03.830Z [DEBUG] io: Client connected:  1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.096Z [DEBUG] commands: Command: getTickets. From: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.097Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:05:04.101Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:05:04.102Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:04.104Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:05:04.117Z [DEBUG] messages: Send data: getTickets. To: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.225Z [DEBUG] commands: Command: getLoadTypes. From: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.225Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:05:04.230Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:05:04.230Z [DEBUG] messages: Send data: getLoadTypes. To: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.362Z [DEBUG] commands: Command: getOrganizations. From: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.362Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:05:04.366Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:05:04.366Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:05:04.368Z [DEBUG] messages: Send data: getOrganizations. To: 1gVgz23ifI0D28u1AAAH
2018-10-13T20:05:04.916Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:04.918Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:05:04.920Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:05:04.923Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:05.310Z [DEBUG] io: Client connected:  0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.486Z [DEBUG] commands: Command: getTickets. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.486Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:05:05.490Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:05:05.491Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:05.493Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:05:05.501Z [DEBUG] messages: Send data: getTickets. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.598Z [DEBUG] commands: Command: getTicket. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.599Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:05:05.602Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:05:05.602Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-13T20:05:05.610Z [DEBUG] messages: Send data: getTicket. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.762Z [DEBUG] commands: Command: getLoadTypes. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.762Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:05:05.764Z [DEBUG] commands: Command: getOrganization. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.764Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:05:05.766Z [DEBUG] commands: Command: getOrganization. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.766Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:05:05.768Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:05:05.768Z [DEBUG] messages: Send data: getLoadTypes. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.770Z [DEBUG] commands: Command: getPoint. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.770Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:05:05.772Z [DEBUG] commands: Command: getPoint. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.772Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:05:05.773Z [DEBUG] commands: Command: getPerson. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.774Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:05:05.775Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:05:05.776Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:05:05.779Z [DEBUG] commands: Command: getTicketHistory. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.780Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:05:05.781Z [DEBUG] messages: Send data: getPoint. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.783Z [DEBUG] commands: Command: getOrganizations. From: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.784Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:05:05.787Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:05:05.787Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:05:05.789Z [DEBUG] messages: Send data: getOrganizations. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.915Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:05:05.915Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:05:05.916Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:05:05.916Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:05:05.917Z [DEBUG] messages: Send data: getOrganization. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.918Z [DEBUG] messages: Send data: getPerson. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.920Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:05:05.921Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:05:05.922Z [DEBUG] messages: Send data: getOrganization. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.929Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:05:05.929Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:05:05.932Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:05:05.932Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-13T20:05:05.933Z [DEBUG] messages: Send data: getPoint. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:05.934Z [DEBUG] messages: Send data: getTicketHistory. To: 0l31kz42stUpv8QaAAAI
2018-10-13T20:05:22.486Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:22.636Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T20:05:22.637Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T20:05:22.639Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:22.655Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:22.659Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:05:22.661Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:05:22.664Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:23.085Z [DEBUG] io: Client connected:  qiJQWanGzj2m3HXzAAAJ
2018-10-13T20:05:24.425Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:24.428Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/users';
2018-10-13T20:05:24.429Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/users' AND users.user_id=1;
2018-10-13T20:05:24.432Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:24.968Z [DEBUG] io: Client connected:  TotG4RZrxVYgDFXWAAAK
2018-10-13T20:05:25.053Z [DEBUG] commands: Command: getUsers. From: TotG4RZrxVYgDFXWAAAK
2018-10-13T20:05:25.053Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:05:25.058Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:05:25.058Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:05:25.060Z [DEBUG] messages: Send data: getUsers. To: TotG4RZrxVYgDFXWAAAK
2018-10-13T20:05:36.452Z [DEBUG] commands: Command: getPersons. From: TotG4RZrxVYgDFXWAAAK
2018-10-13T20:05:36.452Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:05:36.500Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:05:36.500Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:05:36.502Z [DEBUG] messages: Send data: getPersons. To: TotG4RZrxVYgDFXWAAAK
2018-10-13T20:05:44.521Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:44.523Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:05:44.526Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:05:44.528Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:44.998Z [DEBUG] io: Client connected:  a9deUuQJeE-7SS3GAAAL
2018-10-13T20:05:45.074Z [DEBUG] commands: Command: getUsersGroups. From: a9deUuQJeE-7SS3GAAAL
2018-10-13T20:05:45.074Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:05:45.077Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:05:45.078Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:05:45.080Z [DEBUG] messages: Send data: getUsersGroups. To: a9deUuQJeE-7SS3GAAAL
2018-10-13T20:05:45.245Z [DEBUG] commands: Command: getPermissionsTree. From: a9deUuQJeE-7SS3GAAAL
2018-10-13T20:05:45.246Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:05:45.249Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:05:45.250Z [DEBUG] messages: Send data: getPermissionsTree. To: a9deUuQJeE-7SS3GAAAL
2018-10-13T20:05:45.932Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:45.935Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:05:45.936Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:05:45.939Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:46.308Z [DEBUG] io: Client connected:  2ZzkNIEYMCokNvcKAAAM
2018-10-13T20:05:47.045Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:47.048Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/users';
2018-10-13T20:05:47.049Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/users' AND users.user_id=1;
2018-10-13T20:05:47.052Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:47.392Z [DEBUG] io: Client connected:  Nd0Dw84Uiei8-d9dAAAN
2018-10-13T20:05:47.456Z [DEBUG] commands: Command: getUsers. From: Nd0Dw84Uiei8-d9dAAAN
2018-10-13T20:05:47.456Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:05:47.459Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:05:47.460Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:05:47.462Z [DEBUG] messages: Send data: getUsers. To: Nd0Dw84Uiei8-d9dAAAN
2018-10-13T20:05:54.785Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:54.787Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:05:54.789Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:05:54.791Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:55.091Z [DEBUG] io: Client connected:  8jDv6tjP5eyzvICwAAAO
2018-10-13T20:05:56.948Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:56.951Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:05:56.953Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:05:56.956Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:57.295Z [DEBUG] io: Client connected:  vCFX-_8V6hT5bwJZAAAP
2018-10-13T20:05:57.366Z [DEBUG] commands: Command: getUsersGroups. From: vCFX-_8V6hT5bwJZAAAP
2018-10-13T20:05:57.366Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:05:57.369Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:05:57.370Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:05:57.372Z [DEBUG] messages: Send data: getUsersGroups. To: vCFX-_8V6hT5bwJZAAAP
2018-10-13T20:05:57.518Z [DEBUG] commands: Command: getPermissionsTree. From: vCFX-_8V6hT5bwJZAAAP
2018-10-13T20:05:57.518Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:05:57.522Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:05:57.522Z [DEBUG] messages: Send data: getPermissionsTree. To: vCFX-_8V6hT5bwJZAAAP
2018-10-13T20:05:58.083Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:58.085Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T20:05:58.086Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T20:05:58.088Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:58.107Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:05:58.109Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T20:05:58.110Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T20:05:58.112Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:05:58.501Z [DEBUG] io: Client connected:  DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:05:58.719Z [DEBUG] commands: Command: getPersons. From: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:05:58.719Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:05:58.722Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:05:58.723Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:05:58.724Z [DEBUG] messages: Send data: getPersons. To: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:06:17.653Z [DEBUG] commands: Command: addPerson. From: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:06:17.653Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addPerson'                 AND users.login = 'admin';
2018-10-13T20:06:17.738Z [DEBUG] commands: Granted command  addPerson  for user admin
2018-10-13T20:06:17.739Z [DEBUG] db: DB query: INSERT INTO persons (surname, name, patronymic) VALUES ('user', 'user', 'userov');
2018-10-13T20:06:17.759Z [ERROR] db: Qery error: { error: повторяющееся значение ключа нарушает ограничение уникальности "persons_pkey"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 293,
  severity: 'ОШИБКА',
  code: '23505',
  detail: 'Ключ "(person_id)=(1)" уже существует.',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'persons',
  column: undefined,
  dataType: undefined,
  constraint: 'persons_pkey',
  file: 'nbtinsert.c',
  line: '434',
  routine: '_bt_check_unique' }
2018-10-13T20:06:17.760Z [DEBUG] messages: Send error message: Ошибка. Невозможно добавить человека.. To: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:49.099Z [DEBUG] commands: Command: addPerson. From: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:49.100Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addPerson'                 AND users.login = 'admin';
2018-10-13T20:07:49.151Z [DEBUG] commands: Granted command  addPerson  for user admin
2018-10-13T20:07:49.151Z [DEBUG] db: DB query: INSERT INTO persons (surname, name, patronymic) VALUES ('user', 'user', 'userovich');
2018-10-13T20:07:49.159Z [DEBUG] messages: Send info message: Человек добавлен. To: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:49.161Z [DEBUG] messages: Send data: addPerson. To: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:49.164Z [DEBUG] commands: Command: getPersons. From: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:49.165Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:07:49.168Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:07:49.168Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:07:49.170Z [DEBUG] messages: Send data: getPersons. To: DX6Y122DBOk3LEFkAAAQ
2018-10-13T20:07:54.866Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:07:54.868Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T20:07:54.869Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T20:07:54.871Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:07:54.937Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:07:54.941Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:07:54.942Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:07:54.944Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:07:55.778Z [DEBUG] io: Client connected:  YwLQsiHeMtJ7t9sWAAAR
2018-10-13T20:07:57.010Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:07:57.013Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:07:57.014Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:07:57.016Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:07:57.465Z [DEBUG] io: Client connected:  lJipUKt8Vdqj1ectAAAS
2018-10-13T20:07:57.693Z [DEBUG] commands: Command: getUsersGroups. From: lJipUKt8Vdqj1ectAAAS
2018-10-13T20:07:57.693Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:07:57.696Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:07:57.696Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:07:57.697Z [DEBUG] messages: Send data: getUsersGroups. To: lJipUKt8Vdqj1ectAAAS
2018-10-13T20:07:57.977Z [DEBUG] commands: Command: getPermissionsTree. From: lJipUKt8Vdqj1ectAAAS
2018-10-13T20:07:57.977Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:07:57.982Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:07:57.983Z [DEBUG] messages: Send data: getPermissionsTree. To: lJipUKt8Vdqj1ectAAAS
2018-10-13T20:07:59.337Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:07:59.339Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/users';
2018-10-13T20:07:59.341Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/users' AND users.user_id=1;
2018-10-13T20:07:59.343Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:07:59.845Z [DEBUG] io: Client connected:  UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:07:59.949Z [DEBUG] commands: Command: getUsers. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:07:59.950Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:07:59.954Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:07:59.955Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:07:59.956Z [DEBUG] messages: Send data: getUsers. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:05.779Z [DEBUG] commands: Command: getPersons. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:05.780Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:08:05.783Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:08:05.784Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:08:05.785Z [DEBUG] messages: Send data: getPersons. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:10.144Z [DEBUG] commands: Command: addUser. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:10.144Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addUser'                 AND users.login = 'admin';
2018-10-13T20:08:10.147Z [DEBUG] commands: Granted command  addUser  for user admin
2018-10-13T20:08:10.147Z [DEBUG] db: DB query: INSERT INTO users (login, password_hash, enable, person_id)        VALUES ('user', '04f8996da763b7a969b1028ee3007569eaf3a635486ddab211d512c85b9df8fb', 'true', '2');
2018-10-13T20:08:10.157Z [ERROR] db: Qery error: { error: повторяющееся значение ключа нарушает ограничение уникальности "users_pkey"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 285,
  severity: 'ОШИБКА',
  code: '23505',
  detail: 'Ключ "(user_id)=(1)" уже существует.',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'users',
  column: undefined,
  dataType: undefined,
  constraint: 'users_pkey',
  file: 'nbtinsert.c',
  line: '434',
  routine: '_bt_check_unique' }
2018-10-13T20:08:10.157Z [DEBUG] messages: Send error message: Ошибка. Невозможно добавить пользователя.. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:16.480Z [DEBUG] commands: Command: getPersons. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:16.480Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:08:16.563Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:08:16.563Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:08:16.565Z [DEBUG] messages: Send data: getPersons. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:26.384Z [DEBUG] commands: Command: getPersons. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:26.384Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:08:26.386Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:08:26.386Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:08:26.387Z [DEBUG] messages: Send data: getPersons. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:30.278Z [DEBUG] commands: Command: addUser. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:30.279Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addUser'                 AND users.login = 'admin';
2018-10-13T20:08:30.281Z [DEBUG] commands: Granted command  addUser  for user admin
2018-10-13T20:08:30.281Z [DEBUG] db: DB query: INSERT INTO users (login, password_hash, enable, person_id)        VALUES ('user', '04f8996da763b7a969b1028ee3007569eaf3a635486ddab211d512c85b9df8fb', 'true', '2');
2018-10-13T20:08:30.285Z [DEBUG] messages: Send info message: Пользователь добавлен. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:30.285Z [DEBUG] messages: Send data: addUser. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:30.288Z [DEBUG] commands: Command: getUsers. From: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:30.289Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:08:30.291Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:08:30.291Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:08:30.292Z [DEBUG] messages: Send data: getUsers. To: UxKqcW3uM0cn_ku8AAAT
2018-10-13T20:08:39.252Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:39.256Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:08:39.258Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:08:39.259Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:08:39.330Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:39.331Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:08:39.332Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:08:39.333Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:08:40.050Z [DEBUG] io: Client connected:  qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.317Z [DEBUG] commands: Command: getTickets. From: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.318Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:08:40.321Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:08:40.322Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:40.324Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:08:40.335Z [DEBUG] messages: Send data: getTickets. To: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.382Z [DEBUG] commands: Command: getLoadTypes. From: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.382Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:08:40.386Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:08:40.387Z [DEBUG] messages: Send data: getLoadTypes. To: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.618Z [DEBUG] commands: Command: getOrganizations. From: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:40.618Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:08:40.622Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:08:40.622Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:08:40.625Z [DEBUG] messages: Send data: getOrganizations. To: qYbngsL56hQ5onFTAAAU
2018-10-13T20:08:41.366Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:41.369Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:08:41.370Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:08:41.372Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:08:41.902Z [DEBUG] io: Client connected:  LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.103Z [DEBUG] commands: Command: getTickets. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.103Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:08:42.106Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:08:42.106Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:42.109Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:08:42.117Z [DEBUG] messages: Send data: getTickets. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.161Z [DEBUG] commands: Command: getTicket. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.161Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:08:42.164Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:08:42.165Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-13T20:08:42.170Z [DEBUG] messages: Send data: getTicket. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.468Z [DEBUG] commands: Command: getLoadTypes. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.469Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:08:42.471Z [DEBUG] commands: Command: getOrganizations. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.472Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:08:42.473Z [DEBUG] commands: Command: getOrganization. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.473Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:08:42.475Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:08:42.477Z [DEBUG] messages: Send data: getLoadTypes. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.479Z [DEBUG] commands: Command: getOrganization. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.480Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:08:42.481Z [DEBUG] commands: Command: getPoint. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.481Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:08:42.483Z [DEBUG] commands: Command: getPoint. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.483Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:08:42.485Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:08:42.485Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:08:42.488Z [DEBUG] messages: Send data: getOrganization. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.490Z [DEBUG] commands: Command: getPerson. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.490Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:08:42.491Z [DEBUG] commands: Command: getTicketHistory. From: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.491Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:08:42.494Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:08:42.494Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:08:42.496Z [DEBUG] messages: Send data: getPerson. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.623Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:08:42.623Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:08:42.625Z [DEBUG] messages: Send data: getOrganizations. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.645Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:08:42.645Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:08:42.647Z [DEBUG] messages: Send data: getOrganization. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.706Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:08:42.706Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-13T20:08:42.708Z [DEBUG] messages: Send data: getTicketHistory. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.712Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:08:42.712Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:08:42.715Z [DEBUG] messages: Send data: getPoint. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:42.720Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:08:42.720Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:08:42.725Z [DEBUG] messages: Send data: getPoint. To: LZSrxr-vlE3dKi-oAAAV
2018-10-13T20:08:55.318Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:55.367Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:08:55.369Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:08:55.373Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:08:55.995Z [DEBUG] io: Client connected:  XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.361Z [DEBUG] commands: Command: getTickets. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.361Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:08:56.366Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:08:56.366Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:08:56.368Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:08:56.405Z [DEBUG] messages: Send data: getTickets. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.561Z [DEBUG] commands: Command: getTicket. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.561Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:08:56.564Z [DEBUG] commands: Command: getLoadTypes. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.564Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:08:56.565Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:08:56.565Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-13T20:08:56.619Z [DEBUG] commands: Command: getOrganizations. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.620Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:08:56.623Z [DEBUG] messages: Send data: getTicket. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.700Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:08:56.700Z [DEBUG] messages: Send data: getLoadTypes. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.709Z [DEBUG] commands: Command: getOrganization. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.709Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:08:56.714Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:08:56.714Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:08:56.716Z [DEBUG] messages: Send data: getOrganization. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.717Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:08:56.717Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:08:56.719Z [DEBUG] messages: Send data: getOrganizations. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.853Z [DEBUG] commands: Command: getOrganization. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.853Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:08:56.855Z [DEBUG] commands: Command: getPoint. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.855Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:08:56.857Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:08:56.857Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:08:56.858Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:08:56.858Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:08:56.859Z [DEBUG] messages: Send data: getOrganization. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.861Z [DEBUG] commands: Command: getPoint. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.862Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:08:56.863Z [DEBUG] messages: Send data: getPoint. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.864Z [DEBUG] commands: Command: getPerson. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.864Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:08:56.868Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:08:56.869Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:08:56.870Z [DEBUG] commands: Command: getTicketHistory. From: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.871Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:08:56.872Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:08:56.872Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:08:56.873Z [DEBUG] messages: Send data: getPoint. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.874Z [DEBUG] messages: Send data: getPerson. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:08:56.876Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:08:56.876Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-13T20:08:56.877Z [DEBUG] messages: Send data: getTicketHistory. To: XXBc-0Zmp25LxUonAAAW
2018-10-13T20:09:03.043Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:03.045Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:09:03.047Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:09:03.050Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:03.073Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:03.076Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:09:03.078Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:09:03.080Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:03.501Z [DEBUG] io: Client connected:  09Eela4e_bKr4icxAAAX
2018-10-13T20:09:03.886Z [DEBUG] commands: Command: getTickets. From: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:03.886Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:09:03.889Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:09:03.890Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:03.892Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:09:03.905Z [DEBUG] messages: Send data: getTickets. To: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:03.972Z [DEBUG] commands: Command: getLoadTypes. From: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:03.973Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:09:03.977Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:09:03.977Z [DEBUG] messages: Send data: getLoadTypes. To: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:04.135Z [DEBUG] commands: Command: getOrganizations. From: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:04.136Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:09:04.138Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:09:04.138Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:09:04.140Z [DEBUG] messages: Send data: getOrganizations. To: 09Eela4e_bKr4icxAAAX
2018-10-13T20:09:10.998Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:11.000Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-13T20:09:11.002Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-13T20:09:11.004Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:11.023Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:11.025Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-13T20:09:11.027Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-13T20:09:11.029Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:11.400Z [DEBUG] io: Client connected:  piEIVUPS89y-cni5AAAY
2018-10-13T20:09:13.188Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:13.190Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T20:09:13.191Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T20:09:13.194Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:13.215Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:13.218Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T20:09:13.219Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T20:09:13.222Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:13.693Z [DEBUG] io: Client connected:  EY6HIHiYJrCylZdSAAAZ
2018-10-13T20:09:14.032Z [DEBUG] commands: Command: getPersons. From: EY6HIHiYJrCylZdSAAAZ
2018-10-13T20:09:14.032Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:09:14.036Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:09:14.036Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:09:14.038Z [DEBUG] messages: Send data: getPersons. To: EY6HIHiYJrCylZdSAAAZ
2018-10-13T20:09:15.717Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:15.719Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T20:09:15.721Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T20:09:15.723Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:15.779Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:15.783Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T20:09:15.784Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T20:09:15.786Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:16.158Z [DEBUG] io: Client connected:  dHnve_UUYqFYw-W0AAAa
2018-10-13T20:09:17.387Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:17.389Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:09:17.391Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:09:17.393Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:17.412Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:17.417Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:09:17.420Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:09:17.422Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:17.976Z [DEBUG] io: Client connected:  WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.182Z [DEBUG] commands: Command: getTickets. From: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.183Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:09:18.186Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:09:18.187Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:18.189Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:09:18.200Z [DEBUG] messages: Send data: getTickets. To: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.279Z [DEBUG] commands: Command: getLoadTypes. From: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.279Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:09:18.282Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:09:18.283Z [DEBUG] messages: Send data: getLoadTypes. To: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.472Z [DEBUG] commands: Command: getOrganizations. From: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:18.472Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:09:18.475Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:09:18.476Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:09:18.477Z [DEBUG] messages: Send data: getOrganizations. To: WmZ0AAcPExOa266hAAAb
2018-10-13T20:09:19.577Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:19.579Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T20:09:19.581Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T20:09:19.583Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:19.609Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:19.612Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T20:09:19.613Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T20:09:19.616Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:20.075Z [DEBUG] io: Client connected:  netJj2PkkRab5n--AAAc
2018-10-13T20:09:21.237Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:21.239Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:09:21.242Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:09:21.245Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:21.304Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:21.307Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:09:21.309Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:09:21.312Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:21.775Z [DEBUG] io: Client connected:  o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.010Z [DEBUG] commands: Command: getTickets. From: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.011Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:09:22.015Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:09:22.015Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:22.017Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:09:22.031Z [DEBUG] messages: Send data: getTickets. To: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.064Z [DEBUG] commands: Command: getLoadTypes. From: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.065Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:09:22.068Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:09:22.068Z [DEBUG] messages: Send data: getLoadTypes. To: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.218Z [DEBUG] commands: Command: getOrganizations. From: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.218Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:09:22.221Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:09:22.221Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:09:22.222Z [DEBUG] messages: Send data: getOrganizations. To: o0OSRVTHDJdVGdDHAAAd
2018-10-13T20:09:22.916Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:22.918Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:09:22.920Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:09:22.922Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:23.383Z [DEBUG] io: Client connected:  DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.639Z [DEBUG] commands: Command: getTickets. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.640Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:09:23.643Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:09:23.643Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:23.646Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:09:23.690Z [DEBUG] messages: Send data: getTickets. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.934Z [DEBUG] commands: Command: getTicket. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.934Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:09:23.936Z [DEBUG] commands: Command: getLoadTypes. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.936Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:09:23.938Z [DEBUG] commands: Command: getOrganizations. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.939Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:09:23.940Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:09:23.940Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-13T20:09:23.946Z [DEBUG] messages: Send data: getTicket. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.974Z [DEBUG] commands: Command: getOrganization. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:23.974Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:09:23.977Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:09:23.977Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:09:23.978Z [DEBUG] messages: Send data: getOrganization. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.020Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:09:24.020Z [DEBUG] messages: Send data: getLoadTypes. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.032Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:09:24.033Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:09:24.037Z [DEBUG] messages: Send data: getOrganizations. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.081Z [DEBUG] commands: Command: getOrganization. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.082Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:09:24.084Z [DEBUG] commands: Command: getPoint. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.084Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:09:24.085Z [DEBUG] commands: Command: getPoint. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.085Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:09:24.086Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:09:24.086Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:09:24.087Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:09:24.088Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:09:24.089Z [DEBUG] commands: Command: getPerson. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.089Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:09:24.090Z [DEBUG] messages: Send data: getOrganization. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.091Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:09:24.094Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:09:24.097Z [DEBUG] messages: Send data: getPoint. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.099Z [DEBUG] messages: Send data: getPoint. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.101Z [DEBUG] commands: Command: getTicketHistory. From: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.102Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:09:24.105Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:09:24.105Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-13T20:09:24.106Z [DEBUG] messages: Send data: getTicketHistory. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:24.173Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:09:24.174Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:09:24.176Z [DEBUG] messages: Send data: getPerson. To: DdwnrxJB9xKfnVS7AAAe
2018-10-13T20:09:35.661Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:35.746Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:09:35.749Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:09:35.751Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:36.155Z [DEBUG] io: Client connected:  -qtr9bbnd9AqK3ypAAAf
2018-10-13T20:09:37.262Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:37.265Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T20:09:37.266Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T20:09:37.268Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:37.288Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:37.291Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:09:37.291Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:09:37.293Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:37.831Z [DEBUG] io: Client connected:  fy1suOywtygeVBjaAAAg
2018-10-13T20:09:39.095Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:39.097Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-13T20:09:39.099Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-13T20:09:39.102Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:39.121Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:39.123Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-13T20:09:39.125Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-13T20:09:39.127Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:39.543Z [DEBUG] io: Client connected:  nJljpVe1jTPCqrJcAAAh
2018-10-13T20:09:39.818Z [DEBUG] commands: Command: getPersons. From: nJljpVe1jTPCqrJcAAAh
2018-10-13T20:09:39.818Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-13T20:09:39.823Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-13T20:09:39.823Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-13T20:09:39.826Z [DEBUG] messages: Send data: getPersons. To: nJljpVe1jTPCqrJcAAAh
2018-10-13T20:09:41.488Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:41.490Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T20:09:41.492Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T20:09:41.494Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:41.515Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:41.518Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:09:41.519Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:09:41.522Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:42.127Z [DEBUG] io: Client connected:  4sTfLo1m0cVb7zoWAAAi
2018-10-13T20:09:43.655Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:43.657Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:09:43.658Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:09:43.661Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:44.089Z [DEBUG] io: Client connected:  hHKTRoeiOnSkv9-XAAAj
2018-10-13T20:09:44.188Z [DEBUG] commands: Command: getUsersGroups. From: hHKTRoeiOnSkv9-XAAAj
2018-10-13T20:09:44.188Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:09:44.192Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:09:44.193Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:09:44.195Z [DEBUG] messages: Send data: getUsersGroups. To: hHKTRoeiOnSkv9-XAAAj
2018-10-13T20:09:44.391Z [DEBUG] commands: Command: getPermissionsTree. From: hHKTRoeiOnSkv9-XAAAj
2018-10-13T20:09:44.391Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:09:44.394Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:09:44.395Z [DEBUG] messages: Send data: getPermissionsTree. To: hHKTRoeiOnSkv9-XAAAj
2018-10-13T20:09:45.145Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:45.148Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/users';
2018-10-13T20:09:45.149Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/users' AND users.user_id=1;
2018-10-13T20:09:45.151Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:45.640Z [DEBUG] io: Client connected:  iWo5xF0gYOEMUTr0AAAk
2018-10-13T20:09:45.914Z [DEBUG] commands: Command: getUsers. From: iWo5xF0gYOEMUTr0AAAk
2018-10-13T20:09:45.915Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:09:45.918Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:09:45.918Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:09:45.920Z [DEBUG] messages: Send data: getUsers. To: iWo5xF0gYOEMUTr0AAAk
2018-10-13T20:09:47.309Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:47.312Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:09:47.313Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:09:47.316Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:47.971Z [DEBUG] io: Client connected:  KGGmqxAOs6mGELMVAAAl
2018-10-13T20:09:48.071Z [DEBUG] commands: Command: getUsersGroups. From: KGGmqxAOs6mGELMVAAAl
2018-10-13T20:09:48.072Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:09:48.075Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:09:48.075Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:09:48.077Z [DEBUG] messages: Send data: getUsersGroups. To: KGGmqxAOs6mGELMVAAAl
2018-10-13T20:09:48.347Z [DEBUG] commands: Command: getPermissionsTree. From: KGGmqxAOs6mGELMVAAAl
2018-10-13T20:09:48.347Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:09:48.351Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:09:48.352Z [DEBUG] messages: Send data: getPermissionsTree. To: KGGmqxAOs6mGELMVAAAl
2018-10-13T20:09:53.628Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:09:53.630Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:09:53.631Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:09:53.634Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:09:54.073Z [DEBUG] io: Client connected:  7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.147Z [DEBUG] commands: Command: getUsersGroups. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.148Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:09:54.151Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:09:54.152Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:09:54.153Z [DEBUG] messages: Send data: getUsersGroups. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.380Z [DEBUG] commands: Command: getPermissionsTree. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.381Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:09:54.382Z [DEBUG] commands: Command: getUsersGroup. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.383Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroup'                 AND users.login = 'admin';
2018-10-13T20:09:54.383Z [DEBUG] commands: Command: getUsersGroup. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.383Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroup'                 AND users.login = 'admin';
2018-10-13T20:09:54.387Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:09:54.387Z [DEBUG] messages: Send data: getPermissionsTree. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.473Z [DEBUG] commands: Granted command  getUsersGroup  for user admin
2018-10-13T20:09:54.473Z [DEBUG] db: DB query: SELECT * FROM groups WHERE group_id = 5;
2018-10-13T20:09:54.475Z [DEBUG] commands: Granted command  getUsersGroup  for user admin
2018-10-13T20:09:54.475Z [DEBUG] db: DB query: SELECT * FROM groups WHERE group_id = 5;
2018-10-13T20:09:54.476Z [DEBUG] messages: Send data: getUsersGroup. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.478Z [DEBUG] messages: Send data: getUsersGroup. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.843Z [DEBUG] commands: Command: getGroupUsers. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.844Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getGroupUsers'                 AND users.login = 'admin';
2018-10-13T20:09:54.845Z [DEBUG] commands: Command: getUsersGroupPermissions. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.846Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroupPermissions'                 AND users.login = 'admin';
2018-10-13T20:09:54.847Z [DEBUG] commands: Command: getGroupUsers. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.847Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getGroupUsers'                 AND users.login = 'admin';
2018-10-13T20:09:54.848Z [DEBUG] commands: Granted command  getGroupUsers  for user admin
2018-10-13T20:09:54.848Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM groups            INNER JOIN users_groups ON groups.group_id = users_groups.group_id            INNER JOIN users ON users_groups.user_id = users.user_id            INNER JOIN persons ON users.person_id = persons.person_id        WHERE            groups.group_id = 5;
2018-10-13T20:09:54.850Z [DEBUG] commands: Granted command  getUsersGroupPermissions  for user admin
2018-10-13T20:09:54.851Z [DEBUG] db: DB query: SELECT * FROM permissions            INNER JOIN groups_permissions g ON permissions.permission_id = g.permission_id        WHERE g.group_id = 5;
2018-10-13T20:09:54.852Z [DEBUG] commands: Granted command  getGroupUsers  for user admin
2018-10-13T20:09:54.852Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM groups            INNER JOIN users_groups ON groups.group_id = users_groups.group_id            INNER JOIN users ON users_groups.user_id = users.user_id            INNER JOIN persons ON users.person_id = persons.person_id        WHERE            groups.group_id = 5;
2018-10-13T20:09:54.854Z [DEBUG] messages: Send data: getGroupUsers. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.855Z [DEBUG] messages: Send data: getUsersGroupPermissions. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.856Z [DEBUG] commands: Command: getUsersGroupPermissions. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.856Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroupPermissions'                 AND users.login = 'admin';
2018-10-13T20:09:54.857Z [DEBUG] messages: Send data: getGroupUsers. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:54.859Z [DEBUG] commands: Granted command  getUsersGroupPermissions  for user admin
2018-10-13T20:09:54.859Z [DEBUG] db: DB query: SELECT * FROM permissions            INNER JOIN groups_permissions g ON permissions.permission_id = g.permission_id        WHERE g.group_id = 5;
2018-10-13T20:09:54.860Z [DEBUG] messages: Send data: getUsersGroupPermissions. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:58.048Z [DEBUG] commands: Command: getNotGroupUsers. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:58.048Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getNotGroupUsers'                 AND users.login = 'admin';
2018-10-13T20:09:58.051Z [DEBUG] commands: Granted command  getNotGroupUsers  for user admin
2018-10-13T20:09:58.051Z [DEBUG] db: DB query: SELECT users.user_id, users.login, users.enable, p.person_id, p.surname, p.name, p.patronymic, p.birth_date, p.avatar, trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp        FROM users            LEFT OUTER JOIN users_groups ug ON users.user_id = ug.user_id            INNER JOIN persons p ON users.person_id = p.person_id            LEFT OUTER JOIN groups g ON ug.group_id = g.group_id        WHERE            g.group_id !=5 OR g.group_id IS NULL;
2018-10-13T20:09:58.054Z [DEBUG] messages: Send data: getNotGroupUsers. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.466Z [DEBUG] commands: Command: addUserToGroup. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.466Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addUserToGroup'                 AND users.login = 'admin';
2018-10-13T20:09:59.469Z [DEBUG] commands: Granted command  addUserToGroup  for user admin
2018-10-13T20:09:59.469Z [DEBUG] db: DB query: INSERT INTO users_groups (user_id, group_id) VALUES ('2', '5');
2018-10-13T20:09:59.483Z [DEBUG] messages: Send info message: Пользователь добавлен в группу. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.485Z [DEBUG] messages: Send data: addUserToGroup. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.487Z [DEBUG] commands: Command: getUsersGroup. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.488Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroup'                 AND users.login = 'admin';
2018-10-13T20:09:59.490Z [DEBUG] commands: Granted command  getUsersGroup  for user admin
2018-10-13T20:09:59.491Z [DEBUG] db: DB query: SELECT * FROM groups WHERE group_id = 5;
2018-10-13T20:09:59.491Z [DEBUG] messages: Send data: getUsersGroup. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.496Z [DEBUG] commands: Command: getGroupUsers. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.496Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getGroupUsers'                 AND users.login = 'admin';
2018-10-13T20:09:59.500Z [DEBUG] commands: Granted command  getGroupUsers  for user admin
2018-10-13T20:09:59.500Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM groups            INNER JOIN users_groups ON groups.group_id = users_groups.group_id            INNER JOIN users ON users_groups.user_id = users.user_id            INNER JOIN persons ON users.person_id = persons.person_id        WHERE            groups.group_id = 5;
2018-10-13T20:09:59.502Z [DEBUG] messages: Send data: getGroupUsers. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.515Z [DEBUG] commands: Command: getUsersGroupPermissions. From: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:09:59.515Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroupPermissions'                 AND users.login = 'admin';
2018-10-13T20:09:59.518Z [DEBUG] commands: Granted command  getUsersGroupPermissions  for user admin
2018-10-13T20:09:59.519Z [DEBUG] db: DB query: SELECT * FROM permissions            INNER JOIN groups_permissions g ON permissions.permission_id = g.permission_id        WHERE g.group_id = 5;
2018-10-13T20:09:59.520Z [DEBUG] messages: Send data: getUsersGroupPermissions. To: 7c8o2tAF9qMcRHiSAAAm
2018-10-13T20:10:02.520Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:02.522Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T20:10:02.524Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T20:10:02.527Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:02.546Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:02.549Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T20:10:02.552Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T20:10:02.555Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:03.044Z [DEBUG] io: Client connected:  aA5mP6w4T1Gh11F_AAAn
2018-10-13T20:10:04.091Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:04.094Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:10:04.095Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:10:04.098Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:04.118Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:04.120Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:10:04.123Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:10:04.127Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:04.653Z [DEBUG] io: Client connected:  YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:04.909Z [DEBUG] commands: Command: getTickets. From: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:04.910Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:10:04.913Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:10:04.913Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:04.915Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:10:04.926Z [DEBUG] messages: Send data: getTickets. To: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:04.962Z [DEBUG] commands: Command: getLoadTypes. From: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:04.962Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:10:04.965Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:10:04.966Z [DEBUG] messages: Send data: getLoadTypes. To: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:05.128Z [DEBUG] commands: Command: getOrganizations. From: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:05.128Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:10:05.131Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:10:05.131Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:10:05.132Z [DEBUG] messages: Send data: getOrganizations. To: YYlENlD0JfL6HRfUAAAo
2018-10-13T20:10:05.601Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:05.603Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:10:05.604Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:10:05.607Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:06.251Z [DEBUG] io: Client connected:  Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.434Z [DEBUG] commands: Command: getTickets. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.434Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:10:06.438Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:10:06.438Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:06.443Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:10:06.450Z [DEBUG] messages: Send data: getTickets. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.540Z [DEBUG] commands: Command: getTicket. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.541Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:10:06.546Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:10:06.546Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-13T20:10:06.551Z [DEBUG] messages: Send data: getTicket. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.871Z [DEBUG] commands: Command: getLoadTypes. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.871Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:10:06.874Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:10:06.875Z [DEBUG] messages: Send data: getLoadTypes. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.877Z [DEBUG] commands: Command: getOrganization. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.877Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:10:06.878Z [DEBUG] commands: Command: getOrganization. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.878Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:10:06.880Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:10:06.880Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:10:06.882Z [DEBUG] commands: Command: getPoint. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.882Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:10:06.883Z [DEBUG] messages: Send data: getOrganization. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.886Z [DEBUG] commands: Command: getPoint. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.886Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:10:06.890Z [DEBUG] commands: Command: getPerson. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:10:06.892Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:10:06.892Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:10:06.894Z [DEBUG] messages: Send data: getPoint. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.896Z [DEBUG] commands: Command: getTicketHistory. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.896Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:10:06.897Z [DEBUG] commands: Command: getOrganizations. From: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.897Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:10:06.899Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:10:06.899Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-13T20:10:06.901Z [DEBUG] messages: Send data: getTicketHistory. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:06.990Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:10:06.990Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:10:06.992Z [DEBUG] messages: Send data: getOrganization. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:07.008Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:10:07.009Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:10:07.023Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:10:07.023Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:10:07.030Z [DEBUG] messages: Send data: getPoint. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:07.032Z [DEBUG] messages: Send data: getOrganizations. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:07.041Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:10:07.042Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:10:07.045Z [DEBUG] messages: Send data: getPerson. To: Kr4yNzjNcznKeLMRAAAp
2018-10-13T20:10:20.349Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:20.396Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-13T20:10:20.398Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-13T20:10:20.399Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:20.414Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:20.417Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-13T20:10:20.417Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-13T20:10:20.418Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:20.897Z [DEBUG] io: Client connected:  1spxrB6bT5OJvv3wAAAq
2018-10-13T20:10:24.738Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:24.741Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/users';
2018-10-13T20:10:24.742Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/users' AND users.user_id=1;
2018-10-13T20:10:24.744Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:25.312Z [DEBUG] io: Client connected:  VRLylXRquLEEp5dLAAAr
2018-10-13T20:10:25.678Z [DEBUG] commands: Command: getUsers. From: VRLylXRquLEEp5dLAAAr
2018-10-13T20:10:25.679Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsers'                 AND users.login = 'admin';
2018-10-13T20:10:25.684Z [DEBUG] commands: Granted command  getUsers  for user admin
2018-10-13T20:10:25.684Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM users        INNER JOIN persons ON users.person_id = persons.person_id;
2018-10-13T20:10:25.686Z [DEBUG] messages: Send data: getUsers. To: VRLylXRquLEEp5dLAAAr
2018-10-13T20:10:27.974Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:27.977Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/groups';
2018-10-13T20:10:27.979Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/groups' AND users.user_id=1;
2018-10-13T20:10:27.981Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:28.380Z [DEBUG] io: Client connected:  sd6BLQOTMNQ7O_2tAAAs
2018-10-13T20:10:28.460Z [DEBUG] commands: Command: getUsersGroups. From: sd6BLQOTMNQ7O_2tAAAs
2018-10-13T20:10:28.460Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getUsersGroups'                 AND users.login = 'admin';
2018-10-13T20:10:28.463Z [DEBUG] commands: Granted command  getUsersGroups  for user admin
2018-10-13T20:10:28.464Z [DEBUG] db: DB query: SELECT * FROM groups;
2018-10-13T20:10:28.465Z [DEBUG] messages: Send data: getUsersGroups. To: sd6BLQOTMNQ7O_2tAAAs
2018-10-13T20:10:28.734Z [DEBUG] commands: Command: getPermissionsTree. From: sd6BLQOTMNQ7O_2tAAAs
2018-10-13T20:10:28.734Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPermissionsTree'                 AND users.login = 'admin';
2018-10-13T20:10:28.737Z [DEBUG] commands: Granted command  getPermissionsTree  for user admin
2018-10-13T20:10:28.737Z [DEBUG] messages: Send data: getPermissionsTree. To: sd6BLQOTMNQ7O_2tAAAs
2018-10-13T20:10:52.617Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:10:52.695Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:10:52.698Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:10:52.701Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:10:53.239Z [DEBUG] io: Client connected:  RSNC_XZHERDcxZHiAAAt
2018-10-13T20:10:56.508Z [DEBUG] commands: Command: getReport_dayReport. From: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:10:56.508Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:10:56.513Z [DEBUG] commands: Denided command  getReport_dayReport  for user admin
2018-10-13T20:10:56.513Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_dayReport. To: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:21.317Z [DEBUG] commands: Command: getReport_dayReport. From: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:21.317Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:11:21.373Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:11:21.378Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-12 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:11:21.403Z [DEBUG] messages: Send data: getReport_dayReport. To: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:28.011Z [DEBUG] commands: Command: getReport_dayReport. From: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:28.011Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:11:28.014Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:11:28.014Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-02 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:11:28.017Z [DEBUG] messages: Send data: getReport_dayReport. To: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:29.777Z [DEBUG] commands: Command: getReport_dayReport. From: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:29.777Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:11:29.781Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:11:29.781Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:11:29.783Z [DEBUG] messages: Send data: getReport_dayReport. To: RSNC_XZHERDcxZHiAAAt
2018-10-13T20:11:58.595Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T20:11:58.612Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T20:11:58.619Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T20:11:58.621Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T20:11:59.049Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T20:11:59.831Z [DEBUG] io: Client connected:  wJaQg8sZJUt6kohiAAAA
2018-10-13T20:11:59.839Z [DEBUG] messages: Send command: logout. To: wJaQg8sZJUt6kohiAAAA
2018-10-13T20:12:00.773Z [DEBUG] io: Client connected:  fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:08.144Z [DEBUG] commands: Command: logon. From: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:08.145Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '835d6dc88b708bc646d6db82c853ef4182fabbd4a8de59c213f2b5ab3ae7d9be' AND enable = TRUE;
2018-10-13T20:12:08.147Z [DEBUG] commands: Logon denided for: admin. From: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:08.147Z [DEBUG] messages: Send error message: Такие имя пользователя и пароль не найдены.. To: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:15.265Z [DEBUG] commands: Command: logon. From: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:15.265Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '835d6dc88b708bc646d6db82c853ef4182fabbd4a8de59c213f2b5ab3ae7d9be' AND enable = TRUE;
2018-10-13T20:12:15.266Z [DEBUG] commands: Logon denided for: admin. From: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:15.266Z [DEBUG] messages: Send error message: Такие имя пользователя и пароль не найдены.. To: fjsC4pFyEp1SOkO5AAAB
2018-10-13T20:12:18.123Z [DEBUG] io: Client connected:  48rWja2kfPvE4YQ7AAAC
2018-10-13T20:12:27.133Z [DEBUG] commands: Command: logon. From: 48rWja2kfPvE4YQ7AAAC
2018-10-13T20:12:27.133Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T20:12:27.187Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T20:12:27.190Z [DEBUG] commands: Logon granted for: admin. From: 48rWja2kfPvE4YQ7AAAC
2018-10-13T20:12:27.193Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T20:12:27.194Z [INFO]  users: User admin was added
2018-10-13T20:12:27.194Z [DEBUG] messages: Send command: logon. To: 48rWja2kfPvE4YQ7AAAC
2018-10-13T20:12:27.219Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:12:27.223Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:12:27.226Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:12:27.229Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:12:27.856Z [DEBUG] io: Client connected:  oZqR8NwI4rsNBQd8AAAD
2018-10-13T20:12:29.657Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:12:29.660Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:12:29.661Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:12:29.663Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:12:30.166Z [DEBUG] io: Client connected:  6y9QF-3543iJSBQoAAAE
2018-10-13T20:12:45.276Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:12:45.386Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:13:30.693Z [DEBUG] commands: Command: getReport_dayReport. From: 6y9QF-3543iJSBQoAAAE
2018-10-13T20:13:30.694Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:13:30.798Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:13:30.805Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:13:30.809Z [DEBUG] messages: Send data: getReport_dayReport. To: 6y9QF-3543iJSBQoAAAE
2018-10-13T20:21:53.746Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T20:21:53.756Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T20:21:53.757Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T20:21:53.758Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T20:21:54.163Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T20:21:54.214Z [DEBUG] io: Client connected:  hbU_gBUo3sy54iEcAAAA
2018-10-13T20:21:54.217Z [DEBUG] messages: Send command: logout. To: hbU_gBUo3sy54iEcAAAA
2018-10-13T20:21:56.017Z [DEBUG] io: Client connected:  PTDHj5yx5nVFfepyAAAB
2018-10-13T20:22:03.493Z [DEBUG] commands: Command: logon. From: PTDHj5yx5nVFfepyAAAB
2018-10-13T20:22:03.493Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T20:22:03.506Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T20:22:03.524Z [DEBUG] commands: Logon granted for: admin. From: PTDHj5yx5nVFfepyAAAB
2018-10-13T20:22:03.525Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T20:22:03.525Z [INFO]  users: User admin was added
2018-10-13T20:22:03.525Z [DEBUG] messages: Send command: logon. To: PTDHj5yx5nVFfepyAAAB
2018-10-13T20:22:03.553Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:22:03.556Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:22:03.558Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:22:03.561Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:22:04.392Z [DEBUG] io: Client connected:  8kFpWGbBeLZqirBqAAAC
2018-10-13T20:22:04.440Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:22:04.443Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:22:07.147Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:22:07.150Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:22:07.151Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:22:07.153Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:22:07.881Z [DEBUG] io: Client connected:  Q8Aq1SSovAxhcdv5AAAD
2018-10-13T20:22:07.931Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:22:07.933Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:26:18.064Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T20:26:18.070Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T20:26:18.071Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T20:26:18.072Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T20:26:18.473Z [DEBUG] io: Client connected:  qkKqnNV4R2ZvbLqMAAAA
2018-10-13T20:26:18.500Z [DEBUG] messages: Send command: logout. To: qkKqnNV4R2ZvbLqMAAAA
2018-10-13T20:26:18.605Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T20:26:20.018Z [DEBUG] io: Client connected:  JF4J1own5d6NDRx1AAAB
2018-10-13T20:26:27.033Z [DEBUG] commands: Command: logon. From: JF4J1own5d6NDRx1AAAB
2018-10-13T20:26:27.033Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T20:26:27.036Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T20:26:27.038Z [DEBUG] commands: Logon granted for: admin. From: JF4J1own5d6NDRx1AAAB
2018-10-13T20:26:27.039Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T20:26:27.039Z [INFO]  users: User admin was added
2018-10-13T20:26:27.039Z [DEBUG] messages: Send command: logon. To: JF4J1own5d6NDRx1AAAB
2018-10-13T20:26:27.056Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:26:27.060Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:26:27.062Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:26:27.065Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:26:27.796Z [DEBUG] io: Client connected:  QSYowIAiOqyhKnVfAAAC
2018-10-13T20:26:27.855Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:26:27.857Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:26:34.125Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:26:34.128Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:26:34.129Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:26:34.132Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:26:34.979Z [DEBUG] io: Client connected:  JXlg4Y-chaUO0kptAAAD
2018-10-13T20:26:35.031Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:26:35.033Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:26:59.352Z [DEBUG] commands: Command: getReport_dayReport. From: JXlg4Y-chaUO0kptAAAD
2018-10-13T20:26:59.353Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:26:59.454Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:26:59.460Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-14 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:26:59.503Z [DEBUG] messages: Send data: getReport_dayReport. To: JXlg4Y-chaUO0kptAAAD
2018-10-13T20:28:13.189Z [DEBUG] commands: Command: getReport_dayReport. From: JXlg4Y-chaUO0kptAAAD
2018-10-13T20:28:13.189Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:28:13.240Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:28:13.240Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-18 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:28:13.244Z [DEBUG] messages: Send data: getReport_dayReport. To: JXlg4Y-chaUO0kptAAAD
2018-10-13T20:28:29.719Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:28:29.757Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:28:29.758Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:28:29.760Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:28:30.494Z [DEBUG] io: Client connected:  XxRlCeUzmP85-epxAAAE
2018-10-13T20:28:30.544Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:28:30.547Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:29:06.455Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:29:06.503Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:29:06.505Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:29:06.507Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:29:07.267Z [DEBUG] io: Client connected:  CPvtYXjXZ2WAHFnPAAAF
2018-10-13T20:29:07.315Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:29:07.318Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:38:28.482Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T20:38:28.490Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T20:38:28.491Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T20:38:28.492Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T20:38:28.869Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T20:38:28.962Z [DEBUG] io: Client connected:  Hn_DD29xlnGC8CrTAAAA
2018-10-13T20:38:28.963Z [DEBUG] messages: Send command: logout. To: Hn_DD29xlnGC8CrTAAAA
2018-10-13T20:38:30.039Z [DEBUG] io: Client connected:  2JKsT_eM5lCJp_KYAAAB
2018-10-13T20:38:37.812Z [DEBUG] commands: Command: logon. From: 2JKsT_eM5lCJp_KYAAAB
2018-10-13T20:38:37.813Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T20:38:37.815Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T20:38:37.817Z [DEBUG] commands: Logon granted for: admin. From: 2JKsT_eM5lCJp_KYAAAB
2018-10-13T20:38:37.818Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T20:38:37.818Z [INFO]  users: User admin was added
2018-10-13T20:38:37.818Z [DEBUG] messages: Send command: logon. To: 2JKsT_eM5lCJp_KYAAAB
2018-10-13T20:38:37.837Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:37.841Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:38:37.842Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:38:37.845Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:38:38.536Z [DEBUG] io: Client connected:  VkB4dyZGz8Y3DWnqAAAC
2018-10-13T20:38:38.582Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:38.585Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:38:40.516Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:40.520Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:38:40.521Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:38:40.523Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:38:41.133Z [DEBUG] io: Client connected:  glmYXsQgUziedihOAAAD
2018-10-13T20:38:41.179Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:41.182Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:38:44.564Z [DEBUG] commands: Command: getReport_dayReport. From: glmYXsQgUziedihOAAAD
2018-10-13T20:38:44.565Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:38:44.570Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:38:44.578Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:38:44.582Z [DEBUG] messages: Send data: getReport_dayReport. To: glmYXsQgUziedihOAAAD
2018-10-13T20:38:58.135Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:58.202Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:38:58.205Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:38:58.207Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:38:58.856Z [DEBUG] io: Client connected:  QrW6pAdrUYT314DNAAAE
2018-10-13T20:38:58.907Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:38:58.910Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:39:00.757Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:00.759Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-13T20:39:00.761Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-13T20:39:00.764Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:39:00.788Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:00.790Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-13T20:39:00.791Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-13T20:39:00.794Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:39:01.410Z [DEBUG] io: Client connected:  Xyye__2yJhxNrFn-AAAF
2018-10-13T20:39:01.461Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:01.463Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:39:06.192Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:06.195Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-13T20:39:06.196Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-13T20:39:06.198Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:39:06.270Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:06.274Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:39:06.275Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:39:06.277Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:39:06.913Z [DEBUG] io: Client connected:  -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:06.964Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:06.966Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:39:07.316Z [DEBUG] commands: Command: getTickets. From: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:07.317Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:39:07.321Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:39:07.322Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:07.325Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:39:07.368Z [DEBUG] messages: Send data: getTickets. To: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:07.464Z [DEBUG] commands: Command: getLoadTypes. From: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:07.465Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:39:07.468Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:39:07.468Z [DEBUG] messages: Send data: getLoadTypes. To: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:07.709Z [DEBUG] commands: Command: getOrganizations. From: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:07.710Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:39:07.713Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:39:07.714Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:39:07.716Z [DEBUG] messages: Send data: getOrganizations. To: -9yGhk0GNPOph5hhAAAG
2018-10-13T20:39:12.459Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:12.462Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-13T20:39:12.463Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-13T20:39:12.465Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:39:13.026Z [DEBUG] io: Client connected:  GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.070Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:13.073Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:39:13.466Z [DEBUG] commands: Command: getTickets. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.466Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-13T20:39:13.469Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-13T20:39:13.470Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:39:13.473Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-13T20:39:13.602Z [DEBUG] messages: Send data: getTickets. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.916Z [DEBUG] commands: Command: getTicket. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.916Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-13T20:39:13.919Z [DEBUG] commands: Command: getLoadTypes. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.919Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-13T20:39:13.920Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-13T20:39:13.921Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-13T20:39:13.936Z [DEBUG] commands: Command: getOrganizations. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:13.936Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-13T20:39:13.938Z [DEBUG] messages: Send data: getTicket. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.007Z [DEBUG] commands: Command: getOrganization. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.007Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:39:14.010Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:39:14.011Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-13T20:39:14.012Z [DEBUG] messages: Send data: getOrganization. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.041Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-13T20:39:14.042Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-13T20:39:14.044Z [DEBUG] messages: Send data: getOrganizations. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.051Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-13T20:39:14.051Z [DEBUG] messages: Send data: getLoadTypes. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.251Z [DEBUG] commands: Command: getOrganization. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.251Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-13T20:39:14.254Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-13T20:39:14.255Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-13T20:39:14.258Z [DEBUG] messages: Send data: getOrganization. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.260Z [DEBUG] commands: Command: getPoint. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.260Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:39:14.261Z [DEBUG] commands: Command: getPoint. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.261Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-13T20:39:14.262Z [DEBUG] commands: Command: getPerson. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.263Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-13T20:39:14.263Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:39:14.264Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-13T20:39:14.265Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-13T20:39:14.307Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-13T20:39:14.308Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-13T20:39:14.308Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-13T20:39:14.309Z [DEBUG] messages: Send data: getPoint. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.311Z [DEBUG] messages: Send data: getPerson. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.312Z [DEBUG] commands: Command: getTicketHistory. From: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.312Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-13T20:39:14.313Z [DEBUG] messages: Send data: getPoint. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:39:14.315Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-13T20:39:14.316Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-13T20:39:14.320Z [DEBUG] messages: Send data: getTicketHistory. To: GOzGHXH5A-o9zYdxAAAH
2018-10-13T20:40:30.876Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:40:30.926Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:40:30.927Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:40:30.929Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:40:31.924Z [DEBUG] io: Client connected:  WPJ--DdM5trJ52pPAAAI
2018-10-13T20:40:32.011Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:40:32.014Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:42:16.110Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:42:16.165Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:42:16.169Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:42:16.171Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:42:17.073Z [DEBUG] io: Client connected:  DtnSSBaj1kT_333_AAAJ
2018-10-13T20:42:17.129Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:42:17.132Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:42:58.965Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:42:59.031Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:42:59.033Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:42:59.035Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:42:59.605Z [DEBUG] io: Client connected:  sgzpBSUcsKfq8BOLAAAK
2018-10-13T20:42:59.674Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:42:59.678Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:44:53.299Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:44:53.345Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:44:53.347Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:44:53.348Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:44:54.014Z [DEBUG] io: Client connected:  _J_ii2z800ii5cgmAAAL
2018-10-13T20:44:54.030Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:44:54.033Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:45:11.939Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:45:11.985Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:45:11.987Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:45:11.988Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:45:12.546Z [DEBUG] io: Client connected:  pKM42WKozh90ic1wAAAM
2018-10-13T20:45:12.597Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:45:12.599Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:45:25.206Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:45:25.249Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:45:25.252Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:45:25.254Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:45:25.898Z [DEBUG] io: Client connected:  jsQo9mLHJEwNI_RgAAAN
2018-10-13T20:45:25.942Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:45:25.946Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:46:13.239Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:46:13.284Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:46:13.286Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:46:13.289Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:46:13.822Z [DEBUG] io: Client connected:  _Q-LdZ6P3ss2LDplAAAO
2018-10-13T20:46:13.867Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:46:13.870Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:46:33.124Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:46:33.193Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:46:33.196Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:46:33.198Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:46:33.796Z [DEBUG] io: Client connected:  NFVcAiiqsHCAxG9zAAAP
2018-10-13T20:46:33.853Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:46:33.855Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:47:29.252Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:29.296Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:47:29.297Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:47:29.299Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:47:29.850Z [DEBUG] io: Client connected:  H4PHnAAHYDipo9YbAAAQ
2018-10-13T20:47:29.897Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:29.900Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:47:46.137Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:46.190Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:47:46.193Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:47:46.195Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:47:46.791Z [DEBUG] io: Client connected:  ARaYh1vqsm55QMblAAAR
2018-10-13T20:47:46.845Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:46.847Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:47:54.225Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:54.227Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:47:54.227Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:47:54.229Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:47:54.908Z [DEBUG] io: Client connected:  JlR7J9sTQa22lJZ3AAAS
2018-10-13T20:47:54.964Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:47:54.967Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:49:57.326Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:49:57.378Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:49:57.380Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:49:57.383Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:49:58.107Z [DEBUG] io: Client connected:  qYlmEuSvC7FCc865AAAT
2018-10-13T20:49:58.150Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:49:58.152Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:50:33.588Z [DEBUG] commands: Command: getReport_dayReport. From: qYlmEuSvC7FCc865AAAT
2018-10-13T20:50:33.588Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:50:33.636Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:50:33.636Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-24 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:50:33.639Z [DEBUG] messages: Send data: getReport_dayReport. To: qYlmEuSvC7FCc865AAAT
2018-10-13T20:50:42.311Z [DEBUG] commands: Command: getReport_dayReport. From: qYlmEuSvC7FCc865AAAT
2018-10-13T20:50:42.312Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_dayReport'                 AND users.login = 'admin';
2018-10-13T20:50:42.314Z [DEBUG] commands: Granted command  getReport_dayReport  for user admin
2018-10-13T20:50:42.315Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime < '2018-10-24 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T20:50:42.316Z [DEBUG] messages: Send data: getReport_dayReport. To: qYlmEuSvC7FCc865AAAT
2018-10-13T20:58:07.499Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T20:58:07.511Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T20:58:07.512Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T20:58:07.513Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T20:58:07.821Z [DEBUG] io: Client connected:  kIesOp8suMnSiMD_AAAA
2018-10-13T20:58:07.824Z [DEBUG] messages: Send command: logout. To: kIesOp8suMnSiMD_AAAA
2018-10-13T20:58:07.909Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T20:58:08.776Z [DEBUG] io: Client connected:  PVVgA3l8m9yKt0TdAAAB
2018-10-13T20:58:54.365Z [DEBUG] commands: Command: logon. From: PVVgA3l8m9yKt0TdAAAB
2018-10-13T20:58:54.365Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T20:58:54.406Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T20:58:54.408Z [DEBUG] commands: Logon granted for: admin. From: PVVgA3l8m9yKt0TdAAAB
2018-10-13T20:58:54.409Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T20:58:54.409Z [INFO]  users: User admin was added
2018-10-13T20:58:54.410Z [DEBUG] messages: Send command: logon. To: PVVgA3l8m9yKt0TdAAAB
2018-10-13T20:58:54.426Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:58:54.431Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T20:58:54.434Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T20:58:54.437Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:58:55.058Z [DEBUG] io: Client connected:  tn1KSKxR83m9UHfrAAAC
2018-10-13T20:58:55.107Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:58:55.110Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:58:56.767Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:58:56.772Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T20:58:56.774Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T20:58:56.776Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T20:58:57.425Z [DEBUG] io: Client connected:  IrH9OlRSb51Yv6LqAAAD
2018-10-13T20:58:57.470Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T20:58:57.477Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T20:59:04.784Z [DEBUG] commands: Command: getReport_periodReport. From: IrH9OlRSb51Yv6LqAAAD
2018-10-13T20:59:04.784Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T20:59:04.788Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T20:59:04.788Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: IrH9OlRSb51Yv6LqAAAD
2018-10-13T21:04:09.204Z [DEBUG] commands: Command: getReport_periodReport. From: IrH9OlRSb51Yv6LqAAAD
2018-10-13T21:04:09.204Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:04:09.248Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:04:09.248Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: IrH9OlRSb51Yv6LqAAAD
2018-10-13T21:04:13.928Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:04:13.931Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T21:04:13.933Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T21:04:13.936Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:04:14.701Z [DEBUG] io: Client connected:  xsoUt6h5GRWguEZlAAAE
2018-10-13T21:04:14.763Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:04:14.766Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:04:21.517Z [DEBUG] commands: Command: getReport_periodReport. From: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:04:21.517Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:04:21.519Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:04:21.519Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:05:00.072Z [DEBUG] commands: Command: getReport_periodReport. From: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:05:00.072Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:05:00.120Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:05:00.120Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:05:39.854Z [DEBUG] commands: Command: getReport_periodReport. From: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:06:12.358Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:06:24.116Z [DEBUG] io: Client connected:  6kjr3ZE4EIK_PSjIAAAF
2018-10-13T21:06:24.118Z [DEBUG] io: Client connected:  pLCCCVK9z_cpVPvkAAAG
2018-10-13T21:06:24.121Z [DEBUG] io: Client connected:  1NHCxHv1QPBA9GTzAAAH
2018-10-13T21:06:24.290Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:06:24.290Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: xsoUt6h5GRWguEZlAAAE
2018-10-13T21:06:33.138Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T21:06:33.144Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T21:06:33.145Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T21:06:33.146Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T21:06:33.554Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T21:06:33.697Z [DEBUG] io: Client connected:  3CeR8PDlolfOt9inAAAA
2018-10-13T21:06:33.700Z [DEBUG] messages: Send command: logout. To: 3CeR8PDlolfOt9inAAAA
2018-10-13T21:06:34.619Z [DEBUG] io: Client connected:  2nhYPwJfHkE4C3oYAAAB
2018-10-13T21:06:41.978Z [DEBUG] commands: Command: logon. From: 2nhYPwJfHkE4C3oYAAAB
2018-10-13T21:06:41.979Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T21:06:41.981Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T21:06:41.983Z [DEBUG] commands: Logon granted for: admin. From: 2nhYPwJfHkE4C3oYAAAB
2018-10-13T21:06:41.984Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T21:06:41.984Z [INFO]  users: User admin was added
2018-10-13T21:06:41.984Z [DEBUG] messages: Send command: logon. To: 2nhYPwJfHkE4C3oYAAAB
2018-10-13T21:06:42.004Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:06:42.007Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T21:06:42.009Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T21:06:42.012Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:06:42.644Z [DEBUG] io: Client connected:  QCy7w3TEiJJ8ZbAKAAAC
2018-10-13T21:06:42.689Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:06:42.692Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:06:43.922Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:06:43.924Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T21:06:43.926Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T21:06:43.929Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:06:44.529Z [DEBUG] io: Client connected:  9VOa6M1ijPy2XrZkAAAD
2018-10-13T21:06:44.575Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:06:44.579Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:06:50.827Z [DEBUG] commands: Command: getReport_periodReport. From: 9VOa6M1ijPy2XrZkAAAD
2018-10-13T21:06:50.827Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:06:50.830Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:06:50.830Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: 9VOa6M1ijPy2XrZkAAAD
2018-10-13T21:07:00.974Z [DEBUG] commands: Command: getReport_periodReport. From: 9VOa6M1ijPy2XrZkAAAD
2018-10-13T21:07:43.157Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:08:24.469Z [DEBUG] io: Client connected:  LCHOX2k0OVHIadYpAAAE
2018-10-13T21:08:24.474Z [DEBUG] io: Client connected:  JrDDK_t18TwcbH0LAAAF
2018-10-13T21:08:24.477Z [DEBUG] io: Client connected:  9TZqiMz97vxmmEv9AAAG
2018-10-13T21:10:21.701Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-13T21:10:21.701Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: 9VOa6M1ijPy2XrZkAAAD
2018-10-13T21:10:21.723Z [DEBUG] io: Client connected:  CEV0kr5P1BFJ_vSIAAAH
2018-10-13T21:10:21.726Z [DEBUG] io: Client connected:  VncTe5aeN-Gz6JufAAAI
2018-10-13T21:10:21.732Z [DEBUG] io: Client connected:  8noIePh_P9M3h92sAAAJ
2018-10-13T21:10:21.735Z [DEBUG] io: Client connected:  EaK9r3tBat1PnUXgAAAK
2018-10-13T21:10:21.738Z [DEBUG] io: Client connected:  fzKrUydwSoOCFZl_AAAL
2018-10-13T21:10:30.303Z [DEBUG] commands: Command: getReport_periodReport. From: VncTe5aeN-Gz6JufAAAI
2018-10-13T21:13:21.690Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:13:21.701Z [DEBUG] io: Client connected:  CMS0MXeBfujysAeaAAAM
2018-10-13T21:13:21.706Z [DEBUG] io: Client connected:  0iADQcSu0LzOkYrSAAAN
2018-10-13T21:13:21.709Z [DEBUG] io: Client connected:  Swv2AQuvsi5kQHn9AAAO
2018-10-13T21:13:21.711Z [DEBUG] io: Client connected:  I4XDgx_GFqUP1OlNAAAP
2018-10-13T21:13:21.713Z [DEBUG] io: Client connected:  PP-u4Qb_lBCrjic_AAAQ
2018-10-13T21:13:21.728Z [DEBUG] io: Client connected:  9kCxtgXFkSifxx_QAAAR
2018-10-13T21:13:21.740Z [DEBUG] io: Client connected:  G1iRPZB8sP1LSwpEAAAS
2018-10-13T21:13:28.822Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:14:01.747Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T21:14:01.753Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T21:14:01.754Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T21:14:01.754Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T21:14:02.062Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T21:14:03.628Z [DEBUG] io: Client connected:  IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:03.631Z [DEBUG] messages: Send command: logout. To: IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:15.520Z [DEBUG] commands: Command: getReport_periodReport. From: IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:15.520Z [DEBUG] commands: Denided command  getReport_periodReport . User is undefined.
2018-10-13T21:14:15.520Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:15.555Z [DEBUG] commands: Command: getReport_periodReport. From: IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:15.556Z [DEBUG] commands: Denided command  getReport_periodReport . User is undefined.
2018-10-13T21:14:15.556Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: IY6hMbv2VanS--TCAAAA
2018-10-13T21:14:18.005Z [DEBUG] io: Client connected:  5xgi4FdOgdKs4goBAAAB
2018-10-13T21:14:24.655Z [DEBUG] commands: Command: logon. From: 5xgi4FdOgdKs4goBAAAB
2018-10-13T21:14:24.656Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T21:14:24.714Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T21:14:24.734Z [DEBUG] commands: Logon granted for: admin. From: 5xgi4FdOgdKs4goBAAAB
2018-10-13T21:14:24.735Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T21:14:24.735Z [INFO]  users: User admin was added
2018-10-13T21:14:24.735Z [DEBUG] messages: Send command: logon. To: 5xgi4FdOgdKs4goBAAAB
2018-10-13T21:14:25.062Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:14:25.066Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T21:14:25.087Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T21:14:25.090Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:14:25.887Z [DEBUG] io: Client connected:  k12EMoz_-HEwsV0qAAAC
2018-10-13T21:14:25.921Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:14:25.923Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:15:00.371Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:00.438Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T21:15:00.440Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T21:15:00.442Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:15:01.062Z [DEBUG] io: Client connected:  pdtVF_CcHvKKMSBaAAAD
2018-10-13T21:15:01.109Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:01.112Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:15:06.764Z [DEBUG] commands: Command: getReport_periodReport. From: pdtVF_CcHvKKMSBaAAAD
2018-10-13T21:15:12.313Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:15:12.321Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:15:45.373Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T21:15:45.380Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T21:15:45.381Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T21:15:45.382Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T21:15:45.632Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T21:15:45.742Z [DEBUG] io: Client connected:  yzyFpD7rLO4zq229AAAA
2018-10-13T21:15:45.745Z [DEBUG] messages: Send command: logout. To: yzyFpD7rLO4zq229AAAA
2018-10-13T21:15:46.782Z [DEBUG] io: Client connected:  wqSRUM4B8hvTIp16AAAB
2018-10-13T21:15:53.242Z [DEBUG] commands: Command: logon. From: wqSRUM4B8hvTIp16AAAB
2018-10-13T21:15:53.242Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T21:15:53.245Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T21:15:53.248Z [DEBUG] commands: Logon granted for: admin. From: wqSRUM4B8hvTIp16AAAB
2018-10-13T21:15:53.249Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T21:15:53.250Z [INFO]  users: User admin was added
2018-10-13T21:15:53.250Z [DEBUG] messages: Send command: logon. To: wqSRUM4B8hvTIp16AAAB
2018-10-13T21:15:53.272Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:53.276Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T21:15:53.279Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T21:15:53.282Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:15:53.920Z [DEBUG] io: Client connected:  JD8CUmQ4ORHG6JLxAAAC
2018-10-13T21:15:53.975Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:53.977Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:15:55.421Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:55.424Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T21:15:55.425Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T21:15:55.427Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:15:56.081Z [DEBUG] io: Client connected:  IwkwXHA-a-13sp2dAAAD
2018-10-13T21:15:56.125Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:15:56.129Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:16:02.726Z [DEBUG] commands: Command: getReport_periodReport. From: IwkwXHA-a-13sp2dAAAD
2018-10-13T21:16:02.727Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:16:02.731Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:19:38.842Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-13T21:19:38.850Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-13T21:19:38.852Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-13T21:19:38.853Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-13T21:19:39.053Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-13T21:19:40.447Z [DEBUG] io: Client connected:  gX6EtxRibCP5Hc6dAAAA
2018-10-13T21:19:40.453Z [DEBUG] messages: Send command: logout. To: gX6EtxRibCP5Hc6dAAAA
2018-10-13T21:19:41.357Z [DEBUG] io: Client connected:  HTJavetiAV1ObCg9AAAB
2018-10-13T21:19:47.006Z [DEBUG] commands: Command: logon. From: HTJavetiAV1ObCg9AAAB
2018-10-13T21:19:47.006Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-13T21:19:47.009Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-13T21:19:47.011Z [DEBUG] commands: Logon granted for: admin. From: HTJavetiAV1ObCg9AAAB
2018-10-13T21:19:47.012Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-13T21:19:47.012Z [INFO]  users: User admin was added
2018-10-13T21:19:47.012Z [DEBUG] messages: Send command: logon. To: HTJavetiAV1ObCg9AAAB
2018-10-13T21:19:47.036Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:19:47.040Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-13T21:19:47.043Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-13T21:19:47.046Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:19:47.663Z [DEBUG] io: Client connected:  b5gXhp-dV8qkHhIpAAAC
2018-10-13T21:19:47.710Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:19:47.714Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:19:49.523Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:19:49.525Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-13T21:19:49.527Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-13T21:19:49.529Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-13T21:19:50.237Z [DEBUG] io: Client connected:  eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:19:50.287Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-13T21:19:50.290Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-13T21:19:58.031Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:19:58.031Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:19:58.035Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:19:58.041Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-08 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-21 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:19:58.082Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:20:09.202Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:20:09.202Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:20:09.273Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:20:09.273Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-08 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-14 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:20:09.279Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:20:12.210Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:20:12.210Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:20:12.213Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:20:12.213Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-08 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-13 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:20:12.215Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:14.380Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:14.381Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:14.439Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:14.439Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-08 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-12 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:14.443Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:18.941Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:18.941Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:18.944Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:18.944Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-08 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-13 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:18.946Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:21.792Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:21.793Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:21.795Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:21.795Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-14 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-13 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:21.797Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:28.223Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:28.223Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:28.226Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:28.227Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-14 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-08 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:28.228Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:29.577Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:29.577Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:29.581Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:29.582Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-14 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-08 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:29.584Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:31.033Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:31.035Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:31.038Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:31.039Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-14 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-08 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:31.041Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:32.765Z [DEBUG] commands: Command: getReport_periodReport. From: eTrxDVT_sNTEM1vlAAAD
2018-10-13T21:21:32.765Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-13T21:21:32.767Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-13T21:21:32.767Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-14 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-08 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-13T21:21:32.769Z [DEBUG] messages: Send data: getReport_dayReport. To: eTrxDVT_sNTEM1vlAAAD
2018-10-14T15:46:13.281Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-14T15:46:13.311Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-14T15:46:13.312Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-14T15:46:13.312Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-14T15:46:14.206Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-14T15:46:14.854Z [DEBUG] io: Client connected:  ttIu_cUuaAZahbiOAAAA
2018-10-14T15:46:20.015Z [DEBUG] commands: Command: logon. From: ttIu_cUuaAZahbiOAAAA
2018-10-14T15:46:20.016Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-14T15:46:20.038Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-14T15:46:20.073Z [DEBUG] commands: Logon granted for: admin. From: ttIu_cUuaAZahbiOAAAA
2018-10-14T15:46:20.074Z [DEBUG] users: Add user: admin, SessionID: 7wZRGMCleBIHTL5KBkQrsbUyC0xsSnUF
2018-10-14T15:46:20.074Z [INFO]  users: User admin was added
2018-10-14T15:46:20.074Z [DEBUG] messages: Send command: logon. To: ttIu_cUuaAZahbiOAAAA
2018-10-14T15:46:20.086Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:46:20.112Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-14T15:46:20.113Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-14T15:46:20.114Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:46:20.483Z [DEBUG] io: Client connected:  68jCgdDUh8AZuKFeAAAB
2018-10-14T15:46:22.126Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:46:22.129Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:46:22.130Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:46:22.132Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:46:22.392Z [DEBUG] io: Client connected:  RFdrmqJ2QfkFPktkAAAC
2018-10-14T15:47:46.820Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:47:46.858Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:47:46.860Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:47:46.861Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:47:47.235Z [DEBUG] io: Client connected:  BYHOPaz6yp3TrXLlAAAD
2018-10-14T15:49:06.265Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:49:06.301Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:49:06.302Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:49:06.304Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:49:06.618Z [DEBUG] io: Client connected:  JRTVkNR8ePh7HdtbAAAE
2018-10-14T15:49:24.555Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:49:24.688Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:49:24.690Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:49:24.691Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:49:25.031Z [DEBUG] io: Client connected:  UFNg7Q7b2J6LppA6AAAF
2018-10-14T15:49:54.848Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:49:54.885Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:49:54.886Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:49:54.887Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:49:55.276Z [DEBUG] io: Client connected:  hCP5a8vwHoDeZu14AAAG
2018-10-14T15:51:49.606Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:51:49.729Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:53:02.261Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:02.297Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:53:02.298Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:53:02.299Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:53:02.789Z [DEBUG] io: Client connected:  Br14631ABCTWhAkYAAAH
2018-10-14T15:53:02.835Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:02.837Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:53:21.215Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:21.265Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:53:21.268Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:53:21.269Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:53:21.733Z [DEBUG] io: Client connected:  EZL9R5v6m-72S7ttAAAI
2018-10-14T15:53:21.779Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:21.782Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:53:31.196Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:31.200Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:53:31.201Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:53:31.203Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:53:31.755Z [DEBUG] io: Client connected:  mk9tKblSVeqxfxm5AAAJ
2018-10-14T15:53:31.822Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:31.825Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:53:50.352Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:50.388Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:53:50.389Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:53:50.390Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:53:50.839Z [DEBUG] io: Client connected:  AqLBeHtMt0cGR-4AAAAK
2018-10-14T15:53:50.884Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:53:50.886Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:54:05.546Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:05.583Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:54:05.584Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:54:05.585Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:54:06.086Z [DEBUG] io: Client connected:  dHi7eiNtKPdOK9WGAAAL
2018-10-14T15:54:06.137Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:06.139Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:54:14.013Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:14.016Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:54:14.017Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:54:14.018Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:54:14.460Z [DEBUG] io: Client connected:  VOuWjUDvDQ0NEHxLAAAM
2018-10-14T15:54:14.502Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:14.505Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:54:35.866Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:35.903Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:54:35.904Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:54:35.905Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:54:36.482Z [DEBUG] io: Client connected:  QEf6JkoFRV0cb2mwAAAN
2018-10-14T15:54:36.583Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:54:36.586Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:55:22.388Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:22.435Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:55:22.436Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:55:22.437Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:55:23.040Z [DEBUG] io: Client connected:  -C8GOA_qJAK8uy3GAAAO
2018-10-14T15:55:23.092Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:23.094Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:55:42.901Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:42.948Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:55:42.949Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:55:42.950Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:55:43.429Z [DEBUG] io: Client connected:  wOnUCAk50Ee1JZ4dAAAP
2018-10-14T15:55:43.471Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:43.474Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:55:51.257Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:51.259Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:55:51.260Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:55:51.262Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:55:51.741Z [DEBUG] io: Client connected:  uIFzr-TceJlY8YZ7AAAQ
2018-10-14T15:55:51.782Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:55:51.784Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T15:56:11.677Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:56:11.813Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-14T15:56:11.815Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-14T15:56:11.816Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-14T15:56:12.408Z [DEBUG] io: Client connected:  eXBJb96IQ449V1g1AAAR
2018-10-14T15:56:12.450Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-14T15:56:12.452Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-14T16:38:52.469Z [DEBUG] commands: Command: getReport_periodReport. From: eXBJb96IQ449V1g1AAAR
2018-10-14T16:38:52.470Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-14T16:38:52.543Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-14T16:38:52.549Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-12 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-13 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-14T16:38:52.553Z [DEBUG] messages: Send data: getReport_dayReport. To: eXBJb96IQ449V1g1AAAR
=======
2018-10-12T16:23:28.458Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:23:28.481Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T16:23:28.482Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T16:23:28.483Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T16:23:28.782Z [DEBUG] io: Client connected:  -Xt8zU5Iw9Ais96CAAAN
2018-10-12T16:23:28.794Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:23:28.795Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-12T16:23:53.919Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-12T16:23:53.924Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-12T16:23:53.925Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-12T16:23:53.925Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-12T16:23:54.053Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-12T16:23:54.185Z [DEBUG] io: Client connected:  Ny512_-v728Apn1eAAAA
2018-10-12T16:23:54.186Z [DEBUG] messages: Send command: logout. To: Ny512_-v728Apn1eAAAA
2018-10-12T16:23:54.474Z [DEBUG] io: Client connected:  EKx2nvPjlHlpp0iMAAAB
2018-10-12T16:24:00.290Z [DEBUG] commands: Command: logon. From: EKx2nvPjlHlpp0iMAAAB
2018-10-12T16:24:00.290Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-12T16:24:00.292Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-12T16:24:00.293Z [DEBUG] commands: Logon granted for: admin. From: EKx2nvPjlHlpp0iMAAAB
2018-10-12T16:24:00.294Z [DEBUG] users: Add user: admin, SessionID: E75hDBFqpQ2HtqDmu28HpH6Fu2ZnMFn-
2018-10-12T16:24:00.294Z [INFO]  users: User admin was added
2018-10-12T16:24:00.294Z [DEBUG] messages: Send command: logon. To: EKx2nvPjlHlpp0iMAAAB
2018-10-12T16:24:00.305Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:24:00.307Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-12T16:24:00.308Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-12T16:24:00.309Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T16:24:00.563Z [DEBUG] io: Client connected:  Z6GVGhkeLcn4KFvnAAAC
2018-10-12T16:24:00.592Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:24:00.593Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-12T16:24:03.319Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:24:03.320Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-12T16:24:03.321Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-12T16:24:03.322Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-12T16:24:03.552Z [DEBUG] io: Client connected:  SPnps9O9m4EndCM0AAAD
2018-10-12T16:24:03.585Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-12T16:24:03.586Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
>>>>>>> Stashed changes
2018-10-15T11:58:38.003Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T11:58:38.008Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T11:58:38.008Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T11:58:38.009Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T11:58:39.047Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T11:58:46.337Z [DEBUG] io: Client connected:  VTtra2JQTjCNRWk-AAAA
2018-10-15T11:58:52.423Z [DEBUG] commands: Command: logon. From: VTtra2JQTjCNRWk-AAAA
2018-10-15T11:58:52.423Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T11:58:52.479Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T11:58:52.492Z [DEBUG] commands: Logon granted for: admin. From: VTtra2JQTjCNRWk-AAAA
2018-10-15T11:58:52.493Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T11:58:52.493Z [INFO]  users: User admin was added
2018-10-15T11:58:52.494Z [DEBUG] messages: Send command: logon. To: VTtra2JQTjCNRWk-AAAA
2018-10-15T11:58:52.503Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T11:58:52.522Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T11:58:52.523Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T11:58:52.524Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T11:58:52.672Z [DEBUG] io: Client connected:  Kep7YueWwSX4U7gkAAAB
2018-10-15T11:58:58.692Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T11:58:58.693Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T11:58:58.694Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T11:58:58.694Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T11:58:58.877Z [DEBUG] io: Client connected:  -CcLn2NOQJrDzxPgAAAC
2018-10-15T11:59:08.043Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T11:59:08.045Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T11:59:08.045Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T11:59:08.046Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T11:59:08.165Z [DEBUG] io: Client connected:  80mSpeU7fqrnHmHxAAAD
2018-10-15T11:59:17.265Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T11:59:17.266Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-15T12:01:01.009Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T12:01:01.013Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T12:01:01.014Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T12:01:01.014Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T12:01:01.150Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T12:01:01.176Z [DEBUG] io: Client connected:  wcXUrgLURKP0W59wAAAA
2018-10-15T12:01:01.178Z [DEBUG] messages: Send command: logout. To: wcXUrgLURKP0W59wAAAA
2018-10-15T12:01:01.437Z [DEBUG] io: Client connected:  wE2vUl_GPRYbxf3RAAAB
2018-10-15T12:01:09.857Z [DEBUG] commands: Command: logon. From: wE2vUl_GPRYbxf3RAAAB
2018-10-15T12:01:09.857Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T12:01:09.858Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T12:01:09.859Z [DEBUG] commands: Logon granted for: admin. From: wE2vUl_GPRYbxf3RAAAB
2018-10-15T12:01:09.860Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T12:01:09.860Z [INFO]  users: User admin was added
2018-10-15T12:01:09.860Z [DEBUG] messages: Send command: logon. To: wE2vUl_GPRYbxf3RAAAB
2018-10-15T12:01:09.874Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:01:09.876Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T12:01:09.877Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T12:01:09.878Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:01:10.120Z [DEBUG] io: Client connected:  umIAZlagrWYwuhGpAAAC
2018-10-15T12:01:10.155Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:01:10.156Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-15T12:01:11.679Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:01:11.681Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T12:01:11.681Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T12:01:11.682Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:01:11.867Z [DEBUG] io: Client connected:  c21f40PlecbijnknAAAD
2018-10-15T12:01:15.127Z [DEBUG] commands: Command: getReport_periodReport. From: c21f40PlecbijnknAAAD
2018-10-15T12:01:15.127Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:01:15.165Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-15T12:01:15.165Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: c21f40PlecbijnknAAAD
2018-10-15T12:01:20.022Z [DEBUG] commands: Command: getReport_periodReport. From: c21f40PlecbijnknAAAD
2018-10-15T12:01:20.022Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:01:20.024Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-15T12:01:20.024Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: c21f40PlecbijnknAAAD
2018-10-15T12:05:43.138Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T12:05:43.143Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T12:05:43.144Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T12:05:43.144Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T12:05:43.251Z [DEBUG] io: Client connected:  CAXCDqdUpkBeuXIpAAAA
2018-10-15T12:05:43.260Z [DEBUG] messages: Send command: logout. To: CAXCDqdUpkBeuXIpAAAA
2018-10-15T12:05:43.274Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T12:05:43.471Z [DEBUG] io: Client connected:  0USzRuKFMm21KSVqAAAB
2018-10-15T12:05:48.523Z [DEBUG] commands: Command: logon. From: 0USzRuKFMm21KSVqAAAB
2018-10-15T12:05:48.523Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T12:05:48.525Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T12:05:48.528Z [DEBUG] commands: Logon granted for: admin. From: 0USzRuKFMm21KSVqAAAB
2018-10-15T12:05:48.530Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T12:05:48.531Z [INFO]  users: User admin was added
2018-10-15T12:05:48.531Z [DEBUG] messages: Send command: logon. To: 0USzRuKFMm21KSVqAAAB
2018-10-15T12:05:48.542Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:05:48.545Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T12:05:48.546Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T12:05:48.547Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:05:48.690Z [DEBUG] io: Client connected:  WYAquDmcmg-KmR-XAAAC
2018-10-15T12:05:49.856Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:05:49.857Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T12:05:49.858Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T12:05:49.859Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:05:49.991Z [DEBUG] io: Client connected:  SbgWzqCWciUR16LIAAAD
2018-10-15T12:05:55.256Z [DEBUG] commands: Command: getReport_periodReport. From: SbgWzqCWciUR16LIAAAD
2018-10-15T12:05:55.256Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:05:55.258Z [DEBUG] commands: Denided command  getReport_periodReport  for user admin
2018-10-15T12:05:55.258Z [DEBUG] messages: Send error message: Запрещенная команда: getReport_periodReport. To: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:09.807Z [DEBUG] commands: Command: getReport_periodReport. From: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:09.807Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:10:09.851Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:10:09.855Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-09 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:10:09.890Z [DEBUG] messages: Send data: getReport_dayReport. To: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:20.272Z [DEBUG] commands: Command: getReport_periodReport. From: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:20.272Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:10:20.299Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:10:20.299Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-09 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:10:20.301Z [DEBUG] messages: Send data: getReport_dayReport. To: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:23.494Z [DEBUG] commands: Command: getReport_periodReport. From: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:23.494Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:10:23.496Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:10:23.496Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-09 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-11 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:10:23.497Z [DEBUG] messages: Send data: getReport_dayReport. To: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:33.902Z [DEBUG] commands: Command: getReport_periodReport. From: SbgWzqCWciUR16LIAAAD
2018-10-15T12:10:33.903Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:10:33.929Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:10:33.929Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:10:33.931Z [DEBUG] messages: Send data: getReport_dayReport. To: SbgWzqCWciUR16LIAAAD
2018-10-15T12:31:27.764Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T12:31:27.769Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T12:31:27.769Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T12:31:27.769Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T12:31:27.921Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T12:31:28.449Z [DEBUG] io: Client connected:  htNtP6tBXScfi60DAAAA
2018-10-15T12:31:28.451Z [DEBUG] messages: Send command: logout. To: htNtP6tBXScfi60DAAAA
2018-10-15T12:31:28.775Z [DEBUG] io: Client connected:  kfa6UXno_yv6WofTAAAB
2018-10-15T12:31:34.474Z [DEBUG] commands: Command: logon. From: kfa6UXno_yv6WofTAAAB
2018-10-15T12:31:34.474Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T12:31:34.476Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T12:31:34.477Z [DEBUG] commands: Logon granted for: admin. From: kfa6UXno_yv6WofTAAAB
2018-10-15T12:31:34.480Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T12:31:34.480Z [INFO]  users: User admin was added
2018-10-15T12:31:34.480Z [DEBUG] messages: Send command: logon. To: kfa6UXno_yv6WofTAAAB
2018-10-15T12:31:34.489Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:31:34.492Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T12:31:34.492Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T12:31:34.494Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:31:34.629Z [DEBUG] io: Client connected:  67NmOYf5G_u9qZjiAAAC
2018-10-15T12:31:45.310Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:31:45.332Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-15T12:31:45.333Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-15T12:31:45.334Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:31:45.365Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:31:45.366Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T12:31:45.367Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T12:31:45.367Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:31:45.632Z [DEBUG] io: Client connected:  6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.786Z [DEBUG] commands: Command: getTickets. From: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.786Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T12:31:45.790Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T12:31:45.790Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:31:45.792Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T12:31:45.806Z [DEBUG] commands: Command: getLoadTypes. From: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.806Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T12:31:45.822Z [DEBUG] messages: Send data: getTickets. To: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.854Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T12:31:45.854Z [DEBUG] messages: Send data: getLoadTypes. To: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.924Z [DEBUG] commands: Command: getOrganizations. From: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:45.924Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T12:31:45.926Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T12:31:45.926Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T12:31:45.928Z [DEBUG] messages: Send data: getOrganizations. To: 6dLXXtVM7fyGAYTJAAAD
2018-10-15T12:31:58.677Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:31:58.697Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T12:31:58.698Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T12:31:58.699Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:31:58.852Z [DEBUG] io: Client connected:  7BFCqFJilkgXLMi6AAAE
2018-10-15T12:32:01.361Z [DEBUG] commands: Command: getReport_periodReport. From: 7BFCqFJilkgXLMi6AAAE
2018-10-15T12:32:01.361Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:32:01.363Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:32:01.366Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > 'Invalid date 00:00:00 +3:00'      AND t.creation_datetime < 'Invalid date 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:32:01.371Z [ERROR] db: Qery error: { error: invalid input syntax for type timestamp with time zone: "Invalid date 00:00:00 +3:00"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 156,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: '742',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '3803',
  routine: 'DateTimeParseError' }
2018-10-15T12:32:01.371Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 7BFCqFJilkgXLMi6AAAE
2018-10-15T12:32:06.327Z [DEBUG] commands: Command: getReport_periodReport. From: 7BFCqFJilkgXLMi6AAAE
2018-10-15T12:32:06.328Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T12:32:06.351Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T12:32:06.352Z [DEBUG] db: DB query: SELECT p.person_id,           p.surname,           p.name,           p.patronymic,           tmp.organization_id,           tmp.organization_name,           tmp.weight_sum,           tmp.volume_sum,           tmp.count_ttl    FROM (    SELECT t.creator_person_id,           o.name AS organization_name,            o.organization_id,           COUNT(t.creator_person_id) AS count_ttl,           SUM(t.weight)              AS weight_sum,           SUM(volume)                AS volume_sum    FROM tickets AS t             LEFT JOIN persons_organizations AS po ON t.creator_person_id = po.person_id             LEFT JOIN organizations AS o ON po.organization_id = o.organization_id    WHERE t.status_id IN (1, 2)      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'    GROUP BY (t.creator_person_id, o.name, o.organization_id) ) AS tmp    JOIN persons AS p ON tmp.creator_person_id = p.person_id
2018-10-15T12:32:06.354Z [DEBUG] messages: Send data: getReport_dayReport. To: 7BFCqFJilkgXLMi6AAAE
2018-10-15T12:32:15.672Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:32:15.674Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-15T12:32:15.674Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-15T12:32:15.675Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:32:15.688Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:32:15.690Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T12:32:15.690Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T12:32:15.691Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:32:15.887Z [DEBUG] io: Client connected:  ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.149Z [DEBUG] commands: Command: getTickets. From: ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.149Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T12:32:16.149Z [DEBUG] commands: Command: getLoadTypes. From: ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.149Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T12:32:16.150Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T12:32:16.150Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:32:16.152Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T12:32:16.168Z [DEBUG] commands: Command: getOrganizations. From: ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.168Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T12:32:16.171Z [DEBUG] messages: Send data: getTickets. To: ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.198Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T12:32:16.198Z [DEBUG] messages: Send data: getLoadTypes. To: ju722TSbpecqsHCxAAAF
2018-10-15T12:32:16.204Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T12:32:16.204Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T12:32:16.205Z [DEBUG] messages: Send data: getOrganizations. To: ju722TSbpecqsHCxAAAF
2018-10-15T12:35:23.680Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:35:23.702Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-15T12:35:23.703Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-15T12:35:23.704Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:35:23.742Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:35:23.743Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T12:35:23.744Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T12:35:23.745Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:35:23.932Z [DEBUG] io: Client connected:  XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:23.985Z [DEBUG] commands: Command: getTickets. From: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:23.985Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T12:35:23.987Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T12:35:23.987Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:35:23.989Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T12:35:23.993Z [DEBUG] messages: Send data: getTickets. To: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:24.180Z [DEBUG] commands: Command: getLoadTypes. From: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:24.181Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T12:35:24.181Z [DEBUG] commands: Command: getOrganizations. From: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:24.181Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T12:35:24.182Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T12:35:24.182Z [DEBUG] messages: Send data: getLoadTypes. To: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:35:24.217Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T12:35:24.217Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T12:35:24.218Z [DEBUG] messages: Send data: getOrganizations. To: XgLCYMXhaqMScaVyAAAG
2018-10-15T12:37:13.300Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:37:13.320Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T12:37:13.321Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T12:37:13.322Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T12:37:13.456Z [DEBUG] io: Client connected:  7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.590Z [DEBUG] commands: Command: getTickets. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.591Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T12:37:13.593Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T12:37:13.593Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:37:13.594Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T12:37:13.599Z [DEBUG] messages: Send data: getTickets. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.608Z [DEBUG] commands: Command: getTicket. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.608Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-15T12:37:13.610Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-15T12:37:13.610Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-15T12:37:13.615Z [DEBUG] messages: Send data: getTicket. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.726Z [DEBUG] commands: Command: getLoadTypes. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.726Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T12:37:13.727Z [DEBUG] commands: Command: getOrganizations. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.728Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T12:37:13.728Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T12:37:13.728Z [DEBUG] messages: Send data: getLoadTypes. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.729Z [DEBUG] commands: Command: getOrganization. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.729Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-15T12:37:13.730Z [DEBUG] commands: Command: getOrganization. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.731Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-15T12:37:13.731Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-15T12:37:13.731Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-15T12:37:13.732Z [DEBUG] messages: Send data: getOrganization. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.732Z [DEBUG] commands: Command: getPoint. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.732Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-15T12:37:13.744Z [DEBUG] commands: Command: getPoint. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.744Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-15T12:37:13.745Z [DEBUG] commands: Command: getPerson. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.745Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-15T12:37:13.745Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-15T12:37:13.746Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-15T12:37:13.746Z [DEBUG] commands: Command: getPerson. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.747Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-15T12:37:13.747Z [DEBUG] messages: Send data: getPoint. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.748Z [DEBUG] commands: Command: getTicketHistory. From: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.748Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-15T12:37:13.749Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-15T12:37:13.750Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-15T12:37:13.754Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T12:37:13.802Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T12:37:13.803Z [DEBUG] messages: Send data: getTicketHistory. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.804Z [DEBUG] messages: Send data: getOrganizations. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.807Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-15T12:37:13.808Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-15T12:37:13.808Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-15T12:37:13.808Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-15T12:37:13.808Z [DEBUG] messages: Send data: getOrganization. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:13.810Z [DEBUG] messages: Send data: getPoint. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:14.005Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-15T12:37:14.005Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-15T12:37:14.007Z [DEBUG] messages: Send data: getPerson. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:14.055Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-15T12:37:14.055Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-15T12:37:14.056Z [DEBUG] messages: Send data: getPerson. To: 7RcY1W_ViNXeU9-TAAAH
2018-10-15T12:37:32.434Z [DEBUG] io: Client connected:  Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.525Z [DEBUG] commands: Command: getTickets. From: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.525Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T12:37:32.542Z [DEBUG] commands: Command: getLoadTypes. From: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.542Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T12:37:32.551Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T12:37:32.551Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T12:37:32.553Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T12:37:32.562Z [DEBUG] messages: Send data: getTickets. To: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.566Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T12:37:32.567Z [DEBUG] messages: Send data: getLoadTypes. To: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.616Z [DEBUG] commands: Command: getOrganizations. From: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T12:37:32.616Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T12:37:32.618Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T12:37:32.618Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T12:37:32.619Z [DEBUG] messages: Send data: getOrganizations. To: Zc8JoFcXmsvTzPUwAAAI
2018-10-15T13:47:55.425Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T13:47:55.441Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T13:47:55.443Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T13:47:55.445Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T13:48:12.053Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T13:48:12.058Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T13:48:12.059Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T13:48:12.059Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T13:49:03.300Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T13:49:03.310Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T13:49:03.312Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T13:49:03.313Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T13:49:03.486Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T13:49:10.515Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T13:49:10.542Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T13:49:10.543Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T13:49:10.544Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T13:49:19.446Z [DEBUG] io: Client connected:  QwqUp1q0Jf-MPWrvAAAA
2018-10-15T13:49:24.299Z [DEBUG] commands: Command: logon. From: QwqUp1q0Jf-MPWrvAAAA
2018-10-15T13:49:24.299Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T13:49:24.320Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T13:49:24.322Z [DEBUG] commands: Logon granted for: admin. From: QwqUp1q0Jf-MPWrvAAAA
2018-10-15T13:49:24.324Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T13:49:24.324Z [INFO]  users: User admin was added
2018-10-15T13:49:24.326Z [DEBUG] messages: Send command: logon. To: QwqUp1q0Jf-MPWrvAAAA
2018-10-15T13:49:24.336Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T13:49:24.341Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T13:49:24.342Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T13:49:24.344Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T13:49:24.478Z [DEBUG] io: Client connected:  rPk08xGlubb3YRgXAAAB
2018-10-15T13:49:27.407Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T13:49:27.409Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T13:49:27.412Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T13:49:27.414Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T13:49:27.536Z [DEBUG] io: Client connected:  7V0xWo3y_xo2vaoxAAAC
2018-10-15T13:49:34.966Z [DEBUG] commands: Command: getReport_periodReport. From: 7V0xWo3y_xo2vaoxAAAC
2018-10-15T13:49:34.967Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T13:49:34.970Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T13:49:34.974Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T13:51:15.978Z [DEBUG] messages: Send data: getReport_dayReport. To: 7V0xWo3y_xo2vaoxAAAC
2018-10-15T13:51:15.982Z [DEBUG] io: Client connected:  49S4eyUS9SfR9M71AAAD
2018-10-15T13:51:15.982Z [DEBUG] io: Client connected:  U2xM5IbHSPa8ftqQAAAE
2018-10-15T13:51:15.983Z [DEBUG] io: Client connected:  bxkA438zxAFZi3oIAAAF
2018-10-15T13:51:15.984Z [DEBUG] io: Client connected:  Dni3rVYpXiUQpeAOAAAG
2018-10-15T14:12:53.558Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:12:53.586Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:12:53.588Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:12:53.588Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:12:53.755Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:13:00.521Z [DEBUG] io: Client connected:  fI-J2lkklSybZFXBAAAA
2018-10-15T14:13:00.523Z [DEBUG] messages: Send command: logout. To: fI-J2lkklSybZFXBAAAA
2018-10-15T14:13:01.008Z [DEBUG] io: Client connected:  corS6mPc823q4nbMAAAB
2018-10-15T14:13:19.152Z [DEBUG] commands: Command: logon. From: corS6mPc823q4nbMAAAB
2018-10-15T14:13:19.153Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:13:19.187Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:13:19.189Z [DEBUG] commands: Logon granted for: admin. From: corS6mPc823q4nbMAAAB
2018-10-15T14:13:19.190Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:13:19.190Z [INFO]  users: User admin was added
2018-10-15T14:13:19.190Z [DEBUG] messages: Send command: logon. To: corS6mPc823q4nbMAAAB
2018-10-15T14:13:19.225Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:13:19.236Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:13:19.237Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:13:19.238Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:14:06.444Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:14:06.450Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:14:06.452Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:14:06.453Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:14:06.609Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:14:10.901Z [DEBUG] io: Client connected:  UciNCiRR5xKQbMbhAAAA
2018-10-15T14:14:16.016Z [DEBUG] commands: Command: logon. From: UciNCiRR5xKQbMbhAAAA
2018-10-15T14:14:16.017Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:14:16.019Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:14:16.021Z [DEBUG] commands: Logon granted for: admin. From: UciNCiRR5xKQbMbhAAAA
2018-10-15T14:14:16.023Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:14:16.023Z [INFO]  users: User admin was added
2018-10-15T14:14:16.024Z [DEBUG] messages: Send command: logon. To: UciNCiRR5xKQbMbhAAAA
2018-10-15T14:14:16.033Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:14:16.037Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:14:16.038Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:14:16.040Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:14:16.164Z [DEBUG] io: Client connected:  pE_0RG7WCXNcqCWAAAAB
2018-10-15T14:14:21.592Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:14:21.595Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:14:21.596Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:14:21.598Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:14:21.749Z [DEBUG] io: Client connected:  xEn-ItxZAPwvbBPvAAAC
2018-10-15T14:14:30.270Z [DEBUG] commands: Command: getReport_periodReport. From: xEn-ItxZAPwvbBPvAAAC
2018-10-15T14:14:30.270Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:14:30.275Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:14:30.279Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:14:52.660Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:14:52.666Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:14:52.667Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:14:52.669Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:14:52.841Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:14:53.289Z [DEBUG] io: Client connected:  ZEzMLxiDKcUvyCDSAAAA
2018-10-15T14:14:53.293Z [DEBUG] messages: Send command: logout. To: ZEzMLxiDKcUvyCDSAAAA
2018-10-15T14:14:53.525Z [DEBUG] io: Client connected:  cbueTtV9uTD6chk8AAAB
2018-10-15T14:14:59.057Z [DEBUG] commands: Command: logon. From: cbueTtV9uTD6chk8AAAB
2018-10-15T14:14:59.057Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:14:59.059Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:14:59.061Z [DEBUG] commands: Logon granted for: admin. From: cbueTtV9uTD6chk8AAAB
2018-10-15T14:14:59.062Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:14:59.063Z [INFO]  users: User admin was added
2018-10-15T14:14:59.063Z [DEBUG] messages: Send command: logon. To: cbueTtV9uTD6chk8AAAB
2018-10-15T14:14:59.076Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:14:59.079Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:14:59.080Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:14:59.082Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:14:59.209Z [DEBUG] io: Client connected:  vl2tzk6BjNdVzA17AAAC
2018-10-15T14:15:00.526Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:15:00.528Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:15:00.529Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:15:00.531Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:15:00.660Z [DEBUG] io: Client connected:  JWO6a2jFar63aKCKAAAD
2018-10-15T14:15:05.662Z [DEBUG] commands: Command: getReport_periodReport. From: JWO6a2jFar63aKCKAAAD
2018-10-15T14:15:05.662Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:15:05.665Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:15:05.670Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:15:05.676Z [DEBUG] messages: Send data: getReport_dayReport. To: JWO6a2jFar63aKCKAAAD
2018-10-15T14:15:11.997Z [DEBUG] commands: Command: getReport_periodReport. From: JWO6a2jFar63aKCKAAAD
2018-10-15T14:15:11.998Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:15:12.000Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:15:12.001Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:15:12.005Z [DEBUG] messages: Send data: getReport_dayReport. To: JWO6a2jFar63aKCKAAAD
2018-10-15T14:20:34.678Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:20:34.683Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:20:34.685Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:20:34.685Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:20:34.838Z [DEBUG] io: Client connected:  vNolO-5KsIT3GpnIAAAA
2018-10-15T14:20:34.840Z [DEBUG] messages: Send command: logout. To: vNolO-5KsIT3GpnIAAAA
2018-10-15T14:20:34.842Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:20:35.084Z [DEBUG] io: Client connected:  YDQ-uq5NRAIP50MgAAAB
2018-10-15T14:20:45.232Z [DEBUG] commands: Command: logon. From: YDQ-uq5NRAIP50MgAAAB
2018-10-15T14:20:45.233Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:20:45.255Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:20:45.257Z [DEBUG] commands: Logon granted for: admin. From: YDQ-uq5NRAIP50MgAAAB
2018-10-15T14:20:45.258Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:20:45.259Z [INFO]  users: User admin was added
2018-10-15T14:20:45.260Z [DEBUG] messages: Send command: logon. To: YDQ-uq5NRAIP50MgAAAB
2018-10-15T14:20:45.291Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:20:45.294Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:20:45.296Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:20:45.298Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:20:45.472Z [DEBUG] io: Client connected:  CFVZ9kjre-ycF2p9AAAC
2018-10-15T14:20:50.070Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:20:50.072Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:20:50.074Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:20:50.075Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:20:50.263Z [DEBUG] io: Client connected:  DI1M61Ab1dl9zG5tAAAD
2018-10-15T14:20:55.631Z [DEBUG] commands: Command: getReport_periodReport. From: DI1M61Ab1dl9zG5tAAAD
2018-10-15T14:20:55.631Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:20:55.635Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:20:55.640Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:20:55.650Z [DEBUG] messages: Send data: getReport_dayReport. To: DI1M61Ab1dl9zG5tAAAD
2018-10-15T14:24:17.113Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:24:17.145Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:24:17.147Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:24:17.149Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:24:17.319Z [DEBUG] io: Client connected:  n1wjeadJErpHMX2ZAAAE
2018-10-15T14:24:20.240Z [DEBUG] commands: Command: getReport_periodReport. From: n1wjeadJErpHMX2ZAAAE
2018-10-15T14:24:20.241Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:24:20.244Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:24:20.245Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > 'Invalid date 00:00:00 +3:00'
      AND t.creation_datetime < 'Invalid date 23:59:59 +3:00'
2018-10-15T14:24:20.256Z [ERROR] db: Qery error: { error: invalid input syntax for type timestamp with time zone: "Invalid date 00:00:00 +3:00"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 157,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: '3683',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '3803',
  routine: 'DateTimeParseError' }
2018-10-15T14:24:20.257Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: n1wjeadJErpHMX2ZAAAE
2018-10-15T14:24:24.560Z [DEBUG] commands: Command: getReport_periodReport. From: n1wjeadJErpHMX2ZAAAE
2018-10-15T14:24:24.560Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:24:24.583Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:24:24.584Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:24:24.590Z [DEBUG] messages: Send data: getReport_dayReport. To: n1wjeadJErpHMX2ZAAAE
2018-10-15T14:27:17.011Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:27:17.077Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:27:17.100Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:27:17.103Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:27:17.289Z [DEBUG] io: Client connected:  MGDeo_4w6byQzS8AAAAF
2018-10-15T14:27:23.913Z [DEBUG] commands: Command: getReport_periodReport. From: MGDeo_4w6byQzS8AAAAF
2018-10-15T14:27:23.914Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:27:23.917Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:27:23.918Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:27:23.924Z [DEBUG] messages: Send data: getReport_dayReport. To: MGDeo_4w6byQzS8AAAAF
2018-10-15T14:27:25.737Z [DEBUG] commands: Command: getReport_periodReport. From: MGDeo_4w6byQzS8AAAAF
2018-10-15T14:27:25.737Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:27:25.740Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:27:25.741Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:27:25.749Z [DEBUG] messages: Send data: getReport_dayReport. To: MGDeo_4w6byQzS8AAAAF
2018-10-15T14:30:22.140Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:30:22.145Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:30:22.146Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:30:22.146Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:30:22.291Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:30:22.315Z [DEBUG] io: Client connected:  0ac0lAxR6qhpLo_AAAAA
2018-10-15T14:30:22.318Z [DEBUG] messages: Send command: logout. To: 0ac0lAxR6qhpLo_AAAAA
2018-10-15T14:30:22.534Z [DEBUG] io: Client connected:  m-RmWnEYWRs-VC6VAAAB
2018-10-15T14:30:27.504Z [DEBUG] io: Client connected:  n9AIvCoBDNA_1RKkAAAC
2018-10-15T14:30:32.516Z [DEBUG] commands: Command: logon. From: n9AIvCoBDNA_1RKkAAAC
2018-10-15T14:30:32.516Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:30:32.537Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:30:32.540Z [DEBUG] commands: Logon granted for: admin. From: n9AIvCoBDNA_1RKkAAAC
2018-10-15T14:30:32.542Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:30:32.542Z [INFO]  users: User admin was added
2018-10-15T14:30:32.543Z [DEBUG] messages: Send command: logon. To: n9AIvCoBDNA_1RKkAAAC
2018-10-15T14:30:32.553Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:30:32.557Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:30:32.559Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:30:32.561Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:30:32.714Z [DEBUG] io: Client connected:  Knp6nbbAoLa5UcK9AAAD
2018-10-15T14:30:34.368Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:30:34.370Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:30:34.372Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:30:34.374Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:30:34.498Z [DEBUG] io: Client connected:  TzgNQov3Q5B09ioRAAAE
2018-10-15T14:30:45.617Z [DEBUG] commands: Command: getReport_periodReport. From: TzgNQov3Q5B09ioRAAAE
2018-10-15T14:30:45.617Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:30:45.643Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:30:45.647Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:30:45.657Z [DEBUG] messages: Send data: getReport_dayReport. To: TzgNQov3Q5B09ioRAAAE
2018-10-15T14:31:22.367Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:31:22.399Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:31:22.403Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:31:22.405Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:31:22.585Z [DEBUG] io: Client connected:  mUWBc3D8CEqXfln5AAAF
2018-10-15T14:31:31.140Z [DEBUG] commands: Command: getReport_periodReport. From: mUWBc3D8CEqXfln5AAAF
2018-10-15T14:31:31.140Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:31:31.143Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:31:31.144Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:31:31.151Z [DEBUG] messages: Send data: getReport_dayReport. To: mUWBc3D8CEqXfln5AAAF
2018-10-15T14:32:16.927Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:32:16.932Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:32:16.932Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:32:16.932Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:32:17.052Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:32:17.068Z [DEBUG] io: Client connected:  1rLjgzydr8_PVSGSAAAA
2018-10-15T14:32:17.070Z [DEBUG] messages: Send command: logout. To: 1rLjgzydr8_PVSGSAAAA
2018-10-15T14:32:17.304Z [DEBUG] io: Client connected:  29_x26EglZwOghNWAAAB
2018-10-15T14:32:25.983Z [DEBUG] commands: Command: logon. From: 29_x26EglZwOghNWAAAB
2018-10-15T14:32:25.983Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:32:25.985Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:32:25.986Z [DEBUG] commands: Logon granted for: admin. From: 29_x26EglZwOghNWAAAB
2018-10-15T14:32:25.987Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:32:25.987Z [INFO]  users: User admin was added
2018-10-15T14:32:25.987Z [DEBUG] messages: Send command: logon. To: 29_x26EglZwOghNWAAAB
2018-10-15T14:32:25.998Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:32:26.000Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:32:26.001Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:32:26.002Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:32:26.175Z [DEBUG] io: Client connected:  BJ1fQdMks1lu-UCrAAAC
2018-10-15T14:32:27.306Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:32:27.307Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:32:27.308Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:32:27.309Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:32:27.459Z [DEBUG] io: Client connected:  8UexJIXxclyBtMdeAAAD
2018-10-15T14:32:36.227Z [DEBUG] commands: Command: getReport_periodReport. From: 8UexJIXxclyBtMdeAAAD
2018-10-15T14:32:36.227Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:32:36.230Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:32:36.234Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:32:36.242Z [ERROR] db: Qery error: { error: syntax error at or near "."
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 91,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '488',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-15T14:32:36.242Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 8UexJIXxclyBtMdeAAAD
2018-10-15T14:32:41.875Z [DEBUG] commands: Command: getReport_periodReport. From: 8UexJIXxclyBtMdeAAAD
2018-10-15T14:32:41.875Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:32:41.897Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:32:41.897Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:32:41.899Z [ERROR] db: Qery error: { error: syntax error at or near "."
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 91,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '488',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-15T14:32:41.899Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 8UexJIXxclyBtMdeAAAD
2018-10-15T14:32:57.293Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T14:32:57.298Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T14:32:57.298Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T14:32:57.299Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T14:32:57.407Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T14:32:57.568Z [DEBUG] io: Client connected:  x6akWMo5Jl9tCBDwAAAA
2018-10-15T14:32:57.570Z [DEBUG] messages: Send command: logout. To: x6akWMo5Jl9tCBDwAAAA
2018-10-15T14:32:57.856Z [DEBUG] io: Client connected:  QMY3veTJlNs4UoZVAAAB
2018-10-15T14:33:05.439Z [DEBUG] commands: Command: logon. From: QMY3veTJlNs4UoZVAAAB
2018-10-15T14:33:05.439Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T14:33:05.441Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T14:33:05.442Z [DEBUG] commands: Logon granted for: admin. From: QMY3veTJlNs4UoZVAAAB
2018-10-15T14:33:05.442Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T14:33:05.443Z [INFO]  users: User admin was added
2018-10-15T14:33:05.443Z [DEBUG] messages: Send command: logon. To: QMY3veTJlNs4UoZVAAAB
2018-10-15T14:33:05.453Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:33:05.455Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T14:33:05.457Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T14:33:05.458Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:33:05.620Z [DEBUG] io: Client connected:  NUVJusAvIC4Mo_IgAAAC
2018-10-15T14:33:07.092Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:33:07.094Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:33:07.094Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:33:07.095Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:33:07.204Z [DEBUG] io: Client connected:  r92lATabsQhZwz2LAAAD
2018-10-15T14:33:16.341Z [DEBUG] commands: Command: getReport_periodReport. From: r92lATabsQhZwz2LAAAD
2018-10-15T14:33:16.342Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:33:16.344Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:33:16.348Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:33:16.353Z [DEBUG] messages: Send data: getReport_dayReport. To: r92lATabsQhZwz2LAAAD
2018-10-15T14:33:45.920Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:33:45.940Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:33:45.941Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:33:45.942Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:33:46.101Z [DEBUG] io: Client connected:  CP-Gjs7dS85sSyr4AAAE
2018-10-15T14:33:51.942Z [DEBUG] commands: Command: getReport_periodReport. From: CP-Gjs7dS85sSyr4AAAE
2018-10-15T14:33:51.942Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:33:51.944Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:33:51.944Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > 'Invalid date 00:00:00 +3:00'
      AND t.creation_datetime < 'Invalid date 23:59:59 +3:00'
2018-10-15T14:33:51.950Z [ERROR] db: Qery error: { error: invalid input syntax for type timestamp with time zone: "Invalid date 00:00:00 +3:00"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 157,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: '3694',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '3803',
  routine: 'DateTimeParseError' }
2018-10-15T14:33:51.951Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: CP-Gjs7dS85sSyr4AAAE
2018-10-15T14:33:56.325Z [DEBUG] commands: Command: getReport_periodReport. From: CP-Gjs7dS85sSyr4AAAE
2018-10-15T14:33:56.325Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:33:56.346Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:33:56.347Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:33:56.353Z [DEBUG] messages: Send data: getReport_dayReport. To: CP-Gjs7dS85sSyr4AAAE
2018-10-15T14:40:01.335Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T14:40:01.356Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T14:40:01.357Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T14:40:01.358Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T14:40:01.518Z [DEBUG] io: Client connected:  RlLFtU57duTL7_kuAAAF
2018-10-15T14:40:09.880Z [DEBUG] commands: Command: getReport_periodReport. From: RlLFtU57duTL7_kuAAAF
2018-10-15T14:40:09.880Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T14:40:09.882Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T14:40:09.882Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
    WHERE t.status_id IN (1, 2)
      AND t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-15T14:40:09.887Z [DEBUG] messages: Send data: getReport_dayReport. To: RlLFtU57duTL7_kuAAAF
2018-10-15T15:01:13.360Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T15:01:13.369Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T15:01:13.370Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T15:01:13.371Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T15:01:13.527Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T15:01:13.665Z [DEBUG] io: Client connected:  OOUH4SFl-cxzw7fWAAAA
2018-10-15T15:01:13.668Z [DEBUG] messages: Send command: logout. To: OOUH4SFl-cxzw7fWAAAA
2018-10-15T15:01:14.109Z [DEBUG] io: Client connected:  ENF1rcqdy3A3Rg5BAAAB
2018-10-15T15:01:26.423Z [DEBUG] commands: Command: logon. From: ENF1rcqdy3A3Rg5BAAAB
2018-10-15T15:01:26.424Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T15:01:26.455Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T15:01:26.457Z [DEBUG] commands: Logon granted for: admin. From: ENF1rcqdy3A3Rg5BAAAB
2018-10-15T15:01:26.459Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T15:01:26.459Z [INFO]  users: User admin was added
2018-10-15T15:01:26.469Z [DEBUG] messages: Send command: logon. To: ENF1rcqdy3A3Rg5BAAAB
2018-10-15T15:01:26.503Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:01:26.512Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T15:01:26.514Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T15:01:26.516Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:01:26.680Z [DEBUG] io: Client connected:  0H4E2PnlvLv3bscHAAAC
2018-10-15T15:01:28.084Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:01:28.087Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-15T15:01:28.089Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-15T15:01:28.091Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:01:28.104Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:01:28.106Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T15:01:28.107Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T15:01:28.109Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:01:28.314Z [DEBUG] io: Client connected:  0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.418Z [DEBUG] commands: Command: getTickets. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.419Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:01:28.423Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:01:28.424Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:01:28.427Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:01:28.446Z [DEBUG] commands: Command: getLoadTypes. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.447Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:01:28.454Z [DEBUG] messages: Send data: getTickets. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.496Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:01:28.497Z [DEBUG] messages: Send data: getLoadTypes. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.575Z [DEBUG] commands: Command: getOrganizations. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:28.576Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:01:28.579Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:01:28.580Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:01:28.582Z [DEBUG] messages: Send data: getOrganizations. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:30.293Z [DEBUG] commands: Command: getLoadTypes. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:30.294Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:01:30.297Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:01:30.298Z [DEBUG] messages: Send data: getLoadTypes. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:38.028Z [DEBUG] commands: Command: getOrganizationPoints. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:38.029Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-15T15:01:38.031Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-15T15:01:38.032Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 1;
2018-10-15T15:01:38.035Z [DEBUG] messages: Send data: getOrganizationPoints. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:39.876Z [DEBUG] commands: Command: getOrganizationPoints. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:39.876Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-15T15:01:39.879Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-15T15:01:39.880Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 2;
2018-10-15T15:01:39.881Z [DEBUG] messages: Send data: getOrganizationPoints. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:54.365Z [DEBUG] commands: Command: addTicket. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:54.365Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addTicket'                 AND users.login = 'admin';
2018-10-15T15:01:54.389Z [DEBUG] commands: Granted command  addTicket  for user admin
2018-10-15T15:01:54.389Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-15T15:01:54.391Z [DEBUG] db: DB query: INSERT INTO tickets (load_organization_id, load_point_id, unload_organization_id, unload_point_id, weight, volume, creator_person_id, notes, load_type_id)    VALUES (1, 2, 2, 1, 23, 33, 1, '',3);
2018-10-15T15:01:54.434Z [DEBUG] messages: Send info message: Точка добавлена. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:54.435Z [DEBUG] messages: Send data: addTicket. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:54.436Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-15T15:01:54.443Z [DEBUG] commands: Command: getTickets. From: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:01:54.444Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:01:54.446Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:01:54.448Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:01:54.450Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:01:54.455Z [DEBUG] messages: Send data: getTickets. To: 0bZOCdDrk0eDt7P-AAAD
2018-10-15T15:02:01.008Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:01.011Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T15:02:01.013Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T15:02:01.015Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:01.156Z [DEBUG] io: Client connected:  C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.249Z [DEBUG] commands: Command: getTickets. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.250Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:02:01.252Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:02:01.253Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:01.257Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:01.262Z [DEBUG] messages: Send data: getTickets. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.301Z [DEBUG] commands: Command: getTicket. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.301Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-15T15:02:01.304Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-15T15:02:01.304Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 3;
2018-10-15T15:02:01.308Z [DEBUG] messages: Send data: getTicket. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.365Z [DEBUG] commands: Command: getLoadTypes. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.366Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:01.367Z [DEBUG] commands: Command: getOrganizations. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.368Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:02:01.369Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:01.370Z [DEBUG] messages: Send data: getLoadTypes. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.372Z [DEBUG] commands: Command: getOrganization. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.373Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-15T15:02:01.374Z [DEBUG] commands: Command: getOrganization. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.375Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-15T15:02:01.377Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-15T15:02:01.378Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-15T15:02:01.380Z [DEBUG] messages: Send data: getOrganization. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.382Z [DEBUG] commands: Command: getPoint. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.383Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-15T15:02:01.385Z [DEBUG] commands: Command: getPoint. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.386Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-15T15:02:01.387Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-15T15:02:01.387Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-15T15:02:01.407Z [DEBUG] messages: Send data: getPoint. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.409Z [DEBUG] commands: Command: getPerson. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.410Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-15T15:02:01.411Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:02:01.411Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:02:01.412Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-15T15:02:01.413Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-15T15:02:01.414Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-15T15:02:01.416Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-15T15:02:01.417Z [DEBUG] commands: Command: getTicketHistory. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.418Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-15T15:02:01.419Z [DEBUG] messages: Send data: getOrganizations. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.420Z [DEBUG] messages: Send data: getOrganization. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.421Z [DEBUG] messages: Send data: getPerson. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.435Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-15T15:02:01.436Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-15T15:02:01.439Z [DEBUG] messages: Send data: getPoint. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:01.446Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-15T15:02:01.447Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 3;
2018-10-15T15:02:01.463Z [DEBUG] messages: Send data: getTicketHistory. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:12.708Z [DEBUG] commands: Command: rejectTicket. From: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:12.709Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'rejectTicket'                 AND users.login = 'admin';
2018-10-15T15:02:12.732Z [DEBUG] commands: Granted command  rejectTicket  for user admin
2018-10-15T15:02:12.733Z [DEBUG] db: DB query: SELECT COUNT(*)        FROM users u          INNER JOIN users_groups ug ON u.user_id = ug.user_id          INNER JOIN groups_permissions gp ON ug.group_id = gp.group_id          INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1 AND p.name = 'rejectAllTickets';
2018-10-15T15:02:12.735Z [DEBUG] db: Отклонение заявки на основе права отклонения всех заявок
2018-10-15T15:02:12.735Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 6 WHERE ticket_id = 3;
2018-10-15T15:02:12.739Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-15T15:02:12.741Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (3, 1, 100, 'Отклонение заявки. Причина отклонения: фигня какая-то');
2018-10-15T15:02:12.748Z [DEBUG] messages: Send info message: Заявка отклонена успешно. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:12.749Z [DEBUG] messages: Send data: rejectTicket. To: C1Y2uUgEhKBH8wd2AAAE
2018-10-15T15:02:12.750Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-15T15:02:16.404Z [DEBUG] io: Client connected:  sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.491Z [DEBUG] commands: Command: getTickets. From: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.491Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:02:16.494Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:02:16.494Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:16.496Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:16.503Z [DEBUG] messages: Send data: getTickets. To: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.526Z [DEBUG] commands: Command: getLoadTypes. From: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.529Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:16.531Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:16.532Z [DEBUG] messages: Send data: getLoadTypes. To: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.684Z [DEBUG] commands: Command: getOrganizations. From: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:16.685Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:02:16.687Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:02:16.688Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:02:16.689Z [DEBUG] messages: Send data: getOrganizations. To: sM5RFIsiFMjOwOpiAAAF
2018-10-15T15:02:20.021Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:20.024Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-15T15:02:20.026Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-15T15:02:20.028Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:20.190Z [DEBUG] io: Client connected:  lDA7NTxH1y4TVeGWAAAG
2018-10-15T15:02:20.273Z [DEBUG] commands: Command: getAchiveTickets. From: lDA7NTxH1y4TVeGWAAAG
2018-10-15T15:02:20.273Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-15T15:02:20.276Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-15T15:02:20.277Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:20.281Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:20.285Z [DEBUG] messages: Send data: getAchiveTickets. To: lDA7NTxH1y4TVeGWAAAG
2018-10-15T15:02:20.292Z [DEBUG] commands: Command: getLoadTypes. From: lDA7NTxH1y4TVeGWAAAG
2018-10-15T15:02:20.292Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:20.295Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:20.296Z [DEBUG] messages: Send data: getLoadTypes. To: lDA7NTxH1y4TVeGWAAAG
2018-10-15T15:02:21.876Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:21.879Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T15:02:21.880Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T15:02:21.881Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:22.000Z [DEBUG] io: Client connected:  XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.072Z [DEBUG] commands: Command: getTickets. From: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.073Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:02:22.075Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:02:22.076Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:22.078Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:22.082Z [DEBUG] messages: Send data: getTickets. To: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.102Z [DEBUG] commands: Command: getLoadTypes. From: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.102Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:22.105Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:22.106Z [DEBUG] messages: Send data: getLoadTypes. To: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.175Z [DEBUG] commands: Command: getOrganizations. From: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.176Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:02:22.178Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:02:22.179Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:02:22.181Z [DEBUG] messages: Send data: getOrganizations. To: XG8mCKlGSBsFIyswAAAH
2018-10-15T15:02:22.653Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:22.656Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/templates';
2018-10-15T15:02:22.658Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/templates' AND users.user_id=1;
2018-10-15T15:02:22.660Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:22.783Z [DEBUG] io: Client connected:  gLy-UwDpEAhfTu8JAAAI
2018-10-15T15:02:23.428Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:23.431Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T15:02:23.432Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T15:02:23.434Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:23.556Z [DEBUG] io: Client connected:  l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.649Z [DEBUG] commands: Command: getTickets. From: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.650Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:02:23.653Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:02:23.654Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:23.656Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:23.663Z [DEBUG] messages: Send data: getTickets. To: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.672Z [DEBUG] commands: Command: getLoadTypes. From: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.672Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:23.675Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:23.676Z [DEBUG] messages: Send data: getLoadTypes. To: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.734Z [DEBUG] commands: Command: getOrganizations. From: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.735Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:02:23.737Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:02:23.738Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:02:23.739Z [DEBUG] messages: Send data: getOrganizations. To: l8fbELyhDlvE7bFpAAAJ
2018-10-15T15:02:23.817Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:23.819Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-15T15:02:23.821Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-15T15:02:23.823Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:23.945Z [DEBUG] io: Client connected:  4rIgWxWDaaAqT1SdAAAK
2018-10-15T15:02:24.015Z [DEBUG] commands: Command: getAchiveTickets. From: 4rIgWxWDaaAqT1SdAAAK
2018-10-15T15:02:24.016Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-15T15:02:24.018Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-15T15:02:24.019Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:24.022Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:24.026Z [DEBUG] messages: Send data: getAchiveTickets. To: 4rIgWxWDaaAqT1SdAAAK
2018-10-15T15:02:24.034Z [DEBUG] commands: Command: getLoadTypes. From: 4rIgWxWDaaAqT1SdAAAK
2018-10-15T15:02:24.035Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:24.037Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:24.038Z [DEBUG] messages: Send data: getLoadTypes. To: 4rIgWxWDaaAqT1SdAAAK
2018-10-15T15:02:25.221Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:25.223Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-15T15:02:25.224Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-15T15:02:25.226Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:25.341Z [DEBUG] io: Client connected:  QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.411Z [DEBUG] commands: Command: getTickets. From: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.412Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-15T15:02:25.415Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-15T15:02:25.415Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:25.418Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-15T15:02:25.422Z [DEBUG] messages: Send data: getTickets. To: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.439Z [DEBUG] commands: Command: getLoadTypes. From: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.440Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-15T15:02:25.443Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-15T15:02:25.443Z [DEBUG] messages: Send data: getLoadTypes. To: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.512Z [DEBUG] commands: Command: getOrganizations. From: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:25.513Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-15T15:02:25.515Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-15T15:02:25.516Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-15T15:02:25.518Z [DEBUG] messages: Send data: getOrganizations. To: QbQmOQGrse9Im0HcAAAL
2018-10-15T15:02:26.996Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:02:26.998Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T15:02:27.000Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T15:02:27.002Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:02:27.146Z [DEBUG] io: Client connected:  DbTstIUXmWfBgzQ_AAAM
2018-10-15T15:02:38.181Z [DEBUG] commands: Command: getReport_periodReport. From: DbTstIUXmWfBgzQ_AAAM
2018-10-15T15:02:38.181Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:02:38.207Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:02:38.212Z [DEBUG] db: DB query: WHERE
2018-10-15T15:02:38.214Z [ERROR] db: Qery error: { error: syntax error at or near "WHERE"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 93,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '1',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-15T15:02:38.215Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: DbTstIUXmWfBgzQ_AAAM
2018-10-15T15:02:42.790Z [DEBUG] commands: Command: getReport_periodReport. From: DbTstIUXmWfBgzQ_AAAM
2018-10-15T15:02:42.790Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:02:42.813Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:02:42.814Z [DEBUG] db: DB query: WHERE
2018-10-15T15:02:42.816Z [ERROR] db: Qery error: { error: syntax error at or near "WHERE"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 93,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '1',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-15T15:02:42.816Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: DbTstIUXmWfBgzQ_AAAM
2018-10-15T15:04:38.596Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T15:04:38.622Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T15:04:38.623Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T15:04:38.624Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T15:04:38.855Z [DEBUG] io: Client connected:  Ozba84xqvGEVRMvmAAAA
2018-10-15T15:04:38.857Z [DEBUG] messages: Send command: logout. To: Ozba84xqvGEVRMvmAAAA
2018-10-15T15:04:38.867Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T15:04:39.101Z [DEBUG] io: Client connected:  MsQy3tyCTe8B901XAAAB
2018-10-15T15:04:49.552Z [DEBUG] commands: Command: logon. From: MsQy3tyCTe8B901XAAAB
2018-10-15T15:04:49.553Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T15:04:49.574Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T15:04:49.577Z [DEBUG] commands: Logon granted for: admin. From: MsQy3tyCTe8B901XAAAB
2018-10-15T15:04:49.580Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T15:04:49.581Z [INFO]  users: User admin was added
2018-10-15T15:04:49.582Z [DEBUG] messages: Send command: logon. To: MsQy3tyCTe8B901XAAAB
2018-10-15T15:04:49.628Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:04:49.631Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T15:04:49.633Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T15:04:49.636Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:04:49.876Z [DEBUG] io: Client connected:  CNoCNARihKfS0ezzAAAC
2018-10-15T15:04:51.141Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:04:51.144Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T15:04:51.146Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T15:04:51.148Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:04:51.274Z [DEBUG] io: Client connected:  rhYnJKCXde2viIspAAAD
2018-10-15T15:04:58.982Z [DEBUG] commands: Command: getReport_periodReport. From: rhYnJKCXde2viIspAAAD
2018-10-15T15:04:58.983Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:04:58.986Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:05:12.783Z [DEBUG] db: DB query: WHERE
2018-10-15T15:05:12.787Z [ERROR] db: Qery error: { error: syntax error at or near "WHERE"
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 93,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '1',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-15T15:05:12.787Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: rhYnJKCXde2viIspAAAD
2018-10-15T15:06:37.437Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-15T15:06:37.443Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-15T15:06:37.445Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-15T15:06:37.446Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-15T15:06:37.610Z [DEBUG] io: Client connected:  MnISs9TwtzlL7JGIAAAA
2018-10-15T15:06:37.615Z [DEBUG] messages: Send command: logout. To: MnISs9TwtzlL7JGIAAAA
2018-10-15T15:06:37.646Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-15T15:06:37.891Z [DEBUG] io: Client connected:  P8g9gD1zcKJPU4WIAAAB
2018-10-15T15:06:45.088Z [DEBUG] commands: Command: logon. From: P8g9gD1zcKJPU4WIAAAB
2018-10-15T15:06:45.089Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-15T15:06:45.091Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-15T15:06:45.092Z [DEBUG] commands: Logon granted for: admin. From: P8g9gD1zcKJPU4WIAAAB
2018-10-15T15:06:45.093Z [DEBUG] users: Add user: admin, SessionID: fqaZYUqePx56Bl9JjyXFDyI6SSZEpp_w
2018-10-15T15:06:45.094Z [INFO]  users: User admin was added
2018-10-15T15:06:45.094Z [DEBUG] messages: Send command: logon. To: P8g9gD1zcKJPU4WIAAAB
2018-10-15T15:06:45.106Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:06:45.108Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-15T15:06:45.110Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-15T15:06:45.111Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:06:45.249Z [DEBUG] io: Client connected:  9q_YSkaogvC4kEBZAAAC
2018-10-15T15:06:47.861Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-15T15:06:47.864Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-15T15:06:47.865Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-15T15:06:47.867Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-15T15:06:47.991Z [DEBUG] io: Client connected:  mzF5JrbowoMMMTAsAAAD
2018-10-15T15:06:53.126Z [DEBUG] commands: Command: getReport_periodReport. From: mzF5JrbowoMMMTAsAAAD
2018-10-15T15:06:53.127Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:06:53.130Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:07:26.890Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:07:26.899Z [DEBUG] messages: Send data: getReport_dayReport. To: mzF5JrbowoMMMTAsAAAD
2018-10-15T15:07:26.905Z [DEBUG] io: Client connected:  eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:36.534Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:36.534Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:07:36.537Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:07:36.537Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:07:36.541Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:48.470Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:48.471Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:07:48.493Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:07:48.494Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:07:48.504Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:53.790Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:07:53.791Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:07:53.793Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:07:53.794Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:07:53.798Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:09.342Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:09.343Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:08:09.367Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:08:09.369Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:08:09.374Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:11.638Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:11.639Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:08:11.641Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:08:11.642Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:08:11.647Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:30.359Z [DEBUG] commands: Command: getReport_periodReport. From: eUs8DmxCpeIDyiFmAAAE
2018-10-15T15:08:30.359Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-15T15:08:30.382Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-15T15:08:30.383Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-28 23:59:59 +3:00'
2018-10-15T15:08:30.406Z [DEBUG] messages: Send data: getReport_dayReport. To: eUs8DmxCpeIDyiFmAAAE
2018-10-16T13:09:03.744Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T13:09:03.748Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T13:09:03.749Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T13:09:03.749Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T13:09:04.811Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T13:09:22.270Z [DEBUG] io: Client connected:  6NKLXStE-lkPyNm4AAAA
2018-10-16T13:09:29.973Z [DEBUG] commands: Command: logon. From: 6NKLXStE-lkPyNm4AAAA
2018-10-16T13:09:29.973Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T13:09:30.014Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T13:09:30.026Z [DEBUG] commands: Logon granted for: admin. From: 6NKLXStE-lkPyNm4AAAA
2018-10-16T13:09:30.026Z [DEBUG] users: Add user: admin, SessionID: M0G3tCqyXuKcBCVkdiv7SE3LmT-q-pFf
2018-10-16T13:09:30.026Z [INFO]  users: User admin was added
2018-10-16T13:09:30.027Z [DEBUG] messages: Send command: logon. To: 6NKLXStE-lkPyNm4AAAA
2018-10-16T13:09:30.036Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:09:30.053Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:09:30.054Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:09:30.055Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:09:30.163Z [DEBUG] io: Client connected:  pP37r5FnBSvtsmhiAAAB
2018-10-16T13:09:33.138Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:09:33.140Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:09:33.140Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:09:33.141Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:09:33.149Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:09:33.150Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:09:33.151Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:09:33.152Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:09:33.304Z [DEBUG] io: Client connected:  4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.373Z [DEBUG] commands: Command: getTickets. From: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.373Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:09:33.424Z [DEBUG] commands: Command: getLoadTypes. From: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.424Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:09:33.453Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:09:33.453Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:09:33.454Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:09:33.463Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:09:33.463Z [DEBUG] messages: Send data: getLoadTypes. To: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.491Z [DEBUG] commands: Command: getOrganizations. From: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.491Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:09:33.492Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:09:33.492Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:09:33.493Z [DEBUG] messages: Send data: getOrganizations. To: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:09:33.505Z [DEBUG] messages: Send data: getTickets. To: 4QWkcMhwRmwUHVKXAAAC
2018-10-16T13:10:24.458Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:24.488Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:10:24.490Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:10:24.491Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:24.643Z [DEBUG] io: Client connected:  YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.744Z [DEBUG] commands: Command: getTickets. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.745Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:10:24.747Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:10:24.747Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:24.748Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:10:24.753Z [DEBUG] messages: Send data: getTickets. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.778Z [DEBUG] commands: Command: getTicket. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.778Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:10:24.779Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:10:24.780Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-16T13:10:24.783Z [DEBUG] messages: Send data: getTicket. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.795Z [DEBUG] commands: Command: getLoadTypes. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.795Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:10:24.797Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:10:24.797Z [DEBUG] messages: Send data: getLoadTypes. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.856Z [DEBUG] commands: Command: getOrganizations. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.856Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:10:24.857Z [DEBUG] commands: Command: getOrganization. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.857Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:10:24.857Z [DEBUG] commands: Command: getOrganization. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.857Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:10:24.858Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:10:24.858Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:10:24.859Z [DEBUG] messages: Send data: getOrganizations. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.859Z [DEBUG] commands: Command: getPoint. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.859Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:10:24.860Z [DEBUG] commands: Command: getPoint. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.860Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:10:24.861Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:10:24.861Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:10:24.862Z [DEBUG] messages: Send data: getPoint. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.862Z [DEBUG] commands: Command: getPerson. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.862Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:10:24.863Z [DEBUG] commands: Command: getTicketHistory. From: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.863Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:10:24.864Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:10:24.864Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:10:24.866Z [DEBUG] messages: Send data: getPerson. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.891Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:10:24.891Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:10:24.892Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:10:24.892Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:10:24.892Z [DEBUG] messages: Send data: getOrganization. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.893Z [DEBUG] messages: Send data: getOrganization. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.908Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:10:24.908Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:10:24.910Z [DEBUG] messages: Send data: getPoint. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:24.911Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:10:24.912Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-16T13:10:24.927Z [DEBUG] messages: Send data: getTicketHistory. To: YHJ_5pIEVZKwbfE1AAAD
2018-10-16T13:10:28.873Z [DEBUG] io: Client connected:  4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:28.936Z [DEBUG] commands: Command: getTickets. From: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:28.936Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:10:28.938Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:10:28.938Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:28.940Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:10:28.947Z [DEBUG] messages: Send data: getTickets. To: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:28.950Z [DEBUG] commands: Command: getLoadTypes. From: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:28.950Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:10:28.951Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:10:28.952Z [DEBUG] messages: Send data: getLoadTypes. To: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:29.016Z [DEBUG] commands: Command: getOrganizations. From: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:29.016Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:10:29.018Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:10:29.018Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:10:29.018Z [DEBUG] messages: Send data: getOrganizations. To: 4LkFMWAEye1BQ2FnAAAE
2018-10-16T13:10:29.848Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:29.849Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:10:29.850Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:10:29.851Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:29.949Z [DEBUG] io: Client connected:  eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.024Z [DEBUG] commands: Command: getTickets. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.024Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:10:30.026Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:10:30.026Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:30.027Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:10:30.033Z [DEBUG] messages: Send data: getTickets. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.098Z [DEBUG] commands: Command: getTicket. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.098Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:10:30.099Z [DEBUG] commands: Command: getLoadTypes. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.099Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:10:30.099Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:10:30.099Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-16T13:10:30.101Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:10:30.101Z [DEBUG] messages: Send data: getLoadTypes. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.101Z [DEBUG] commands: Command: getOrganizations. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.101Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:10:30.102Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:10:30.103Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:10:30.103Z [DEBUG] messages: Send data: getTicket. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.104Z [DEBUG] messages: Send data: getOrganizations. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.111Z [DEBUG] commands: Command: getOrganization. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.112Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:10:30.113Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:10:30.113Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:10:30.114Z [DEBUG] messages: Send data: getOrganization. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.139Z [DEBUG] commands: Command: getOrganization. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.139Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:10:30.140Z [DEBUG] commands: Command: getPoint. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.140Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:10:30.140Z [DEBUG] commands: Command: getPoint. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.140Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:10:30.141Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:10:30.141Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:10:30.141Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:10:30.141Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:10:30.141Z [DEBUG] messages: Send data: getOrganization. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.142Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:10:30.142Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:10:30.142Z [DEBUG] messages: Send data: getPoint. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.142Z [DEBUG] commands: Command: getPerson. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.144Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:10:30.144Z [DEBUG] messages: Send data: getPoint. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.145Z [DEBUG] commands: Command: getTicketHistory. From: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.145Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:10:30.145Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:10:30.145Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:10:30.146Z [DEBUG] messages: Send data: getPerson. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:30.147Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:10:30.147Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-16T13:10:30.147Z [DEBUG] messages: Send data: getTicketHistory. To: eDdKXxwoJD_5O68gAAAF
2018-10-16T13:10:31.397Z [DEBUG] io: Client connected:  wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.453Z [DEBUG] commands: Command: getTickets. From: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.453Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:10:31.455Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:10:31.455Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:31.456Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:10:31.461Z [DEBUG] messages: Send data: getTickets. To: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.466Z [DEBUG] commands: Command: getLoadTypes. From: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.466Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:10:31.468Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:10:31.468Z [DEBUG] messages: Send data: getLoadTypes. To: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.527Z [DEBUG] commands: Command: getOrganizations. From: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:31.527Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:10:31.528Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:10:31.528Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:10:31.529Z [DEBUG] messages: Send data: getOrganizations. To: wg43wi4X6sjcTuyTAAAG
2018-10-16T13:10:34.658Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:34.659Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-16T13:10:34.660Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-16T13:10:34.661Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:34.770Z [DEBUG] io: Client connected:  UTKul4dXnfG26CpfAAAH
2018-10-16T13:10:34.831Z [DEBUG] commands: Command: getAchiveTickets. From: UTKul4dXnfG26CpfAAAH
2018-10-16T13:10:34.831Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-16T13:10:34.833Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-16T13:10:34.833Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:34.834Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:10:34.853Z [DEBUG] commands: Command: getLoadTypes. From: UTKul4dXnfG26CpfAAAH
2018-10-16T13:10:34.853Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:10:34.855Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:10:34.855Z [DEBUG] messages: Send data: getLoadTypes. To: UTKul4dXnfG26CpfAAAH
2018-10-16T13:10:34.856Z [DEBUG] messages: Send data: getAchiveTickets. To: UTKul4dXnfG26CpfAAAH
2018-10-16T13:10:38.015Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:38.018Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/templates';
2018-10-16T13:10:38.018Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/templates' AND users.user_id=1;
2018-10-16T13:10:38.019Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:38.119Z [DEBUG] io: Client connected:  WCHR_6YYBE5gvZAhAAAI
2018-10-16T13:10:41.552Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:41.554Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-16T13:10:41.554Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-16T13:10:41.555Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:41.562Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:41.563Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-16T13:10:41.563Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-16T13:10:41.564Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:41.662Z [DEBUG] io: Client connected:  eziA7CK7A5Iey5qKAAAJ
2018-10-16T13:10:42.471Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:42.473Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:10:42.473Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:10:42.476Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:42.571Z [DEBUG] io: Client connected:  BeooLu3EV8jK7ITDAAAK
2018-10-16T13:10:43.881Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:43.882Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-16T13:10:43.882Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-16T13:10:43.883Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:44.003Z [DEBUG] io: Client connected:  pmnmY9f6I8m_kEYZAAAL
2018-10-16T13:10:44.809Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:44.810Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-16T13:10:44.811Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-16T13:10:44.812Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:44.818Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:44.818Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-16T13:10:44.819Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-16T13:10:44.819Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:44.918Z [DEBUG] io: Client connected:  xRLEqWCSwoevn-dQAAAM
2018-10-16T13:10:45.904Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:45.905Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog';
2018-10-16T13:10:45.906Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog' AND users.user_id=1;
2018-10-16T13:10:45.907Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:45.913Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:45.914Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-16T13:10:45.914Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-16T13:10:45.915Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:46.083Z [DEBUG] io: Client connected:  fBE1RYqpiK35oeSeAAAN
2018-10-16T13:10:46.149Z [DEBUG] commands: Command: getPersons. From: fBE1RYqpiK35oeSeAAAN
2018-10-16T13:10:46.149Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-16T13:10:46.150Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-16T13:10:46.151Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-16T13:10:46.151Z [DEBUG] messages: Send data: getPersons. To: fBE1RYqpiK35oeSeAAAN
2018-10-16T13:10:46.759Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:46.760Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin';
2018-10-16T13:10:46.761Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin' AND users.user_id=1;
2018-10-16T13:10:46.761Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:46.767Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:10:46.768Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/admin/panel';
2018-10-16T13:10:46.768Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/admin/panel' AND users.user_id=1;
2018-10-16T13:10:46.769Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:10:46.860Z [DEBUG] io: Client connected:  SPGhtaOlwdbWOwRzAAAO
2018-10-16T13:11:03.202Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:03.224Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:11:03.225Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:11:03.226Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:03.232Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:03.233Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:03.233Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:03.234Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:03.326Z [DEBUG] io: Client connected:  Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.396Z [DEBUG] commands: Command: getTickets. From: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.396Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:03.398Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:03.398Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:03.399Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:03.403Z [DEBUG] messages: Send data: getTickets. To: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.414Z [DEBUG] commands: Command: getLoadTypes. From: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.414Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:03.416Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:03.416Z [DEBUG] messages: Send data: getLoadTypes. To: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.479Z [DEBUG] commands: Command: getOrganizations. From: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:03.479Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:03.481Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:03.481Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:03.482Z [DEBUG] messages: Send data: getOrganizations. To: Qyhg7mmMa9G2O6XAAAAP
2018-10-16T13:11:06.065Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:06.066Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:06.067Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:06.067Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:06.169Z [DEBUG] io: Client connected:  brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.228Z [DEBUG] commands: Command: getTickets. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.228Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:06.229Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:06.229Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:06.230Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:06.236Z [DEBUG] messages: Send data: getTickets. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.242Z [DEBUG] commands: Command: getTicket. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.242Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:06.244Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:06.244Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:06.247Z [DEBUG] messages: Send data: getTicket. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.312Z [DEBUG] commands: Command: getLoadTypes. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.312Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:06.312Z [DEBUG] commands: Command: getOrganizations. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.312Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:06.312Z [DEBUG] commands: Command: getOrganization. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.313Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:06.313Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:06.313Z [DEBUG] messages: Send data: getLoadTypes. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.314Z [DEBUG] commands: Command: getOrganization. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.314Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:06.314Z [DEBUG] commands: Command: getPoint. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.315Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:06.317Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:06.317Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:06.317Z [DEBUG] commands: Command: getPoint. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.317Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:06.318Z [DEBUG] messages: Send data: getOrganization. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.319Z [DEBUG] commands: Command: getPerson. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.319Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:06.319Z [DEBUG] commands: Command: getPerson. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.319Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:06.320Z [DEBUG] commands: Command: getTicketHistory. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.320Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:06.320Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:06.320Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:06.321Z [DEBUG] messages: Send data: getPerson. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.344Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:06.377Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:06.377Z [DEBUG] messages: Send data: getOrganizations. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.380Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:06.381Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:06.381Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:06.381Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:06.381Z [DEBUG] messages: Send data: getOrganization. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.382Z [DEBUG] messages: Send data: getPoint. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.384Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:06.384Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:06.384Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:06.384Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:06.385Z [DEBUG] messages: Send data: getTicketHistory. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.386Z [DEBUG] messages: Send data: getPoint. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:06.386Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:06.386Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:06.387Z [DEBUG] messages: Send data: getPerson. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:07.748Z [DEBUG] commands: Command: planTicket. From: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:07.748Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'planTicket'                 AND users.login = 'admin';
2018-10-16T13:11:07.750Z [DEBUG] commands: Granted command  planTicket  for user admin
2018-10-16T13:11:07.750Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:07.751Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 3, logist_person_id = 1 WHERE ticket_id = 2;
2018-10-16T13:11:07.766Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (2, 1, 10, 'Заявка переведена в статус "Запланирована": Администратор');
2018-10-16T13:11:07.796Z [DEBUG] messages: Send info message: Заявка запланирована. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:07.797Z [DEBUG] messages: Send data: planTicket. To: brRSV5gPJ8zi7ZgBAAAQ
2018-10-16T13:11:07.797Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-16T13:11:07.845Z [DEBUG] io: Client connected:  S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.903Z [DEBUG] commands: Command: getTickets. From: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.903Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:07.905Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:07.905Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:07.906Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:07.910Z [DEBUG] messages: Send data: getTickets. To: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.914Z [DEBUG] commands: Command: getLoadTypes. From: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.914Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:07.916Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:07.916Z [DEBUG] messages: Send data: getLoadTypes. To: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.971Z [DEBUG] commands: Command: getOrganizations. From: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:07.971Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:07.972Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:07.973Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:07.973Z [DEBUG] messages: Send data: getOrganizations. To: S07ndiNnYpzKUVQ3AAAR
2018-10-16T13:11:09.129Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:09.130Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:09.131Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:09.132Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:09.229Z [DEBUG] io: Client connected:  sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.291Z [DEBUG] commands: Command: getTickets. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.291Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:09.293Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:09.293Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:09.295Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:09.298Z [DEBUG] messages: Send data: getTickets. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.307Z [DEBUG] commands: Command: getTicket. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.307Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:09.309Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:09.309Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:09.311Z [DEBUG] messages: Send data: getTicket. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.369Z [DEBUG] commands: Command: getLoadTypes. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.369Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:09.369Z [DEBUG] commands: Command: getOrganizations. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.369Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:09.370Z [DEBUG] commands: Command: getOrganization. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.370Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:09.370Z [DEBUG] commands: Command: getOrganization. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.370Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:09.370Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:09.370Z [DEBUG] messages: Send data: getLoadTypes. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.371Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:09.371Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:09.371Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:09.371Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:09.371Z [DEBUG] messages: Send data: getOrganizations. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.371Z [DEBUG] commands: Command: getPoint. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.372Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:09.373Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:09.373Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:09.373Z [DEBUG] messages: Send data: getOrganization. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.373Z [DEBUG] messages: Send data: getOrganization. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.373Z [DEBUG] commands: Command: getPoint. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.373Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:09.374Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:09.374Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:09.374Z [DEBUG] commands: Command: getPerson. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.375Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:09.375Z [DEBUG] messages: Send data: getPoint. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.375Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:09.375Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:09.375Z [DEBUG] commands: Command: getPerson. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.375Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:09.376Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:09.376Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:09.376Z [DEBUG] messages: Send data: getPoint. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.377Z [DEBUG] commands: Command: getTicketHistory. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.377Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:09.377Z [DEBUG] messages: Send data: getPerson. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.377Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:09.377Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:09.378Z [DEBUG] messages: Send data: getPerson. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:09.378Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:09.378Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:09.379Z [DEBUG] messages: Send data: getTicketHistory. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:11.837Z [DEBUG] commands: Command: takeTicket. From: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:11.837Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'takeTicket'                 AND users.login = 'admin';
2018-10-16T13:11:11.839Z [DEBUG] commands: Granted command  takeTicket  for user admin
2018-10-16T13:11:11.839Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:11.840Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 2, logist_person_id = 1 WHERE ticket_id = 2;
2018-10-16T13:11:11.857Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (2, 1, 10, 'Заявка переведена в статус "В работе": Администратор');
2018-10-16T13:11:11.858Z [DEBUG] messages: Send info message: Заявка взята в рабту. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:11.858Z [DEBUG] messages: Send data: takeTicket. To: sdjF5JUlqVX8FnbdAAAS
2018-10-16T13:11:11.858Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-16T13:11:11.950Z [DEBUG] io: Client connected:  jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.007Z [DEBUG] commands: Command: getTickets. From: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.007Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:12.009Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:12.009Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:12.010Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:12.015Z [DEBUG] messages: Send data: getTickets. To: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.020Z [DEBUG] commands: Command: getLoadTypes. From: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.020Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:12.022Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:12.022Z [DEBUG] messages: Send data: getLoadTypes. To: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.074Z [DEBUG] commands: Command: getOrganizations. From: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.074Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:12.076Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:12.076Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:12.076Z [DEBUG] messages: Send data: getOrganizations. To: jG82-_n9fULAutkxAAAT
2018-10-16T13:11:12.602Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:12.602Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:12.603Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:12.604Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:12.695Z [DEBUG] io: Client connected:  aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.763Z [DEBUG] commands: Command: getTickets. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.763Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:12.765Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:12.765Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:12.766Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:12.771Z [DEBUG] messages: Send data: getTickets. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.777Z [DEBUG] commands: Command: getTicket. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.777Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:12.779Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:12.779Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:12.782Z [DEBUG] messages: Send data: getTicket. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.851Z [DEBUG] commands: Command: getLoadTypes. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.851Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:12.851Z [DEBUG] commands: Command: getOrganizations. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.851Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:12.852Z [DEBUG] commands: Command: getOrganization. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.852Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:12.852Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:12.852Z [DEBUG] messages: Send data: getLoadTypes. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.853Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:12.853Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:12.853Z [DEBUG] commands: Command: getOrganization. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.853Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:12.853Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:12.853Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:12.853Z [DEBUG] messages: Send data: getOrganizations. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.854Z [DEBUG] messages: Send data: getOrganization. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.854Z [DEBUG] commands: Command: getPoint. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.854Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:12.854Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:12.854Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:12.855Z [DEBUG] commands: Command: getPoint. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.855Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:12.855Z [DEBUG] messages: Send data: getOrganization. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.855Z [DEBUG] commands: Command: getPerson. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.855Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:12.856Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:12.856Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:12.856Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:12.856Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:12.857Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:12.857Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:12.859Z [DEBUG] messages: Send data: getPoint. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.859Z [DEBUG] messages: Send data: getPoint. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.859Z [DEBUG] messages: Send data: getPerson. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.859Z [DEBUG] commands: Command: getPerson. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.859Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:12.860Z [DEBUG] commands: Command: getTicketHistory. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.860Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:12.861Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:12.861Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:12.861Z [DEBUG] messages: Send data: getPerson. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:12.861Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:12.861Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:12.862Z [DEBUG] messages: Send data: getTicketHistory. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:13.884Z [DEBUG] commands: Command: planTicket. From: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:13.884Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'planTicket'                 AND users.login = 'admin';
2018-10-16T13:11:13.886Z [DEBUG] commands: Granted command  planTicket  for user admin
2018-10-16T13:11:13.886Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:13.887Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 3, logist_person_id = 1 WHERE ticket_id = 2;
2018-10-16T13:11:13.899Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (2, 1, 10, 'Заявка переведена в статус "Запланирована": Администратор');
2018-10-16T13:11:13.899Z [DEBUG] messages: Send info message: Заявка запланирована. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:13.899Z [DEBUG] messages: Send data: planTicket. To: aIMffcavcJLiBeEPAAAU
2018-10-16T13:11:13.899Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-16T13:11:13.976Z [DEBUG] io: Client connected:  ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.033Z [DEBUG] commands: Command: getTickets. From: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.033Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:14.035Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:14.035Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:14.036Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:14.039Z [DEBUG] messages: Send data: getTickets. To: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.046Z [DEBUG] commands: Command: getLoadTypes. From: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.047Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:14.048Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:14.048Z [DEBUG] messages: Send data: getLoadTypes. To: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.102Z [DEBUG] commands: Command: getOrganizations. From: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.102Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:14.104Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:14.104Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:14.104Z [DEBUG] messages: Send data: getOrganizations. To: ygrwT9TRQeSxtOPPAAAV
2018-10-16T13:11:14.730Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:14.731Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:14.732Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:14.733Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:14.829Z [DEBUG] io: Client connected:  XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.888Z [DEBUG] commands: Command: getTickets. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.888Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:14.890Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:14.890Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:14.891Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:14.894Z [DEBUG] messages: Send data: getTickets. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.903Z [DEBUG] commands: Command: getTicket. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.903Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:14.905Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:14.905Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:14.907Z [DEBUG] messages: Send data: getTicket. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.970Z [DEBUG] commands: Command: getLoadTypes. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.971Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:14.971Z [DEBUG] commands: Command: getOrganizations. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.971Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:14.971Z [DEBUG] commands: Command: getOrganization. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.971Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:14.972Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:14.973Z [DEBUG] messages: Send data: getLoadTypes. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.973Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:14.973Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:14.973Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:14.973Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:14.973Z [DEBUG] messages: Send data: getOrganizations. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.973Z [DEBUG] messages: Send data: getOrganization. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.974Z [DEBUG] commands: Command: getOrganization. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.974Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:14.974Z [DEBUG] commands: Command: getPoint. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.974Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:14.974Z [DEBUG] commands: Command: getPoint. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.974Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:14.976Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:14.976Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:14.976Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:14.976Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:14.976Z [DEBUG] messages: Send data: getOrganization. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.977Z [DEBUG] commands: Command: getPerson. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.977Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:14.977Z [DEBUG] messages: Send data: getPoint. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.977Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:14.977Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:14.978Z [DEBUG] commands: Command: getPerson. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.978Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:14.978Z [DEBUG] messages: Send data: getPoint. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.978Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:14.978Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:14.979Z [DEBUG] commands: Command: getTicketHistory. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.979Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:14.979Z [DEBUG] messages: Send data: getPerson. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.979Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:14.979Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:14.979Z [DEBUG] messages: Send data: getPerson. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:14.980Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:14.980Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:14.980Z [DEBUG] messages: Send data: getTicketHistory. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:15.812Z [DEBUG] commands: Command: onWayTicket. From: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:15.812Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'onWayTicket'                 AND users.login = 'admin';
2018-10-16T13:11:15.814Z [DEBUG] commands: Granted command  onWayTicket  for user admin
2018-10-16T13:11:15.814Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:15.815Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 4, logist_person_id = 1 WHERE ticket_id = 2;
2018-10-16T13:11:15.816Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (2, 1, 10, 'Заявка переведена в статус "В пути": Администратор');
2018-10-16T13:11:15.817Z [DEBUG] messages: Send info message: Заявка переведена в статус "В пути". To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:15.817Z [DEBUG] messages: Send data: onWayTicket. To: XO0qRCkRD-NlpJfQAAAW
2018-10-16T13:11:15.817Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-16T13:11:15.934Z [DEBUG] io: Client connected:  ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:15.989Z [DEBUG] commands: Command: getTickets. From: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:15.990Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:15.991Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:15.992Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:15.992Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:15.995Z [DEBUG] messages: Send data: getTickets. To: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:16.002Z [DEBUG] commands: Command: getLoadTypes. From: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:16.003Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:16.004Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:16.004Z [DEBUG] messages: Send data: getLoadTypes. To: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:16.059Z [DEBUG] commands: Command: getOrganizations. From: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:16.059Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:16.061Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:16.061Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:16.061Z [DEBUG] messages: Send data: getOrganizations. To: ne-Mg-hy-RaGO2MMAAAX
2018-10-16T13:11:16.985Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:16.987Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:16.987Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:16.988Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:17.090Z [DEBUG] io: Client connected:  RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.148Z [DEBUG] commands: Command: getTickets. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.148Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:17.150Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:17.150Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:17.151Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:17.153Z [DEBUG] messages: Send data: getTickets. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.164Z [DEBUG] commands: Command: getTicket. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.164Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:17.166Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:17.166Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:17.168Z [DEBUG] messages: Send data: getTicket. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.229Z [DEBUG] commands: Command: getLoadTypes. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.229Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:17.229Z [DEBUG] commands: Command: getOrganizations. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.230Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:17.230Z [DEBUG] commands: Command: getOrganization. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.230Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:17.230Z [DEBUG] commands: Command: getOrganization. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.230Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:17.231Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:17.231Z [DEBUG] messages: Send data: getLoadTypes. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.231Z [DEBUG] commands: Command: getPoint. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.231Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:17.231Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:17.231Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:17.232Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:17.232Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:17.232Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:17.232Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:17.232Z [DEBUG] messages: Send data: getOrganizations. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.232Z [DEBUG] commands: Command: getPoint. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.232Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:17.232Z [DEBUG] messages: Send data: getOrganization. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.233Z [DEBUG] messages: Send data: getOrganization. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.233Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:17.233Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:17.233Z [DEBUG] commands: Command: getPerson. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.233Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:17.233Z [DEBUG] commands: Command: getPerson. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.233Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:17.234Z [DEBUG] messages: Send data: getPoint. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.234Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:17.234Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:17.234Z [DEBUG] commands: Command: getTicketHistory. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.234Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:17.235Z [DEBUG] messages: Send data: getPoint. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.235Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:17.235Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:17.235Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:17.235Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:17.235Z [DEBUG] messages: Send data: getPerson. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.235Z [DEBUG] messages: Send data: getPerson. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:17.236Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:17.236Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:17.236Z [DEBUG] messages: Send data: getTicketHistory. To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:40.901Z [DEBUG] commands: Command: closeTicket. From: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:40.901Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-16T13:11:40.935Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-16T13:11:40.936Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:40.939Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 100 WHERE ticket_id = 2;
2018-10-16T13:11:40.944Z [ERROR] db: Qery error: { error: column "closed_cost" of relation "tickets" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 133,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '57',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2339',
  routine: 'transformUpdateTargetList' }
2018-10-16T13:11:40.944Z [DEBUG] messages: Send error message: Ошибка. Невозможно перевести заявку в статус "Закрыта". To: RhYhPBIhCGzIscZRAAAY
2018-10-16T13:11:41.024Z [DEBUG] io: Client connected:  kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.084Z [DEBUG] commands: Command: getTickets. From: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.084Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:41.097Z [DEBUG] commands: Command: getLoadTypes. From: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.097Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:41.112Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:41.112Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:41.113Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:41.118Z [DEBUG] messages: Send data: getTickets. To: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.123Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:41.123Z [DEBUG] messages: Send data: getLoadTypes. To: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.169Z [DEBUG] commands: Command: getOrganizations. From: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:41.169Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:41.213Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:41.213Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:41.214Z [DEBUG] messages: Send data: getOrganizations. To: kNfea34m8QRWqlKYAAAZ
2018-10-16T13:11:43.441Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:43.442Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/templates';
2018-10-16T13:11:43.443Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/templates' AND users.user_id=1;
2018-10-16T13:11:43.444Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:43.546Z [DEBUG] io: Client connected:  3PkwVUxoEdKXeq2qAAAa
2018-10-16T13:11:44.066Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:44.067Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-16T13:11:44.068Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-16T13:11:44.068Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:44.196Z [DEBUG] io: Client connected:  Zjvce4-gS6z7uJw7AAAb
2018-10-16T13:11:44.254Z [DEBUG] commands: Command: getAchiveTickets. From: Zjvce4-gS6z7uJw7AAAb
2018-10-16T13:11:44.254Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-16T13:11:44.255Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-16T13:11:44.255Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:44.256Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:44.261Z [DEBUG] messages: Send data: getAchiveTickets. To: Zjvce4-gS6z7uJw7AAAb
2018-10-16T13:11:44.270Z [DEBUG] commands: Command: getLoadTypes. From: Zjvce4-gS6z7uJw7AAAb
2018-10-16T13:11:44.270Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:44.271Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:44.272Z [DEBUG] messages: Send data: getLoadTypes. To: Zjvce4-gS6z7uJw7AAAb
2018-10-16T13:11:45.651Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:45.652Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:45.653Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:45.654Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:45.756Z [DEBUG] io: Client connected:  RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.819Z [DEBUG] commands: Command: getTickets. From: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.819Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:45.820Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:45.820Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:45.821Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:45.826Z [DEBUG] messages: Send data: getTickets. To: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.834Z [DEBUG] commands: Command: getLoadTypes. From: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.834Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:45.835Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:45.835Z [DEBUG] messages: Send data: getLoadTypes. To: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.904Z [DEBUG] commands: Command: getOrganizations. From: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:45.904Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:45.906Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:45.906Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:45.906Z [DEBUG] messages: Send data: getOrganizations. To: RxsUBqHvC_eRXbUcAAAc
2018-10-16T13:11:47.794Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:47.795Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:47.795Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:47.796Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:47.894Z [DEBUG] io: Client connected:  UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:47.955Z [DEBUG] commands: Command: getTickets. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:47.955Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:47.956Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:47.957Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:47.957Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:47.963Z [DEBUG] messages: Send data: getTickets. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:47.968Z [DEBUG] commands: Command: getTicket. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:47.968Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:47.970Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:47.970Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:47.973Z [DEBUG] messages: Send data: getTicket. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.035Z [DEBUG] commands: Command: getLoadTypes. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.035Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:48.035Z [DEBUG] commands: Command: getOrganizations. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.035Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:48.036Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:48.037Z [DEBUG] messages: Send data: getLoadTypes. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.037Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:48.037Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:48.038Z [DEBUG] messages: Send data: getOrganizations. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.038Z [DEBUG] commands: Command: getOrganization. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.038Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:48.040Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:48.040Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:48.040Z [DEBUG] commands: Command: getOrganization. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.040Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:48.040Z [DEBUG] messages: Send data: getOrganization. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.042Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:48.044Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:48.045Z [DEBUG] messages: Send data: getOrganization. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.045Z [DEBUG] commands: Command: getPoint. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.045Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:48.046Z [DEBUG] commands: Command: getPoint. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.046Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:48.046Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:48.047Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:48.047Z [DEBUG] messages: Send data: getPoint. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.048Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:48.048Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:48.048Z [DEBUG] commands: Command: getPerson. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.048Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:48.049Z [DEBUG] messages: Send data: getPoint. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.049Z [DEBUG] commands: Command: getPerson. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.050Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:48.050Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:48.050Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:48.051Z [DEBUG] commands: Command: getTicketHistory. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.051Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:48.051Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:48.051Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:48.051Z [DEBUG] messages: Send data: getPerson. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.052Z [DEBUG] messages: Send data: getPerson. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:48.076Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:48.076Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:48.077Z [DEBUG] messages: Send data: getTicketHistory. To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:52.188Z [DEBUG] commands: Command: closeTicket. From: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:52.188Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-16T13:11:52.190Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-16T13:11:52.190Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:11:52.191Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 100 WHERE ticket_id = 2;
2018-10-16T13:11:52.193Z [ERROR] db: Qery error: { error: column "closed_cost" of relation "tickets" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 133,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '57',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2339',
  routine: 'transformUpdateTargetList' }
2018-10-16T13:11:52.193Z [DEBUG] messages: Send error message: Ошибка. Невозможно перевести заявку в статус "Закрыта". To: UvwOwj_ZjqCITVjCAAAd
2018-10-16T13:11:52.287Z [DEBUG] io: Client connected:  Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.344Z [DEBUG] commands: Command: getTickets. From: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.344Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:52.346Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:52.346Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:52.347Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:52.350Z [DEBUG] messages: Send data: getTickets. To: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.356Z [DEBUG] commands: Command: getLoadTypes. From: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.356Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:52.358Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:52.358Z [DEBUG] messages: Send data: getLoadTypes. To: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.414Z [DEBUG] commands: Command: getOrganizations. From: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:52.414Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:52.415Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:52.415Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:52.416Z [DEBUG] messages: Send data: getOrganizations. To: Plaj5ccg9UWXVFRCAAAe
2018-10-16T13:11:54.650Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:54.651Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:11:54.652Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:11:54.653Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:11:54.751Z [DEBUG] io: Client connected:  5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.810Z [DEBUG] commands: Command: getTickets. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.810Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:11:54.812Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:11:54.812Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:11:54.813Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:11:54.816Z [DEBUG] messages: Send data: getTickets. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.826Z [DEBUG] commands: Command: getTicket. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.826Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:11:54.828Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:11:54.828Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:11:54.830Z [DEBUG] messages: Send data: getTicket. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.882Z [DEBUG] commands: Command: getLoadTypes. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.882Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:11:54.883Z [DEBUG] commands: Command: getOrganizations. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.883Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:11:54.883Z [DEBUG] commands: Command: getOrganization. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.883Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:54.884Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:11:54.884Z [DEBUG] messages: Send data: getLoadTypes. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.884Z [DEBUG] commands: Command: getOrganization. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.884Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:11:54.884Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:11:54.884Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:11:54.885Z [DEBUG] messages: Send data: getOrganizations. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.885Z [DEBUG] commands: Command: getPoint. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.885Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:54.886Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:54.886Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:11:54.886Z [DEBUG] messages: Send data: getOrganization. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.887Z [DEBUG] commands: Command: getPoint. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.887Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:11:54.887Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:54.887Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:11:54.888Z [DEBUG] messages: Send data: getPoint. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.888Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:11:54.888Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:11:54.889Z [DEBUG] messages: Send data: getPoint. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.890Z [DEBUG] commands: Command: getPerson. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:54.890Z [DEBUG] commands: Command: getPerson. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:11:54.892Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:54.892Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:54.893Z [DEBUG] messages: Send data: getPerson. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.893Z [DEBUG] commands: Command: getTicketHistory. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.893Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:11:54.893Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:11:54.893Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:11:54.894Z [DEBUG] messages: Send data: getPerson. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.894Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:11:54.894Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:11:54.895Z [DEBUG] messages: Send data: getTicketHistory. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:11:54.911Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:11:54.911Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:11:54.912Z [DEBUG] messages: Send data: getOrganization. To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:12:00.068Z [DEBUG] commands: Command: closeTicket. From: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:12:00.068Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-16T13:12:00.070Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-16T13:12:00.070Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:12:00.071Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = null WHERE ticket_id = 2;
2018-10-16T13:12:00.072Z [ERROR] db: Qery error: { error: column "closed_cost" of relation "tickets" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 133,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '57',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2339',
  routine: 'transformUpdateTargetList' }
2018-10-16T13:12:00.072Z [DEBUG] messages: Send error message: Ошибка. Невозможно перевести заявку в статус "Закрыта". To: 5ooInxemVCnT1sn-AAAf
2018-10-16T13:12:00.163Z [DEBUG] io: Client connected:  R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.217Z [DEBUG] commands: Command: getTickets. From: R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.217Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:12:00.219Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:12:00.219Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:00.219Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:12:00.224Z [DEBUG] messages: Send data: getTickets. To: R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.229Z [DEBUG] commands: Command: getLoadTypes. From: R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.229Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:12:00.230Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:12:00.230Z [DEBUG] messages: Send data: getLoadTypes. To: R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.281Z [DEBUG] commands: Command: getOrganizations. From: R-V1810pikoBoel6AAAg
2018-10-16T13:12:00.282Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:12:00.283Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:12:00.283Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:12:00.283Z [DEBUG] messages: Send data: getOrganizations. To: R-V1810pikoBoel6AAAg
2018-10-16T13:12:01.602Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:01.603Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:12:01.604Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:12:01.605Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:12:01.701Z [DEBUG] io: Client connected:  VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.765Z [DEBUG] commands: Command: getTickets. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.765Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:12:01.767Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:12:01.767Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:01.768Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:12:01.770Z [DEBUG] messages: Send data: getTickets. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.782Z [DEBUG] commands: Command: getTicket. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.782Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-16T13:12:01.783Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-16T13:12:01.784Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-16T13:12:01.786Z [DEBUG] messages: Send data: getTicket. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.862Z [DEBUG] commands: Command: getLoadTypes. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.862Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:12:01.863Z [DEBUG] commands: Command: getOrganizations. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.863Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:12:01.864Z [DEBUG] commands: Command: getOrganization. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.864Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:12:01.864Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:12:01.864Z [DEBUG] messages: Send data: getLoadTypes. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.864Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:12:01.864Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:12:01.865Z [DEBUG] commands: Command: getOrganization. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.865Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-16T13:12:01.865Z [DEBUG] messages: Send data: getOrganizations. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.866Z [DEBUG] commands: Command: getPoint. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.866Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:12:01.867Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:12:01.867Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-16T13:12:01.867Z [DEBUG] commands: Command: getPoint. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.867Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-16T13:12:01.867Z [DEBUG] messages: Send data: getOrganization. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.868Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:12:01.868Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-16T13:12:01.868Z [DEBUG] messages: Send data: getPoint. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.869Z [DEBUG] commands: Command: getPerson. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.869Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:12:01.869Z [DEBUG] commands: Command: getPerson. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.869Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-16T13:12:01.870Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:12:01.870Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:12:01.870Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-16T13:12:01.870Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-16T13:12:01.870Z [DEBUG] messages: Send data: getPerson. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.871Z [DEBUG] messages: Send data: getPerson. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.871Z [DEBUG] commands: Command: getTicketHistory. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.871Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-16T13:12:01.873Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-16T13:12:01.873Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-16T13:12:01.874Z [DEBUG] messages: Send data: getTicketHistory. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.898Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-16T13:12:01.898Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-16T13:12:01.898Z [DEBUG] messages: Send data: getOrganization. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:01.905Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-16T13:12:01.905Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-16T13:12:01.906Z [DEBUG] messages: Send data: getPoint. To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:04.740Z [DEBUG] commands: Command: closeTicket. From: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:04.740Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-16T13:12:04.742Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-16T13:12:04.742Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-16T13:12:04.743Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 12 WHERE ticket_id = 2;
2018-10-16T13:12:04.745Z [ERROR] db: Qery error: { error: column "closed_cost" of relation "tickets" does not exist
    at Connection.parseE (D:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (D:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (D:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 133,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '57',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2339',
  routine: 'transformUpdateTargetList' }
2018-10-16T13:12:04.745Z [DEBUG] messages: Send error message: Ошибка. Невозможно перевести заявку в статус "Закрыта". To: VUm5IlmN0Vy1_Y2lAAAh
2018-10-16T13:12:04.835Z [DEBUG] io: Client connected:  nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.900Z [DEBUG] commands: Command: getTickets. From: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.900Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:12:04.902Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:12:04.902Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:04.902Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:12:04.907Z [DEBUG] messages: Send data: getTickets. To: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.911Z [DEBUG] commands: Command: getLoadTypes. From: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.911Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:12:04.913Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:12:04.913Z [DEBUG] messages: Send data: getLoadTypes. To: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.959Z [DEBUG] commands: Command: getOrganizations. From: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:04.959Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:12:04.960Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:12:04.960Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:12:04.961Z [DEBUG] messages: Send data: getOrganizations. To: nCmxsWMoW-E1rQOGAAAi
2018-10-16T13:12:43.287Z [DEBUG] io: Client connected:  qQFUPNB-x3SGfXVQAAAj
2018-10-16T13:12:50.312Z [DEBUG] commands: Command: logon. From: qQFUPNB-x3SGfXVQAAAj
2018-10-16T13:12:50.312Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T13:12:50.335Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T13:12:50.336Z [DEBUG] commands: Logon granted for: admin. From: qQFUPNB-x3SGfXVQAAAj
2018-10-16T13:12:50.336Z [DEBUG] users: Add user: admin, SessionID: Ck3lesAZH6v01JHxvNuIT9ZPB7kft9JM
2018-10-16T13:12:50.336Z [INFO]  users: User admin was added
2018-10-16T13:12:50.336Z [DEBUG] messages: Send command: logon. To: qQFUPNB-x3SGfXVQAAAj
2018-10-16T13:12:50.344Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:50.346Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:12:50.346Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:12:50.348Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:12:50.485Z [DEBUG] io: Client connected:  La01oEh3gvPADnhWAAAk
2018-10-16T13:12:52.378Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:52.381Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:12:52.381Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:12:52.383Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:12:52.491Z [DEBUG] io: Client connected:  9TaXklS5eVLjX0FXAAAl
2018-10-16T13:12:53.219Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:53.220Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:12:53.220Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:12:53.221Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:12:53.351Z [DEBUG] io: Client connected:  ic37VgXgmQZO1U2IAAAm
2018-10-16T13:12:56.978Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:12:56.979Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:17:17.766Z [DEBUG] commands: Command: logout. From: ic37VgXgmQZO1U2IAAAm
2018-10-16T13:17:17.766Z [DEBUG] users: Remove user. SessionID: Ck3lesAZH6v01JHxvNuIT9ZPB7kft9JM
2018-10-16T13:17:17.766Z [INFO]  users: User admin was removed
2018-10-16T13:17:17.766Z [DEBUG] messages: Send command: logout. To: ic37VgXgmQZO1U2IAAAm
2018-10-16T13:17:18.035Z [DEBUG] io: Client connected:  xfsQkg6KjJa4ZtQ4AAAn
2018-10-16T13:17:41.120Z [DEBUG] commands: Command: logon. From: xfsQkg6KjJa4ZtQ4AAAn
2018-10-16T13:17:41.120Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T13:17:41.150Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T13:17:41.150Z [DEBUG] commands: Logon granted for: admin. From: xfsQkg6KjJa4ZtQ4AAAn
2018-10-16T13:17:41.150Z [DEBUG] users: Add user: admin, SessionID: Ck3lesAZH6v01JHxvNuIT9ZPB7kft9JM
2018-10-16T13:17:41.150Z [INFO]  users: User admin was added
2018-10-16T13:17:41.150Z [DEBUG] messages: Send command: logon. To: xfsQkg6KjJa4ZtQ4AAAn
2018-10-16T13:17:41.429Z [DEBUG] io: Client connected:  8jEBlO5h2otVw7j3AAAo
2018-10-16T13:17:52.223Z [DEBUG] commands: Command: logon. From: 8jEBlO5h2otVw7j3AAAo
2018-10-16T13:17:52.223Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T13:17:52.252Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T13:17:52.253Z [DEBUG] commands: Logon granted for: admin. From: 8jEBlO5h2otVw7j3AAAo
2018-10-16T13:17:52.253Z [DEBUG] users: Add user: admin, SessionID: PrWRb25FxQJxA3JKiAm9xnFWQc6g3-bk
2018-10-16T13:17:52.253Z [INFO]  users: User admin was added
2018-10-16T13:17:52.253Z [DEBUG] messages: Send command: logon. To: 8jEBlO5h2otVw7j3AAAo
2018-10-16T13:17:52.291Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:17:52.292Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:17:52.292Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:17:52.293Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:17:52.499Z [DEBUG] io: Client connected:  T4bWdjqp-2Qj5inNAAAp
2018-10-16T13:17:52.532Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:17:52.533Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:19:09.946Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:09.970Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:19:09.971Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:19:09.972Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:10.012Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:10.012Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:19:10.013Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:19:10.013Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:10.234Z [DEBUG] io: Client connected:  bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.265Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:10.266Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:19:10.431Z [DEBUG] commands: Command: getTickets. From: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.431Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:19:10.433Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:19:10.434Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:10.435Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:19:10.439Z [DEBUG] messages: Send data: getTickets. To: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.465Z [DEBUG] commands: Command: getLoadTypes. From: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.465Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:19:10.466Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:19:10.466Z [DEBUG] messages: Send data: getLoadTypes. To: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.613Z [DEBUG] commands: Command: getOrganizations. From: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:10.613Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:19:10.614Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:19:10.615Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:19:10.615Z [DEBUG] messages: Send data: getOrganizations. To: bjVVIzMU4f1Hp6xqAAAq
2018-10-16T13:19:12.296Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:12.297Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-16T13:19:12.297Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-16T13:19:12.298Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:12.305Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:12.305Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-16T13:19:12.306Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-16T13:19:12.306Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:12.519Z [DEBUG] io: Client connected:  OuCvuNagqHGSXeeaAAAr
2018-10-16T13:19:12.552Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:12.553Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:19:13.576Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:13.577Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-16T13:19:13.578Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-16T13:19:13.579Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:13.586Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:13.587Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-16T13:19:13.587Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-16T13:19:13.588Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:13.796Z [DEBUG] io: Client connected:  Z0JORJSSVmfoe7anAAAs
2018-10-16T13:19:13.830Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:13.831Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:19:14.423Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:14.424Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:19:14.424Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:19:14.425Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:14.433Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:14.434Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:19:14.435Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:19:14.435Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:19:14.630Z [DEBUG] io: Client connected:  wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.661Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:14.662Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T13:19:14.812Z [DEBUG] commands: Command: getTickets. From: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.812Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:19:14.814Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:19:14.814Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:19:14.815Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:19:14.819Z [DEBUG] messages: Send data: getTickets. To: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.842Z [DEBUG] commands: Command: getLoadTypes. From: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.842Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:19:14.843Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:19:14.844Z [DEBUG] messages: Send data: getLoadTypes. To: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.962Z [DEBUG] commands: Command: getOrganizations. From: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:19:14.962Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:19:14.963Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:19:14.963Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:19:14.964Z [DEBUG] messages: Send data: getOrganizations. To: wuHWPqLhVCZ0Uy23AAAt
2018-10-16T13:22:12.731Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:22:12.765Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:22:12.766Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:22:12.767Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:24:46.932Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T13:24:46.937Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T13:24:46.938Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T13:24:46.938Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T13:24:47.099Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T13:24:47.186Z [DEBUG] io: Client connected:  fQFMCIi0QPcALtQQAAAA
2018-10-16T13:24:47.188Z [DEBUG] messages: Send command: logout. To: fQFMCIi0QPcALtQQAAAA
2018-10-16T13:24:47.471Z [DEBUG] io: Client connected:  LF7KClgYvTB82yK5AAAB
2018-10-16T13:25:23.584Z [DEBUG] commands: Command: logon. From: LF7KClgYvTB82yK5AAAB
2018-10-16T13:25:23.584Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T13:25:23.611Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T13:25:23.613Z [DEBUG] commands: Logon granted for: admin. From: LF7KClgYvTB82yK5AAAB
2018-10-16T13:25:23.614Z [DEBUG] users: Add user: admin, SessionID: PrWRb25FxQJxA3JKiAm9xnFWQc6g3-bk
2018-10-16T13:25:23.614Z [INFO]  users: User admin was added
2018-10-16T13:25:23.614Z [DEBUG] messages: Send command: logon. To: LF7KClgYvTB82yK5AAAB
2018-10-16T13:25:23.653Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:23.655Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T13:25:23.656Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T13:25:23.657Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:25:23.855Z [DEBUG] io: Client connected:  5zDp99w-222MgBJTAAAC
2018-10-16T13:25:35.008Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:35.032Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages';
2018-10-16T13:25:35.033Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages' AND users.user_id=1;
2018-10-16T13:25:35.034Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:25:35.047Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:35.049Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/messages/tickets';
2018-10-16T13:25:35.049Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/messages/tickets' AND users.user_id=1;
2018-10-16T13:25:35.050Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:25:35.245Z [DEBUG] io: Client connected:  HGfAsX_9OcVmV-ooAAAD
2018-10-16T13:25:36.756Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:36.758Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:25:36.758Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:25:36.759Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:25:36.772Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:36.773Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:25:36.773Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:25:36.774Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:25:36.913Z [DEBUG] io: Client connected:  SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.018Z [DEBUG] commands: Command: getTickets. From: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.018Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:25:37.021Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:25:37.021Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:25:37.023Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:25:37.029Z [DEBUG] messages: Send data: getTickets. To: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.046Z [DEBUG] commands: Command: getLoadTypes. From: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.046Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-16T13:25:37.048Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-16T13:25:37.048Z [DEBUG] messages: Send data: getLoadTypes. To: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.118Z [DEBUG] commands: Command: getOrganizations. From: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:25:37.118Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-16T13:25:37.120Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-16T13:25:37.120Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-16T13:25:37.121Z [DEBUG] messages: Send data: getOrganizations. To: SxJIf-qbLpYCYgJ7AAAE
2018-10-16T13:26:04.652Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:26:04.675Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:26:04.676Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:26:04.677Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:26:24.299Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:26:24.325Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:26:24.326Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:26:24.327Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:27:25.727Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:27:25.758Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:27:25.759Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:27:25.760Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:27:43.616Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:27:43.648Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:27:43.649Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:27:43.650Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:27:43.820Z [DEBUG] io: Client connected:  nmvBo-UcGJXaK_sYAAAF
2018-10-16T13:28:15.049Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:28:15.052Z [DEBUG] io: Client connected:  wbLZoJwclSuS7kGrAAAG
2018-10-16T13:28:16.967Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations';
2018-10-16T13:28:16.969Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations' AND users.user_id=1;
2018-10-16T13:28:16.970Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:28:17.012Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:28:17.013Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/transportations/active';
2018-10-16T13:28:17.014Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/transportations/active' AND users.user_id=1;
2018-10-16T13:28:17.015Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:28:17.176Z [DEBUG] io: Client connected:  EW2CU_3YFDH_hfu8AAAH
2018-10-16T13:28:25.815Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:28:25.816Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-16T13:28:25.817Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-16T13:28:25.818Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:28:25.827Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:28:25.828Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:28:25.829Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:28:25.830Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:28:25.961Z [DEBUG] io: Client connected:  vLMyq-qrpY50j18HAAAI
2018-10-16T13:28:29.538Z [DEBUG] commands: Command: getTickets. From: vLMyq-qrpY50j18HAAAI
2018-10-16T13:28:56.728Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-16T13:29:00.143Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-16T13:29:00.143Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:29:00.565Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-16T13:29:01.036Z [DEBUG] messages: Send data: getTickets. To: vLMyq-qrpY50j18HAAAI
2018-10-16T13:29:01.220Z [DEBUG] io: Client connected:  2UCPOLwPvXgEnuI4AAAJ
2018-10-16T13:29:16.476Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:29:16.790Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:29:16.917Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:29:17.051Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:31:46.354Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T13:31:46.625Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-16T13:31:46.740Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-16T13:31:46.849Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T13:37:31.686Z [DEBUG] io: Client connected:  eX3NgTaQ6dYfitBMAAAK
2018-10-16T13:55:47.565Z [DEBUG] io: Client connected:  G_B12zr_U8IOMY4dAAAL
2018-10-16T13:55:52.646Z [DEBUG] io: Client connected:  _J9JMtagkcAfDZFRAAAM
2018-10-16T14:12:52.688Z [DEBUG] io: Client connected:  01UQRQdSqG7TjUPWAAAN
2018-10-16T14:12:52.696Z [DEBUG] io: Client connected:  bbbBrp4uvcIQertIAAAO
2018-10-16T14:12:52.696Z [DEBUG] io: Client connected:  RI_tuxR8aR3W0RVGAAAP
2018-10-16T14:12:52.697Z [DEBUG] io: Client connected:  PtCkErpdocxnZ9WnAAAQ
2018-10-16T14:12:52.698Z [DEBUG] io: Client connected:  EAfKB7Z28DJSNV2rAAAR
2018-10-16T14:12:52.704Z [DEBUG] io: Client connected:  kXMKc68mf-co2AJdAAAS
2018-10-16T14:12:52.705Z [DEBUG] io: Client connected:  ksO8KjFcbSUx2Ae_AAAT
2018-10-16T14:12:52.715Z [DEBUG] io: Client connected:  pqPT9cNaTsOAYajxAAAU
2018-10-16T14:12:52.715Z [DEBUG] io: Client connected:  Ersmf2f2dvvUQQP-AAAV
2018-10-16T14:12:52.716Z [DEBUG] io: Client connected:  0bX8rxanAFfNu81sAAAW
2018-10-16T14:12:52.716Z [DEBUG] io: Client connected:  KuBt5tlG8jOXL0DiAAAX
2018-10-16T14:12:52.718Z [DEBUG] io: Client connected:  ZvzqNQUfkD2p0S5GAAAY
2018-10-16T14:12:52.719Z [DEBUG] io: Client connected:  deiNnJOEzjFCmR6jAAAZ
2018-10-16T14:12:52.724Z [DEBUG] io: Client connected:  jGAjyYgB0QUxt65aAAAa
2018-10-16T14:12:52.724Z [DEBUG] io: Client connected:  7QpHBvJu9ThN1kEvAAAb
2018-10-16T14:12:52.725Z [DEBUG] io: Client connected:  cS964mwZLt7n42UWAAAc
2018-10-16T14:12:52.731Z [DEBUG] io: Client connected:  kv_Hd6C0wUjqPYoaAAAd
2018-10-16T14:12:52.733Z [DEBUG] io: Client connected:  i8Nob3fomrJ4YpnCAAAe
2018-10-16T14:12:52.734Z [DEBUG] io: Client connected:  R5nyuKa-vWND2fQGAAAf
2018-10-16T14:12:52.740Z [DEBUG] io: Client connected:  0mfnUVDFj_O8VArqAAAg
2018-10-16T14:12:52.750Z [DEBUG] io: Client connected:  tUxR1Y05h8diBAXLAAAh
2018-10-16T14:12:52.751Z [DEBUG] io: Client connected:  HR-ZUd7B6f3XDW59AAAi
2018-10-16T14:12:52.753Z [DEBUG] io: Client connected:  AheHgRPScRe-AvMKAAAj
2018-10-16T14:12:52.753Z [DEBUG] io: Client connected:  tYLsZB0-948FXn8-AAAk
2018-10-16T14:12:52.755Z [DEBUG] io: Client connected:  Od9L-tRcic9hW70mAAAl
2018-10-16T14:12:52.764Z [DEBUG] io: Client connected:  ALoWMjiQTj_A24M-AAAm
2018-10-16T14:12:52.766Z [DEBUG] io: Client connected:  jAC74neoE4EHHZ7WAAAn
2018-10-16T14:12:52.767Z [DEBUG] io: Client connected:  YHIr3d1TqC3HSY-JAAAo
2018-10-16T14:12:52.767Z [DEBUG] io: Client connected:  PicEJiopvN1VAsTRAAAp
2018-10-16T14:12:52.768Z [DEBUG] io: Client connected:  zwuOZS5RDZk7HCGSAAAq
2018-10-16T14:12:52.768Z [DEBUG] io: Client connected:  w4oqCVKiObDrX8DxAAAr
2018-10-16T14:12:52.770Z [DEBUG] io: Client connected:  PGqvTvQ3wtraRSh9AAAs
2018-10-16T14:12:52.772Z [DEBUG] io: Client connected:  eNN_zmQyCUBHFi-uAAAt
2018-10-16T14:12:52.773Z [DEBUG] io: Client connected:  IK7NBs2Cr0sa9FBxAAAu
2018-10-16T14:12:52.773Z [DEBUG] io: Client connected:  ym83BfLNRu4baKjFAAAv
2018-10-16T14:12:52.775Z [DEBUG] io: Client connected:  XbRqzKaHPD9RIoT-AAAw
2018-10-16T14:12:52.776Z [DEBUG] io: Client connected:  gP_V70WG20kuvAP5AAAx
2018-10-16T14:12:52.777Z [DEBUG] io: Client connected:  CeMthF-TWrA_nZuDAAAy
2018-10-16T14:12:52.779Z [DEBUG] io: Client connected:  jxyzA0_Qd0cOemRsAAAz
2018-10-16T14:12:52.779Z [DEBUG] io: Client connected:  b4ThQLTfM8eRWRL0AAA0
2018-10-16T14:12:52.786Z [DEBUG] io: Client connected:  uMka1A9Jh5rKI665AAA1
2018-10-16T14:12:52.786Z [DEBUG] io: Client connected:  MXGBiML8x_mg2QIPAAA2
2018-10-16T14:12:52.788Z [DEBUG] io: Client connected:  Rg02c0qeNkk0RYYSAAA3
2018-10-16T14:12:52.789Z [DEBUG] io: Client connected:  cketBjY5Bm0aKFQ4AAA4
2018-10-16T14:12:52.791Z [DEBUG] io: Client connected:  RGFiSl2-i7YRa0yEAAA5
2018-10-16T14:12:52.792Z [DEBUG] io: Client connected:  oltUkAdFkEPBLSnCAAA6
2018-10-16T14:12:52.793Z [DEBUG] io: Client connected:  geq2DV_AH_Vc_Y5FAAA7
2018-10-16T14:12:52.797Z [DEBUG] io: Client connected:  ccjrh_rmQrCPh-6-AAA8
2018-10-16T14:12:52.798Z [DEBUG] io: Client connected:  v2gbecE0AShMtcG9AAA9
2018-10-16T14:12:52.798Z [DEBUG] io: Client connected:  ZgQg7P-MZ1G1Bc_zAAA-
2018-10-16T14:12:52.799Z [DEBUG] io: Client connected:  bJ28GWYVKPIVIk_CAAA_
2018-10-16T14:12:52.801Z [DEBUG] io: Client connected:  uigX23_qHEuJrOCbAABA
2018-10-16T14:12:52.802Z [DEBUG] io: Client connected:  Q8cXIwnnOczqGH4NAABB
2018-10-16T14:12:52.804Z [DEBUG] io: Client connected:  TfqDnarWhDwzQ9QtAABC
2018-10-16T14:12:52.805Z [DEBUG] io: Client connected:  ZPLhfTyNVYio8ZFEAABD
2018-10-16T14:12:52.805Z [DEBUG] io: Client connected:  ihdj0DBzQgiBQP97AABE
2018-10-16T14:12:52.806Z [DEBUG] io: Client connected:  FH5n8m5S62mgwkDtAABF
2018-10-16T14:12:52.808Z [DEBUG] io: Client connected:  AJMr0PmWIVwEEDeRAABG
2018-10-16T14:12:52.810Z [DEBUG] io: Client connected:  SHAXprE8QJyWkE1qAABH
2018-10-16T14:12:52.811Z [DEBUG] io: Client connected:  7v2gzrFZBLjX20a6AABI
2018-10-16T14:12:52.813Z [DEBUG] io: Client connected:  jkSTdyryVyAjE9KpAABJ
2018-10-16T14:12:52.814Z [DEBUG] io: Client connected:  _DTLoDfxSOOBZsU_AABK
2018-10-16T14:12:52.814Z [DEBUG] io: Client connected:  z00YdcXBQGg4uS-BAABL
2018-10-16T14:12:52.815Z [DEBUG] io: Client connected:  3l3sCRlcfpzMFukuAABM
2018-10-16T14:12:52.817Z [DEBUG] io: Client connected:  -QKkgfrWS3CGnH_HAABN
2018-10-16T14:12:52.819Z [DEBUG] io: Client connected:  DuDvD8ELAlrCsf-vAABO
2018-10-16T14:12:52.821Z [DEBUG] io: Client connected:  q66WNSKzCbWFavWKAABP
2018-10-16T14:12:52.822Z [DEBUG] io: Client connected:  VR0OojmkpevJM8jfAABQ
2018-10-16T14:12:52.822Z [DEBUG] io: Client connected:  MV5OsMBCKEryX9U-AABR
2018-10-16T14:12:52.822Z [DEBUG] io: Client connected:  Xx-3svtGuJuIaJhsAABS
2018-10-16T14:12:52.823Z [DEBUG] io: Client connected:  3mdOyvlvbPpYhVaIAABT
2018-10-16T14:12:52.825Z [DEBUG] io: Client connected:  cAAuSKP5vUuzNcgiAABU
2018-10-16T14:12:52.828Z [DEBUG] io: Client connected:  Xb4759rYg_AExpJMAABV
2018-10-16T14:12:52.828Z [DEBUG] io: Client connected:  tJwdjEmb_Sp8TdcjAABW
2018-10-16T14:12:52.829Z [DEBUG] io: Client connected:  Jxn_Fbkrk0XGQtzzAABX
2018-10-16T14:12:52.830Z [DEBUG] io: Client connected:  rsBjXhSWtX-DVuBbAABY
2018-10-16T14:12:52.846Z [DEBUG] commands: Command: logon. From: Jxn_Fbkrk0XGQtzzAABX
2018-10-16T14:12:52.846Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T14:12:52.939Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T14:12:52.940Z [DEBUG] commands: Logon granted for: admin. From: Jxn_Fbkrk0XGQtzzAABX
2018-10-16T14:12:52.940Z [DEBUG] users: Add user: admin, SessionID: 0SHhbj-v-OrZ2K_uts8JqylJQemQkp33
2018-10-16T14:12:52.940Z [INFO]  users: User admin was added
2018-10-16T14:12:52.940Z [DEBUG] messages: Send command: logon. To: Jxn_Fbkrk0XGQtzzAABX
2018-10-16T14:12:54.606Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:12:54.612Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:12:54.613Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:12:54.613Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:13:17.232Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:13:18.302Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:13:18.307Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:13:18.308Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:13:18.308Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:13:18.506Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:13:32.031Z [DEBUG] io: Client connected:  aKJO5_g0sp7FId4QAAAA
2018-10-16T14:14:07.490Z [DEBUG] io: Client connected:  WX0BoN-Uf1JNK9cuAAAB
2018-10-16T14:14:46.375Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:14:46.380Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:14:46.381Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:14:46.381Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:14:46.566Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:14:46.669Z [DEBUG] io: Client connected:  GMB4x2Py-FMItWpBAAAA
2018-10-16T14:14:55.572Z [DEBUG] io: Client connected:  PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:00.719Z [DEBUG] commands: Command: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:07.697Z [WARN]  commands: Command: Session undefined: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:15.140Z [DEBUG] commands: Command: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:15.141Z [WARN]  commands: Command: Session undefined: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:15.788Z [DEBUG] commands: Command: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:15.789Z [WARN]  commands: Command: Session undefined: logon. From: PfUDOS_wXJMe8E3NAAAB
2018-10-16T14:15:17.484Z [DEBUG] io: Client connected:  WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:23.934Z [DEBUG] commands: Command: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:23.934Z [WARN]  commands: Command: Session undefined: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:25.836Z [DEBUG] commands: Command: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:25.836Z [WARN]  commands: Command: Session undefined: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:26.309Z [DEBUG] commands: Command: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:15:26.309Z [WARN]  commands: Command: Session undefined: logon. From: WV5w21neMBXCuSNVAAAC
2018-10-16T14:26:22.544Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:26:22.550Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:26:22.550Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:26:22.551Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:26:22.686Z [DEBUG] io: Client connected:  VqTWo_uzhhJMbfndAAAA
2018-10-16T14:26:22.726Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:26:26.858Z [DEBUG] io: Client connected:  7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:10.478Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:10.478Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:12.659Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:12.659Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.116Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.116Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.364Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.364Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.627Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:13.627Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:46.221Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:46.221Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.117Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.117Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.429Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.429Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.918Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:47.919Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:48.597Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:48.597Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:48.926Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:48.926Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:49.165Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:27:49.165Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:02.813Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:02.813Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.205Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.205Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.637Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.637Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.861Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:03.861Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:04.277Z [DEBUG] commands: Command: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:28:04.277Z [WARN]  commands: Command: Session undefined: logon. From: 7aDE8VRD5Cea7K0nAAAB
2018-10-16T14:29:00.675Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:29:00.680Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:29:00.680Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:29:00.681Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:29:00.834Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:29:01.723Z [DEBUG] io: Client connected:  SkRtjLJFafaisLo1AAAA
2018-10-16T14:33:58.129Z [DEBUG] io: Client connected:  l7urQMRxt9Xvi6tUAAAB
2018-10-16T14:34:02.967Z [DEBUG] commands: Command: logon. From: l7urQMRxt9Xvi6tUAAAB
2018-10-16T14:34:02.967Z [WARN]  commands: Command: Session undefined: logon. From: l7urQMRxt9Xvi6tUAAAB
2018-10-16T14:36:48.178Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T14:36:48.183Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T14:36:48.183Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T14:36:48.184Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T14:36:48.338Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T14:36:48.469Z [DEBUG] io: Client connected:  63-UyFXXzAoepxt_AAAA
2018-10-16T14:37:35.249Z [DEBUG] io: Client connected:  4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:38:35.130Z [DEBUG] commands: Command: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:38:35.130Z [WARN]  commands: Command: Session undefined: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:38:53.872Z [DEBUG] commands: Command: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:38:53.872Z [WARN]  commands: Command: Session undefined: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:39:15.264Z [DEBUG] commands: Command: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:39:15.264Z [WARN]  commands: Command: Session undefined: logon. From: 4EQsi-g_DQcQKs3DAAAB
2018-10-16T14:57:38.731Z [DEBUG] io: Client connected:  HvB5LLa5oglcivsfAAAC
2018-10-16T14:58:02.188Z [DEBUG] io: Client connected:  6AGDS_PmlNGtD9MQAAAD
2018-10-16T14:59:46.581Z [DEBUG] io: Client connected:  6ahxZC92icnZG15tAAAE
2018-10-16T14:59:49.935Z [DEBUG] commands: Command: logon. From: 6ahxZC92icnZG15tAAAE
2018-10-16T14:59:49.935Z [WARN]  commands: Command: Session undefined: logon. From: 6ahxZC92icnZG15tAAAE
2018-10-16T15:00:23.149Z [DEBUG] io: Client connected:  rl03nsPawWiTbfjJAAAF
2018-10-16T15:00:25.035Z [DEBUG] io: Client connected:  g0k-rd12jGguT5U_AAAG
2018-10-16T15:00:26.755Z [DEBUG] io: Client connected:  1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:29.423Z [DEBUG] commands: Command: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:29.423Z [WARN]  commands: Command: Session undefined: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:30.637Z [DEBUG] commands: Command: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:30.637Z [WARN]  commands: Command: Session undefined: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:33.839Z [DEBUG] commands: Command: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:33.839Z [WARN]  commands: Command: Session undefined: logon. From: 1tUw6y7dZZUXDo29AAAH
2018-10-16T15:00:35.442Z [DEBUG] io: Client connected:  1yNIAnJ51Vs1pDHgAAAI
2018-10-16T15:00:37.486Z [DEBUG] commands: Command: logon. From: 1yNIAnJ51Vs1pDHgAAAI
2018-10-16T15:00:37.486Z [WARN]  commands: Command: Session undefined: logon. From: 1yNIAnJ51Vs1pDHgAAAI
2018-10-16T15:01:02.849Z [DEBUG] io: Client connected:  exN0OCq2RI4gJPCUAAAJ
2018-10-16T15:01:05.112Z [DEBUG] commands: Command: logon. From: exN0OCq2RI4gJPCUAAAJ
2018-10-16T15:01:05.113Z [WARN]  commands: Command: Session undefined: logon. From: exN0OCq2RI4gJPCUAAAJ
2018-10-16T15:03:07.863Z [DEBUG] io: Client connected:  4j2ITOb27kf5BI1eAAAK
2018-10-16T15:03:10.723Z [DEBUG] commands: Command: logon. From: 4j2ITOb27kf5BI1eAAAK
2018-10-16T15:03:10.723Z [WARN]  commands: Command: Session undefined: logon. From: 4j2ITOb27kf5BI1eAAAK
2018-10-16T15:05:20.339Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T15:05:20.343Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T15:05:20.344Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T15:05:20.344Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T15:05:20.503Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T15:05:20.745Z [DEBUG] io: Client connected:  _rn2ZCb8BjDoii0eAAAA
2018-10-16T15:05:25.231Z [DEBUG] io: Client connected:  mVjMJogmB2QI_Og4AAAB
2018-10-16T15:05:28.279Z [DEBUG] commands: Command: logon. From: mVjMJogmB2QI_Og4AAAB
2018-10-16T15:05:28.280Z [WARN]  commands: Command: Session undefined: logon. From: mVjMJogmB2QI_Og4AAAB
2018-10-16T15:16:41.274Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T15:16:41.278Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T15:16:41.279Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T15:16:41.279Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T15:16:41.438Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T15:16:41.759Z [DEBUG] io: Client connected:  Pw7mUP4Wa18QLWb6AAAA
2018-10-16T15:17:06.824Z [DEBUG] io: Client connected:  kBZfwPp9SDG6QqrhAAAB
2018-10-16T15:17:14.200Z [DEBUG] commands: Command: logon. From: kBZfwPp9SDG6QqrhAAAB
2018-10-16T15:17:14.200Z [WARN]  commands: Command: Session undefined: logon. From: kBZfwPp9SDG6QqrhAAAB
2018-10-16T15:36:10.514Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T15:36:10.519Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T15:36:10.520Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T15:36:10.520Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T15:36:10.722Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T15:36:10.748Z [DEBUG] io: Client connected:  m53bLvvOlTNreOoXAAAA
2018-10-16T15:37:00.433Z [DEBUG] io: Client connected:  uzHF5Ve85L0Z_vu9AAAB
2018-10-16T15:42:48.257Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T15:42:48.262Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T15:42:48.263Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T15:42:48.263Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T15:42:48.425Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T15:42:50.170Z [DEBUG] io: Client connected:  86732g-4HRpjnNKsAAAA
2018-10-16T15:42:54.457Z [DEBUG] io: Client connected:  WARg_a-nAKXxMqeNAAAB
2018-10-16T15:43:01.279Z [DEBUG] commands: Command: logon. From: WARg_a-nAKXxMqeNAAAB
2018-10-16T15:43:01.279Z [WARN]  commands: Command: Session undefined: logon. From: WARg_a-nAKXxMqeNAAAB
2018-10-16T15:43:11.501Z [DEBUG] io: Client connected:  8I0rBcAdnD7jVBRKAAAC
2018-10-16T15:43:14.493Z [DEBUG] commands: Command: logon. From: 8I0rBcAdnD7jVBRKAAAC
2018-10-16T15:43:14.493Z [WARN]  commands: Command: Session undefined: logon. From: 8I0rBcAdnD7jVBRKAAAC
2018-10-16T15:47:11.856Z [DEBUG] io: Client connected:  drY6rxl_qgWwYNBfAAAD
2018-10-16T15:51:11.234Z [DEBUG] io: Client connected:  Be-Io2eoPaxG9NUgAAAE
2018-10-16T15:51:11.235Z [DEBUG] io: Client connected:  ZO5IIVWciUF7MTzeAAAF
2018-10-16T15:51:11.236Z [DEBUG] io: Client connected:  -X0Aict6llihzD8XAAAG
2018-10-16T15:51:11.238Z [DEBUG] io: Client connected:  nQ_EciT6uTXviblzAAAH
2018-10-16T15:51:11.239Z [DEBUG] io: Client connected:  G-m5Gmi41ZLd39fSAAAI
2018-10-16T15:51:11.242Z [DEBUG] io: Client connected:  laDHlfajRoHXeOScAAAJ
2018-10-16T16:00:00.606Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-16T16:00:00.611Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-16T16:00:00.612Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-16T16:00:00.612Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-16T16:00:00.817Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-16T16:00:01.944Z [DEBUG] io: Client connected:  YJMX9Jb2En4yYv3fAAAA
2018-10-16T16:00:18.777Z [DEBUG] commands: Command: logon. From: YJMX9Jb2En4yYv3fAAAA
2018-10-16T16:00:18.778Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-16T16:00:18.827Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-16T16:00:18.841Z [DEBUG] commands: Logon granted for: admin. From: YJMX9Jb2En4yYv3fAAAA
2018-10-16T16:00:18.842Z [DEBUG] users: Add user: admin, SessionID: BmPbn9hdnL6NZ-T2ViiT9qj_g3FYRT_E
2018-10-16T16:00:18.842Z [INFO]  users: User admin was added
2018-10-16T16:00:18.843Z [DEBUG] messages: Send command: logon. To: YJMX9Jb2En4yYv3fAAAA
2018-10-16T16:00:18.882Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T16:00:18.921Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-16T16:00:18.922Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-16T16:00:18.923Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-16T16:00:19.209Z [DEBUG] io: Client connected:  uHhnck6lJChXO4eyAAAB
2018-10-16T16:00:19.237Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-16T16:00:19.238Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-16T16:00:26.911Z [DEBUG] commands: Command: logout. From: uHhnck6lJChXO4eyAAAB
2018-10-16T16:00:26.911Z [DEBUG] users: Remove user. SessionID: BmPbn9hdnL6NZ-T2ViiT9qj_g3FYRT_E
2018-10-16T16:00:26.911Z [INFO]  users: User admin was removed
2018-10-16T16:00:26.912Z [DEBUG] messages: Send command: logout. To: uHhnck6lJChXO4eyAAAB
2018-10-16T16:00:27.133Z [DEBUG] io: Client connected:  JTqxvf2IMOoyIqDGAAAC
2018-10-19T14:31:22.413Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T14:31:22.430Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T14:31:22.431Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T14:31:22.432Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T14:31:23.134Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T14:32:48.420Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T14:32:48.426Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T14:32:48.427Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T14:32:48.427Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T14:32:48.578Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T14:32:53.772Z [DEBUG] io: Client connected:  IexssegNT1vatw1LAAAA
2018-10-19T14:33:01.908Z [DEBUG] commands: Command: logon. From: IexssegNT1vatw1LAAAA
2018-10-19T14:33:01.909Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-19T14:33:01.943Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-19T14:33:01.958Z [DEBUG] commands: Logon granted for: admin. From: IexssegNT1vatw1LAAAA
2018-10-19T14:33:01.959Z [DEBUG] users: Add user: admin, SessionID: qZYjvwf9JZpqxxqCOpvT66SAFR6G3XqE
2018-10-19T14:33:01.960Z [INFO]  users: User admin was added
2018-10-19T14:33:01.962Z [DEBUG] messages: Send command: logon. To: IexssegNT1vatw1LAAAA
2018-10-19T14:33:01.972Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:33:02.002Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-19T14:33:02.004Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-19T14:33:02.006Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:33:02.122Z [DEBUG] io: Client connected:  YM2Z7BLk0kh1qcy-AAAB
2018-10-19T14:33:03.353Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:33:03.355Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T14:33:03.357Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T14:33:03.359Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:33:03.369Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:33:03.371Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:33:03.372Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:33:03.374Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:33:03.533Z [DEBUG] io: Client connected:  wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.579Z [DEBUG] commands: Command: getTickets. From: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.580Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:33:03.596Z [DEBUG] commands: Command: getLoadTypes. From: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.597Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:33:03.638Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:33:03.638Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:33:03.640Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:33:03.640Z [DEBUG] messages: Send data: getLoadTypes. To: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.642Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:33:03.674Z [DEBUG] commands: Command: getOrganizations. From: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.674Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:33:03.677Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:33:03.678Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:33:03.682Z [DEBUG] messages: Send data: getOrganizations. To: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:33:03.703Z [DEBUG] messages: Send data: getTickets. To: wbSEpqA0Kbs7qwI-AAAC
2018-10-19T14:37:13.494Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T14:37:13.499Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T14:37:13.500Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T14:37:13.501Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T14:37:13.657Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T14:37:18.375Z [DEBUG] io: Client connected:  -L2GHUE4cYJZHU_yAAAA
2018-10-19T14:37:18.377Z [DEBUG] messages: Send command: logout. To: -L2GHUE4cYJZHU_yAAAA
2018-10-19T14:37:18.558Z [DEBUG] io: Client connected:  Tgym8fwMb4B3p4h7AAAB
2018-10-19T14:37:28.470Z [DEBUG] commands: Command: logon. From: Tgym8fwMb4B3p4h7AAAB
2018-10-19T14:37:28.471Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-19T14:37:28.496Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-19T14:37:28.498Z [DEBUG] commands: Logon granted for: admin. From: Tgym8fwMb4B3p4h7AAAB
2018-10-19T14:37:28.500Z [DEBUG] users: Add user: admin, SessionID: qZYjvwf9JZpqxxqCOpvT66SAFR6G3XqE
2018-10-19T14:37:28.501Z [INFO]  users: User admin was added
2018-10-19T14:37:28.501Z [DEBUG] messages: Send command: logon. To: Tgym8fwMb4B3p4h7AAAB
2018-10-19T14:37:28.531Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:37:28.534Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-19T14:37:28.536Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-19T14:37:28.538Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:37:28.687Z [DEBUG] io: Client connected:  AOBIRWiD55xpi0OCAAAC
2018-10-19T14:37:30.705Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:37:30.707Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T14:37:30.709Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T14:37:30.710Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:37:30.720Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:37:30.722Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:37:30.723Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:37:30.724Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:37:30.807Z [DEBUG] io: Client connected:  hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.844Z [DEBUG] commands: Command: getTickets. From: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.845Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:37:30.848Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:37:30.849Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:37:30.851Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:37:30.857Z [DEBUG] messages: Send data: getTickets. To: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.874Z [DEBUG] commands: Command: getLoadTypes. From: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.875Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:37:30.877Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:37:30.878Z [DEBUG] messages: Send data: getLoadTypes. To: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.934Z [DEBUG] commands: Command: getOrganizations. From: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:30.934Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:37:30.937Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:37:30.937Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:37:30.939Z [DEBUG] messages: Send data: getOrganizations. To: hJgpEomojvHxHiTgAAAD
2018-10-19T14:37:41.895Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:37:41.926Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T14:38:21.303Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:38:21.350Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:38:21.352Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:38:21.354Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:38:21.490Z [DEBUG] io: Client connected:  H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.564Z [DEBUG] commands: Command: getTickets. From: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.565Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:38:21.568Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:38:21.569Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:38:21.571Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:38:21.577Z [DEBUG] messages: Send data: getTickets. To: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.586Z [DEBUG] commands: Command: getLoadTypes. From: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.586Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:38:21.588Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:38:21.589Z [DEBUG] messages: Send data: getLoadTypes. To: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.681Z [DEBUG] commands: Command: getOrganizations. From: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:21.681Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:38:21.684Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:38:21.685Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:38:21.687Z [DEBUG] messages: Send data: getOrganizations. To: H65oFvfhmjGIBWprAAAE
2018-10-19T14:38:24.184Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:38:24.187Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T14:44:45.726Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:45.763Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:44:45.766Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:44:45.769Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:44:46.016Z [DEBUG] io: Client connected:  EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.060Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:46.063Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T14:44:46.165Z [DEBUG] commands: Command: getTickets. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.165Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:44:46.168Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:44:46.170Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:46.172Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:44:46.178Z [DEBUG] messages: Send data: getTickets. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.192Z [DEBUG] commands: Command: getTicket. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.192Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T14:44:46.195Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T14:44:46.196Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T14:44:46.201Z [DEBUG] messages: Send data: getTicket. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.319Z [DEBUG] commands: Command: getLoadTypes. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.319Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:44:46.321Z [DEBUG] commands: Command: getOrganizations. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.321Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:44:46.322Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:44:46.323Z [DEBUG] messages: Send data: getLoadTypes. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.325Z [DEBUG] commands: Command: getOrganization. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.326Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:44:46.327Z [DEBUG] commands: Command: getOrganization. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.327Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:44:46.328Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:44:46.329Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T14:44:46.332Z [DEBUG] messages: Send data: getOrganization. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.334Z [DEBUG] commands: Command: getPoint. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.335Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:44:46.337Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:44:46.338Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T14:44:46.339Z [DEBUG] commands: Command: getPoint. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.340Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:44:46.341Z [DEBUG] messages: Send data: getPoint. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.343Z [DEBUG] commands: Command: getPerson. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.343Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:44:46.345Z [DEBUG] commands: Command: getTicketHistory. From: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.346Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T14:44:46.347Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:44:46.348Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:44:46.350Z [DEBUG] messages: Send data: getPerson. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.370Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:44:46.371Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T14:44:46.373Z [DEBUG] messages: Send data: getOrganization. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.407Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:44:46.408Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:44:46.410Z [DEBUG] messages: Send data: getOrganizations. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.425Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T14:44:46.426Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T14:44:46.434Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:44:46.435Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T14:44:46.438Z [DEBUG] messages: Send data: getPoint. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:46.439Z [DEBUG] messages: Send data: getTicketHistory. To: EJr1vYDhW_uvVXEyAAAF
2018-10-19T14:44:48.089Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:48.091Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:44:48.093Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:44:48.094Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:44:48.344Z [DEBUG] io: Client connected:  t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:48.375Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:48.377Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T14:44:48.490Z [DEBUG] commands: Command: getTickets. From: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:48.491Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:44:48.493Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:44:48.494Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:48.496Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:44:48.507Z [DEBUG] messages: Send data: getTickets. To: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:49.413Z [DEBUG] commands: Command: getLoadTypes. From: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:49.414Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:44:49.416Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:44:49.417Z [DEBUG] messages: Send data: getLoadTypes. To: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:49.467Z [DEBUG] commands: Command: getOrganizations. From: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:49.468Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:44:49.470Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:44:49.471Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:44:49.472Z [DEBUG] messages: Send data: getOrganizations. To: t_bvKAqAr4KG2PlTAAAG
2018-10-19T14:44:51.051Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:51.054Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:44:51.056Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:44:51.058Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:44:51.191Z [DEBUG] io: Client connected:  3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.275Z [DEBUG] commands: Command: getTickets. From: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.275Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:44:51.278Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:44:51.279Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:51.282Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:44:51.286Z [DEBUG] messages: Send data: getTickets. To: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.341Z [DEBUG] commands: Command: getLoadTypes. From: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.342Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:44:51.343Z [DEBUG] commands: Command: getOrganizations. From: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.344Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:44:51.345Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:44:51.345Z [DEBUG] messages: Send data: getLoadTypes. To: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:51.347Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:44:51.347Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:44:51.349Z [DEBUG] messages: Send data: getOrganizations. To: 3cUCt44pMBzL3PX4AAAH
2018-10-19T14:44:59.815Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:44:59.817Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T14:45:38.490Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:38.524Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:45:38.526Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:45:38.528Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:45:38.684Z [DEBUG] io: Client connected:  NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.762Z [DEBUG] commands: Command: getTickets. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.762Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:38.765Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:38.767Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:38.769Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:38.775Z [DEBUG] messages: Send data: getTickets. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.782Z [DEBUG] commands: Command: getTicket. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.783Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T14:45:38.785Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T14:45:38.787Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T14:45:38.791Z [DEBUG] messages: Send data: getTicket. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.872Z [DEBUG] commands: Command: getLoadTypes. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.873Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:38.874Z [DEBUG] commands: Command: getOrganizations. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.875Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:38.876Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:38.877Z [DEBUG] messages: Send data: getLoadTypes. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.880Z [DEBUG] commands: Command: getOrganization. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.880Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:38.882Z [DEBUG] commands: Command: getOrganization. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.883Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:38.884Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:38.885Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T14:45:38.887Z [DEBUG] messages: Send data: getOrganization. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.889Z [DEBUG] commands: Command: getPoint. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:38.891Z [DEBUG] commands: Command: getPoint. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.892Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:38.893Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:38.894Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T14:45:38.896Z [DEBUG] messages: Send data: getPoint. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.898Z [DEBUG] commands: Command: getPerson. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.898Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:45:38.899Z [DEBUG] commands: Command: getTicketHistory. From: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.900Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T14:45:38.901Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:45:38.902Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:45:38.904Z [DEBUG] messages: Send data: getPerson. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.921Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:38.922Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:38.923Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:38.923Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T14:45:38.924Z [DEBUG] messages: Send data: getOrganizations. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.925Z [DEBUG] messages: Send data: getOrganization. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.934Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:38.934Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T14:45:38.937Z [DEBUG] messages: Send data: getPoint. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:38.946Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T14:45:38.947Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T14:45:38.948Z [DEBUG] messages: Send data: getTicketHistory. To: NjjEha7MF614s32eAAAI
2018-10-19T14:45:41.679Z [DEBUG] io: Client connected:  chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.713Z [DEBUG] commands: Command: getTickets. From: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.713Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:41.716Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:41.716Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:41.718Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:41.724Z [DEBUG] messages: Send data: getTickets. To: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.730Z [DEBUG] commands: Command: getLoadTypes. From: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.730Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:41.733Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:41.734Z [DEBUG] messages: Send data: getLoadTypes. To: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.786Z [DEBUG] commands: Command: getOrganizations. From: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:41.787Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:41.789Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:41.790Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:41.791Z [DEBUG] messages: Send data: getOrganizations. To: chSAgYt3NoWwDuWvAAAJ
2018-10-19T14:45:42.250Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:42.252Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:45:42.254Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:45:42.256Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:45:42.346Z [DEBUG] io: Client connected:  llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.380Z [DEBUG] commands: Command: getTickets. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.381Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:42.383Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:42.384Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:42.386Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:42.389Z [DEBUG] messages: Send data: getTickets. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.398Z [DEBUG] commands: Command: getTicket. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.398Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T14:45:42.401Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T14:45:42.401Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T14:45:42.405Z [DEBUG] messages: Send data: getTicket. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.462Z [DEBUG] commands: Command: getLoadTypes. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.463Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:42.464Z [DEBUG] commands: Command: getOrganizations. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.465Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:42.466Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:42.466Z [DEBUG] messages: Send data: getLoadTypes. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.468Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:42.469Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:42.470Z [DEBUG] commands: Command: getOrganization. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.471Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:42.472Z [DEBUG] messages: Send data: getOrganizations. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.474Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:42.474Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T14:45:42.476Z [DEBUG] messages: Send data: getOrganization. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.478Z [DEBUG] commands: Command: getOrganization. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.478Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:42.481Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:42.481Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T14:45:42.483Z [DEBUG] commands: Command: getPoint. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.483Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:42.484Z [DEBUG] messages: Send data: getOrganization. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.486Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:42.486Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T14:45:42.488Z [DEBUG] commands: Command: getPoint. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.488Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:42.489Z [DEBUG] messages: Send data: getPoint. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.490Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:42.491Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T14:45:42.492Z [DEBUG] commands: Command: getPerson. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.493Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:45:42.494Z [DEBUG] messages: Send data: getPoint. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.495Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:45:42.496Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:45:42.497Z [DEBUG] commands: Command: getPerson. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.498Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:45:42.500Z [DEBUG] messages: Send data: getPerson. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.502Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:45:42.502Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:45:42.504Z [DEBUG] commands: Command: getTicketHistory. From: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.504Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T14:45:42.505Z [DEBUG] messages: Send data: getPerson. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:42.506Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T14:45:42.507Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T14:45:42.509Z [DEBUG] messages: Send data: getTicketHistory. To: llp4_ywjxRu5vSHKAAAK
2018-10-19T14:45:44.222Z [DEBUG] io: Client connected:  9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.251Z [DEBUG] commands: Command: getTickets. From: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.251Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:44.254Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:44.255Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:44.258Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:44.263Z [DEBUG] messages: Send data: getTickets. To: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.265Z [DEBUG] commands: Command: getLoadTypes. From: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.266Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:44.268Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:44.269Z [DEBUG] messages: Send data: getLoadTypes. To: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.316Z [DEBUG] commands: Command: getOrganizations. From: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:44.316Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:44.318Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:44.319Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:44.321Z [DEBUG] messages: Send data: getOrganizations. To: 9dmzBgLSEEk6UZplAAAL
2018-10-19T14:45:50.226Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:50.229Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:45:50.231Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:45:50.232Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:45:50.318Z [DEBUG] io: Client connected:  1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.351Z [DEBUG] commands: Command: getTickets. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.351Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:50.354Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:50.355Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:50.356Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:50.360Z [DEBUG] messages: Send data: getTickets. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.377Z [DEBUG] commands: Command: getTicket. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.378Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T14:45:50.380Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T14:45:50.381Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T14:45:50.385Z [DEBUG] messages: Send data: getTicket. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.440Z [DEBUG] commands: Command: getLoadTypes. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.440Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:50.441Z [DEBUG] commands: Command: getOrganizations. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.442Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:50.443Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:50.444Z [DEBUG] messages: Send data: getLoadTypes. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.445Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:50.445Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:50.447Z [DEBUG] commands: Command: getOrganization. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.447Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:50.449Z [DEBUG] messages: Send data: getOrganizations. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.450Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:50.451Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T14:45:50.453Z [DEBUG] messages: Send data: getOrganization. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.454Z [DEBUG] commands: Command: getOrganization. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.455Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:45:50.457Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:45:50.458Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T14:45:50.459Z [DEBUG] commands: Command: getPoint. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.460Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:50.461Z [DEBUG] messages: Send data: getOrganization. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.462Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:50.463Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T14:45:50.464Z [DEBUG] commands: Command: getPoint. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.465Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:45:50.466Z [DEBUG] messages: Send data: getPoint. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.467Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:45:50.468Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T14:45:50.469Z [DEBUG] commands: Command: getPerson. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.470Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:45:50.471Z [DEBUG] messages: Send data: getPoint. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.472Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:45:50.473Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:45:50.474Z [DEBUG] commands: Command: getTicketHistory. From: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.475Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T14:45:50.476Z [DEBUG] messages: Send data: getPerson. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:50.477Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T14:45:50.477Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T14:45:50.479Z [DEBUG] messages: Send data: getTicketHistory. To: 1v-tpG8YR8PHfKb8AAAM
2018-10-19T14:45:55.150Z [DEBUG] io: Client connected:  uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.177Z [DEBUG] commands: Command: getTickets. From: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.177Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:45:55.180Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:45:55.181Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:45:55.182Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:45:55.188Z [DEBUG] commands: Command: getLoadTypes. From: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.189Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:45:55.191Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:45:55.192Z [DEBUG] messages: Send data: getLoadTypes. To: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.194Z [DEBUG] messages: Send data: getTickets. To: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.229Z [DEBUG] commands: Command: getOrganizations. From: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:45:55.230Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:45:55.232Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:45:55.233Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:45:55.235Z [DEBUG] messages: Send data: getOrganizations. To: uMzhUZyg-WFOzLwLAAAN
2018-10-19T14:46:05.457Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:05.480Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-19T14:46:05.482Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-19T14:46:05.485Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:05.570Z [DEBUG] io: Client connected:  YCQHP2Mw7tdiE28rAAAO
2018-10-19T14:46:05.604Z [DEBUG] commands: Command: getAchiveTickets. From: YCQHP2Mw7tdiE28rAAAO
2018-10-19T14:46:05.605Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-19T14:46:05.607Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-19T14:46:05.609Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:05.611Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:05.617Z [DEBUG] messages: Send data: getAchiveTickets. To: YCQHP2Mw7tdiE28rAAAO
2018-10-19T14:46:05.641Z [DEBUG] commands: Command: getLoadTypes. From: YCQHP2Mw7tdiE28rAAAO
2018-10-19T14:46:05.641Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:05.643Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:05.645Z [DEBUG] messages: Send data: getLoadTypes. To: YCQHP2Mw7tdiE28rAAAO
2018-10-19T14:46:07.250Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:07.252Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-19T14:46:07.254Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-19T14:46:07.256Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:07.347Z [DEBUG] io: Client connected:  sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.382Z [DEBUG] commands: Command: getAchiveTickets. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.383Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-19T14:46:07.385Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-19T14:46:07.387Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:07.389Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:07.394Z [DEBUG] messages: Send data: getAchiveTickets. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.415Z [DEBUG] commands: Command: getTicket. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.416Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T14:46:07.417Z [DEBUG] commands: Command: getLoadTypes. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.417Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:07.420Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T14:46:07.421Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 3;
2018-10-19T14:46:07.425Z [DEBUG] messages: Send data: getTicket. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.448Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:07.448Z [DEBUG] messages: Send data: getLoadTypes. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.453Z [DEBUG] commands: Command: getOrganization. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.454Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:46:07.455Z [DEBUG] commands: Command: getOrganization. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.456Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T14:46:07.457Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:46:07.457Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T14:46:07.458Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T14:46:07.459Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T14:46:07.460Z [DEBUG] messages: Send data: getOrganization. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.461Z [DEBUG] messages: Send data: getOrganization. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.463Z [DEBUG] commands: Command: getPoint. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.463Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:46:07.466Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:46:07.467Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T14:46:07.469Z [DEBUG] messages: Send data: getPoint. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.471Z [DEBUG] commands: Command: getPoint. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.472Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T14:46:07.474Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T14:46:07.475Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T14:46:07.477Z [DEBUG] commands: Command: getPerson. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.477Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T14:46:07.478Z [DEBUG] messages: Send data: getPoint. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.480Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T14:46:07.481Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T14:46:07.482Z [DEBUG] commands: Command: getTicketHistory. From: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.483Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T14:46:07.484Z [DEBUG] messages: Send data: getPerson. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:07.485Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T14:46:07.486Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 3;
2018-10-19T14:46:07.488Z [DEBUG] messages: Send data: getTicketHistory. To: sW2zf3RFyBG4BRFSAAAP
2018-10-19T14:46:09.474Z [DEBUG] io: Client connected:  oJkeUn5us3uJqcRAAAAQ
2018-10-19T14:46:09.502Z [DEBUG] commands: Command: getAchiveTickets. From: oJkeUn5us3uJqcRAAAAQ
2018-10-19T14:46:09.502Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-19T14:46:09.505Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-19T14:46:09.506Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:09.509Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:09.514Z [DEBUG] commands: Command: getLoadTypes. From: oJkeUn5us3uJqcRAAAAQ
2018-10-19T14:46:09.515Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:09.516Z [DEBUG] messages: Send data: getAchiveTickets. To: oJkeUn5us3uJqcRAAAAQ
2018-10-19T14:46:09.518Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:09.518Z [DEBUG] messages: Send data: getLoadTypes. To: oJkeUn5us3uJqcRAAAAQ
2018-10-19T14:46:11.762Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:11.765Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:46:11.766Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:46:11.767Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:11.848Z [DEBUG] io: Client connected:  Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.881Z [DEBUG] commands: Command: getTickets. From: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.882Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:46:11.884Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:46:11.885Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:11.887Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:11.892Z [DEBUG] messages: Send data: getTickets. To: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.898Z [DEBUG] commands: Command: getLoadTypes. From: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.899Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:11.901Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:11.901Z [DEBUG] messages: Send data: getLoadTypes. To: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.958Z [DEBUG] commands: Command: getOrganizations. From: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:11.959Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:46:11.961Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:46:11.961Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:46:11.963Z [DEBUG] messages: Send data: getOrganizations. To: Y_NkzewMqy2ck1JaAAAR
2018-10-19T14:46:12.740Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:12.743Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/archive';
2018-10-19T14:46:12.744Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/archive' AND users.user_id=1;
2018-10-19T14:46:12.745Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:12.831Z [DEBUG] io: Client connected:  7jpKfVNEZATRffFfAAAS
2018-10-19T14:46:12.882Z [DEBUG] commands: Command: getAchiveTickets. From: 7jpKfVNEZATRffFfAAAS
2018-10-19T14:46:12.883Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getAchiveTickets'                 AND users.login = 'admin';
2018-10-19T14:46:12.885Z [DEBUG] commands: Granted command  getAchiveTickets  for user admin
2018-10-19T14:46:12.886Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:12.888Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id > 4 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:12.891Z [DEBUG] messages: Send data: getAchiveTickets. To: 7jpKfVNEZATRffFfAAAS
2018-10-19T14:46:12.932Z [DEBUG] commands: Command: getLoadTypes. From: 7jpKfVNEZATRffFfAAAS
2018-10-19T14:46:12.933Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:12.935Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:12.936Z [DEBUG] messages: Send data: getLoadTypes. To: 7jpKfVNEZATRffFfAAAS
2018-10-19T14:46:13.762Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:13.764Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:46:13.765Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:46:13.767Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:13.853Z [DEBUG] io: Client connected:  0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.882Z [DEBUG] commands: Command: getTickets. From: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.882Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:46:13.885Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:46:13.885Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:13.887Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:13.891Z [DEBUG] messages: Send data: getTickets. To: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.897Z [DEBUG] commands: Command: getLoadTypes. From: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.898Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:13.900Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:13.900Z [DEBUG] messages: Send data: getLoadTypes. To: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.957Z [DEBUG] commands: Command: getOrganizations. From: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:13.958Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:46:13.960Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:46:13.960Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:46:13.961Z [DEBUG] messages: Send data: getOrganizations. To: 0TKdjgfkNP5C0zEpAAAT
2018-10-19T14:46:16.798Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:16.800Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/templates';
2018-10-19T14:46:16.802Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/templates' AND users.user_id=1;
2018-10-19T14:46:16.803Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:16.888Z [DEBUG] io: Client connected:  hzRIAbko6MmUEPoAAAAU
2018-10-19T14:46:18.078Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:18.080Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T14:46:18.082Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T14:46:18.083Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T14:46:18.172Z [DEBUG] io: Client connected:  gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.203Z [DEBUG] commands: Command: getTickets. From: gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.204Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T14:46:18.207Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T14:46:18.208Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T14:46:18.210Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T14:46:18.214Z [DEBUG] messages: Send data: getTickets. To: gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.221Z [DEBUG] commands: Command: getLoadTypes. From: gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.221Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T14:46:18.224Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T14:46:18.225Z [DEBUG] messages: Send data: getLoadTypes. To: gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.272Z [DEBUG] commands: Command: getOrganizations. From: gELvD91_NFv3IA3eAAAV
2018-10-19T14:46:18.273Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T14:46:18.275Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T14:46:18.276Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T14:46:18.277Z [DEBUG] messages: Send data: getOrganizations. To: gELvD91_NFv3IA3eAAAV
2018-10-19T15:30:18.200Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T15:30:18.205Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T15:30:18.206Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T15:30:18.207Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T15:30:18.359Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T15:30:18.713Z [DEBUG] io: Client connected:  42rdzV8oBjInL7qWAAAA
2018-10-19T15:30:18.717Z [DEBUG] messages: Send command: logout. To: 42rdzV8oBjInL7qWAAAA
2018-10-19T15:30:18.885Z [DEBUG] io: Client connected:  PN6KAAkA0f70tEs0AAAB
2018-10-19T15:30:23.914Z [DEBUG] commands: Command: logon. From: PN6KAAkA0f70tEs0AAAB
2018-10-19T15:30:23.915Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-19T15:30:23.917Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-19T15:30:23.918Z [DEBUG] commands: Logon granted for: admin. From: PN6KAAkA0f70tEs0AAAB
2018-10-19T15:30:23.919Z [DEBUG] users: Add user: admin, SessionID: qZYjvwf9JZpqxxqCOpvT66SAFR6G3XqE
2018-10-19T15:30:23.920Z [INFO]  users: User admin was added
2018-10-19T15:30:23.921Z [DEBUG] messages: Send command: logon. To: PN6KAAkA0f70tEs0AAAB
2018-10-19T15:30:23.929Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:23.932Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-19T15:30:23.933Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-19T15:30:23.935Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:24.022Z [DEBUG] io: Client connected:  SPlJo8JvcviMWbE8AAAC
2018-10-19T15:30:25.239Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:25.241Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T15:30:25.242Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T15:30:25.245Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:25.257Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:25.259Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:30:25.260Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:30:25.261Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:25.351Z [DEBUG] io: Client connected:  o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.412Z [DEBUG] commands: Command: getTickets. From: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.413Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:25.416Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:25.417Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:25.419Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:25.425Z [DEBUG] messages: Send data: getTickets. To: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.433Z [DEBUG] commands: Command: getLoadTypes. From: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.434Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:25.436Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:25.437Z [DEBUG] messages: Send data: getLoadTypes. To: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.507Z [DEBUG] commands: Command: getOrganizations. From: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:25.507Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:25.510Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:25.511Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:25.512Z [DEBUG] messages: Send data: getOrganizations. To: o1ZJBALMzHsfIQXwAAAD
2018-10-19T15:30:28.869Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:28.872Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:30:28.873Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:30:28.875Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:28.957Z [DEBUG] io: Client connected:  Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:28.991Z [DEBUG] commands: Command: getTickets. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:28.991Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:28.993Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:28.994Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:28.995Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:28.999Z [DEBUG] messages: Send data: getTickets. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.007Z [DEBUG] commands: Command: getTicket. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.008Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:30:29.010Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:30:29.011Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:30:29.014Z [DEBUG] messages: Send data: getTicket. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.084Z [DEBUG] commands: Command: getLoadTypes. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.085Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:29.087Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:29.088Z [DEBUG] messages: Send data: getLoadTypes. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.089Z [DEBUG] commands: Command: getOrganizations. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.089Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:29.091Z [DEBUG] commands: Command: getOrganization. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.091Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:29.093Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:29.093Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:29.095Z [DEBUG] messages: Send data: getOrganizations. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.096Z [DEBUG] commands: Command: getOrganization. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.096Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:29.097Z [DEBUG] commands: Command: getPoint. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.098Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:29.099Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:29.100Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:30:29.101Z [DEBUG] commands: Command: getPoint. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.102Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:29.103Z [DEBUG] messages: Send data: getOrganization. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.105Z [DEBUG] commands: Command: getPerson. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.106Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:30:29.107Z [DEBUG] commands: Command: getPerson. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.108Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:30:29.110Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:30:29.110Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:30:29.112Z [DEBUG] messages: Send data: getPerson. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.113Z [DEBUG] commands: Command: getTicketHistory. From: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.114Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:30:29.116Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:30:29.117Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:30:29.119Z [DEBUG] messages: Send data: getTicketHistory. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.143Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:29.144Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:30:29.147Z [DEBUG] messages: Send data: getPoint. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.148Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:29.149Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:30:29.150Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:29.150Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:30:29.151Z [DEBUG] messages: Send data: getPoint. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.152Z [DEBUG] messages: Send data: getOrganization. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:29.166Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:30:29.167Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:30:29.169Z [DEBUG] messages: Send data: getPerson. To: Cor6G5qLmtSoTMJbAAAE
2018-10-19T15:30:30.687Z [DEBUG] io: Client connected:  oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.718Z [DEBUG] commands: Command: getTickets. From: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.719Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:30.721Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:30.722Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:30.724Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:30.730Z [DEBUG] messages: Send data: getTickets. To: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.735Z [DEBUG] commands: Command: getLoadTypes. From: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.735Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:30.737Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:30.738Z [DEBUG] messages: Send data: getLoadTypes. To: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.792Z [DEBUG] commands: Command: getOrganizations. From: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:30.793Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:30.795Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:30.795Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:30.797Z [DEBUG] messages: Send data: getOrganizations. To: oVB94VHYVyIujuEcAAAF
2018-10-19T15:30:31.428Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:31.431Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:30:31.433Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:30:31.435Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:31.519Z [DEBUG] io: Client connected:  KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.552Z [DEBUG] commands: Command: getTickets. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.553Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:31.555Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:31.556Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:31.558Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:31.562Z [DEBUG] messages: Send data: getTickets. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.571Z [DEBUG] commands: Command: getTicket. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.571Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:30:31.573Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:30:31.574Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T15:30:31.578Z [DEBUG] messages: Send data: getTicket. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.632Z [DEBUG] commands: Command: getLoadTypes. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.633Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:31.634Z [DEBUG] commands: Command: getOrganizations. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.634Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:31.635Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:31.636Z [DEBUG] messages: Send data: getLoadTypes. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.637Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:31.638Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:31.639Z [DEBUG] commands: Command: getOrganization. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.640Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:31.641Z [DEBUG] messages: Send data: getOrganizations. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.642Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:31.643Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:30:31.645Z [DEBUG] commands: Command: getOrganization. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.645Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:31.646Z [DEBUG] messages: Send data: getOrganization. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.647Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:31.648Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:30:31.650Z [DEBUG] messages: Send data: getOrganization. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.652Z [DEBUG] commands: Command: getPoint. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.652Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:31.655Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:31.656Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:30:31.657Z [DEBUG] commands: Command: getPoint. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.658Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:31.659Z [DEBUG] messages: Send data: getPoint. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.660Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:31.661Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:30:31.662Z [DEBUG] commands: Command: getPerson. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.663Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:30:31.664Z [DEBUG] messages: Send data: getPoint. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.665Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:30:31.666Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:30:31.668Z [DEBUG] commands: Command: getTicketHistory. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.669Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:30:31.670Z [DEBUG] messages: Send data: getPerson. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:31.671Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:30:31.672Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T15:30:31.674Z [DEBUG] messages: Send data: getTicketHistory. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:54.127Z [DEBUG] commands: Command: takeTicket. From: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:54.128Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'takeTicket'                 AND users.login = 'admin';
2018-10-19T15:30:54.164Z [DEBUG] commands: Granted command  takeTicket  for user admin
2018-10-19T15:30:54.165Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:30:54.167Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 2, logist_person_id = 1 WHERE ticket_id = 1;
2018-10-19T15:30:54.180Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (1, 1, 10, 'Заявка переведена в статус "В работе": Администратор');
2018-10-19T15:30:54.212Z [DEBUG] messages: Send info message: Заявка взята в рабту. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:54.213Z [DEBUG] messages: Send data: takeTicket. To: KiiCEtqdXTUqiLVcAAAG
2018-10-19T15:30:54.214Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:30:54.231Z [DEBUG] io: Client connected:  Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.278Z [DEBUG] commands: Command: getTickets. From: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.279Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:54.281Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:54.282Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:54.284Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:54.291Z [DEBUG] messages: Send data: getTickets. To: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.318Z [DEBUG] commands: Command: getLoadTypes. From: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.318Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:54.321Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:54.321Z [DEBUG] messages: Send data: getLoadTypes. To: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.371Z [DEBUG] commands: Command: getOrganizations. From: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:54.372Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:54.374Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:54.375Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:54.376Z [DEBUG] messages: Send data: getOrganizations. To: Wlk2mIS9lBfM5BiYAAAH
2018-10-19T15:30:58.705Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:58.707Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:30:58.709Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:30:58.710Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:30:58.811Z [DEBUG] io: Client connected:  q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.847Z [DEBUG] commands: Command: getTickets. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.848Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:30:58.850Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:30:58.851Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:30:58.853Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:30:58.857Z [DEBUG] messages: Send data: getTickets. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.869Z [DEBUG] commands: Command: getTicket. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.869Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:30:58.872Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:30:58.872Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T15:30:58.876Z [DEBUG] messages: Send data: getTicket. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.948Z [DEBUG] commands: Command: getLoadTypes. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.949Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:30:58.951Z [DEBUG] commands: Command: getOrganizations. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.951Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:30:58.953Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:30:58.954Z [DEBUG] messages: Send data: getLoadTypes. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.957Z [DEBUG] commands: Command: getOrganization. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.958Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:58.960Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:58.961Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:30:58.962Z [DEBUG] messages: Send data: getOrganization. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.964Z [DEBUG] commands: Command: getOrganization. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.965Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:30:58.966Z [DEBUG] commands: Command: getPoint. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.966Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:58.967Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:30:58.968Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:30:58.970Z [DEBUG] commands: Command: getPoint. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.970Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:30:58.971Z [DEBUG] messages: Send data: getOrganization. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.974Z [DEBUG] commands: Command: getPerson. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.975Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:30:58.976Z [DEBUG] commands: Command: getPerson. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.977Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:30:58.978Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:30:58.978Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:30:58.980Z [DEBUG] messages: Send data: getPerson. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.982Z [DEBUG] commands: Command: getTicketHistory. From: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:58.982Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:30:58.985Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:30:58.986Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T15:30:58.987Z [DEBUG] messages: Send data: getTicketHistory. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:59.013Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:30:59.014Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:30:59.015Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:59.016Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:30:59.017Z [DEBUG] messages: Send data: getOrganizations. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:59.018Z [DEBUG] messages: Send data: getPoint. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:59.024Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:30:59.025Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:30:59.027Z [DEBUG] messages: Send data: getPerson. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:30:59.041Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:30:59.041Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:30:59.044Z [DEBUG] messages: Send data: getPoint. To: q75az6pWFG8DMLGFAAAI
2018-10-19T15:31:01.941Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:01.944Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/catalog/persons';
2018-10-19T15:31:01.946Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/catalog/persons' AND users.user_id=1;
2018-10-19T15:31:01.947Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:31:02.069Z [DEBUG] io: Client connected:  sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.108Z [DEBUG] commands: Command: getPersons. From: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.109Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersons'                 AND users.login = 'admin';
2018-10-19T15:31:02.111Z [DEBUG] commands: Granted command  getPersons  for user admin
2018-10-19T15:31:02.112Z [DEBUG] db: DB query: SELECT        *,        trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp    FROM persons    ORDER BY persons.surname;
2018-10-19T15:31:02.114Z [DEBUG] messages: Send data: getPersons. To: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.121Z [DEBUG] commands: Command: getPerson. From: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.122Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:31:02.124Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:31:02.125Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:31:02.126Z [DEBUG] messages: Send data: getPerson. To: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.165Z [DEBUG] commands: Command: getPersonOrganizations. From: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.166Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersonOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:02.167Z [DEBUG] commands: Command: getPersonUsers. From: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.167Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPersonUsers'                 AND users.login = 'admin';
2018-10-19T15:31:02.168Z [DEBUG] commands: Granted command  getPersonOrganizations  for user admin
2018-10-19T15:31:02.169Z [DEBUG] db: DB query: SELECT * FROM organizations          INNER JOIN persons_organizations po ON organizations.organization_id = po.organization_id        WHERE          po.person_id = 1;
2018-10-19T15:31:02.170Z [DEBUG] commands: Granted command  getPersonUsers  for user admin
2018-10-19T15:31:02.171Z [DEBUG] db: DB query: SELECT * FROM users WHERE person_id = 1;
2018-10-19T15:31:02.173Z [DEBUG] messages: Send data: getPersonUsers. To: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:02.185Z [DEBUG] messages: Send data: getPersonOrganizations. To: sO9DDJibKEUUBBhVAAAJ
2018-10-19T15:31:11.832Z [DEBUG] io: Client connected:  GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.876Z [DEBUG] commands: Command: getTickets. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.876Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:11.879Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:11.880Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:11.882Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:11.887Z [DEBUG] messages: Send data: getTickets. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.893Z [DEBUG] commands: Command: getTicket. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.894Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:31:11.897Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:31:11.897Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T15:31:11.901Z [DEBUG] messages: Send data: getTicket. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.966Z [DEBUG] commands: Command: getLoadTypes. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.967Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:11.968Z [DEBUG] commands: Command: getOrganizations. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.968Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:11.969Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:11.970Z [DEBUG] messages: Send data: getLoadTypes. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.971Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:31:11.972Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:31:11.974Z [DEBUG] messages: Send data: getOrganizations. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.975Z [DEBUG] commands: Command: getOrganization. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.976Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:31:11.978Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:31:11.979Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:31:11.981Z [DEBUG] messages: Send data: getOrganization. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.982Z [DEBUG] commands: Command: getOrganization. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.983Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:31:11.984Z [DEBUG] commands: Command: getPoint. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.985Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:31:11.985Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:31:11.986Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:31:11.987Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:31:11.988Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:31:11.989Z [DEBUG] messages: Send data: getOrganization. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.990Z [DEBUG] commands: Command: getPoint. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.991Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:31:11.992Z [DEBUG] messages: Send data: getPoint. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.993Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:31:11.994Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:31:11.996Z [DEBUG] commands: Command: getPerson. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.996Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:31:11.997Z [DEBUG] messages: Send data: getPoint. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.998Z [DEBUG] commands: Command: getPerson. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:11.999Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:31:12.000Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:31:12.000Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:31:12.002Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:31:12.002Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:31:12.004Z [DEBUG] messages: Send data: getPerson. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:12.005Z [DEBUG] commands: Command: getTicketHistory. From: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:12.005Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:31:12.007Z [DEBUG] messages: Send data: getPerson. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:12.008Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:31:12.009Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T15:31:12.010Z [DEBUG] messages: Send data: getTicketHistory. To: GdQcDnm5ShQ3OGw5AAAK
2018-10-19T15:31:13.411Z [DEBUG] io: Client connected:  Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.444Z [DEBUG] commands: Command: getTickets. From: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.445Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:13.447Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:13.447Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:13.450Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:13.458Z [DEBUG] commands: Command: getLoadTypes. From: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.458Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:13.461Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:13.461Z [DEBUG] messages: Send data: getLoadTypes. To: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.463Z [DEBUG] messages: Send data: getTickets. To: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.511Z [DEBUG] commands: Command: getOrganizations. From: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:13.511Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:13.514Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:31:13.514Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:31:13.515Z [DEBUG] messages: Send data: getOrganizations. To: Lab-k2uu-HL5d-fgAAAL
2018-10-19T15:31:16.953Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:16.955Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:31:16.956Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:31:16.958Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:31:17.043Z [DEBUG] io: Client connected:  s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.077Z [DEBUG] commands: Command: getTickets. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.078Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:17.080Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:17.081Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:17.082Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:17.087Z [DEBUG] messages: Send data: getTickets. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.096Z [DEBUG] commands: Command: getTicket. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.096Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:31:17.098Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:31:17.099Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:31:17.103Z [DEBUG] messages: Send data: getTicket. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.158Z [DEBUG] commands: Command: getLoadTypes. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.158Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:17.160Z [DEBUG] commands: Command: getOrganizations. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.161Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:17.162Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:17.163Z [DEBUG] messages: Send data: getLoadTypes. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.165Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:31:17.165Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:31:17.168Z [DEBUG] commands: Command: getOrganization. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.168Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:31:17.169Z [DEBUG] messages: Send data: getOrganizations. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.171Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:31:17.172Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:31:17.173Z [DEBUG] messages: Send data: getOrganization. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.175Z [DEBUG] commands: Command: getOrganization. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.175Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:31:17.177Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:31:17.178Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:31:17.179Z [DEBUG] messages: Send data: getOrganization. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.181Z [DEBUG] commands: Command: getPoint. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.181Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:31:17.183Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:31:17.184Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:31:17.186Z [DEBUG] messages: Send data: getPoint. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.187Z [DEBUG] commands: Command: getPoint. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.188Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:31:17.189Z [DEBUG] commands: Command: getPerson. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.190Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:31:17.191Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:31:17.192Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:31:17.193Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:31:17.194Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:31:17.195Z [DEBUG] messages: Send data: getPoint. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.196Z [DEBUG] messages: Send data: getPerson. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.197Z [DEBUG] commands: Command: getPerson. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.198Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:31:17.199Z [DEBUG] commands: Command: getTicketHistory. From: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.199Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:31:17.200Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:31:17.201Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:31:17.202Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:31:17.203Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:31:17.204Z [DEBUG] messages: Send data: getPerson. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:17.205Z [DEBUG] messages: Send data: getTicketHistory. To: s7HJci-f3Ur90QiJAAAM
2018-10-19T15:31:19.604Z [DEBUG] io: Client connected:  8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.634Z [DEBUG] commands: Command: getTickets. From: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.635Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:19.637Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:19.638Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:19.640Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:19.644Z [DEBUG] messages: Send data: getTickets. To: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.647Z [DEBUG] commands: Command: getLoadTypes. From: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.648Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:19.650Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:19.651Z [DEBUG] messages: Send data: getLoadTypes. To: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.705Z [DEBUG] commands: Command: getOrganizations. From: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:19.705Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:19.708Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:31:19.708Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:31:19.710Z [DEBUG] messages: Send data: getOrganizations. To: 8N2x_O3fFGBpyX_SAAAN
2018-10-19T15:31:20.727Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:20.730Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T15:31:20.731Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T15:31:20.733Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:31:20.741Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:20.743Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:31:20.744Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:31:20.746Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:31:20.828Z [DEBUG] io: Client connected:  -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.861Z [DEBUG] commands: Command: getTickets. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.862Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:20.864Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:20.865Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:20.867Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:20.870Z [DEBUG] messages: Send data: getTickets. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.877Z [DEBUG] commands: Command: getLoadTypes. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.877Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:20.880Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:20.880Z [DEBUG] messages: Send data: getLoadTypes. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.937Z [DEBUG] commands: Command: getOrganizations. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:20.938Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:31:20.940Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:31:20.941Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:31:20.942Z [DEBUG] messages: Send data: getOrganizations. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:22.633Z [DEBUG] commands: Command: getLoadTypes. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:22.634Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:31:22.636Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:31:22.636Z [DEBUG] messages: Send data: getLoadTypes. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:28.904Z [DEBUG] commands: Command: getOrganizationPoints. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:28.905Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-19T15:31:28.907Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-19T15:31:28.908Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 2;
2018-10-19T15:31:28.910Z [DEBUG] messages: Send data: getOrganizationPoints. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:30.512Z [DEBUG] commands: Command: getOrganizationPoints. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:30.513Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizationPoints'                 AND users.login = 'admin';
2018-10-19T15:31:30.515Z [DEBUG] commands: Granted command  getOrganizationPoints  for user admin
2018-10-19T15:31:30.516Z [DEBUG] db: DB query: SELECT *, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address        FROM points        INNER JOIN localities l ON points.locality_id = l.locality_id        INNER JOIN states s2 ON points.state_id = s2.state_id        WHERE points.organization_id = 1;
2018-10-19T15:31:30.517Z [DEBUG] messages: Send data: getOrganizationPoints. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:49.505Z [DEBUG] commands: Command: addTicket. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:49.505Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'addTicket'                 AND users.login = 'admin';
2018-10-19T15:31:49.531Z [DEBUG] commands: Granted command  addTicket  for user admin
2018-10-19T15:31:49.532Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:31:49.534Z [DEBUG] db: DB query: INSERT INTO tickets (load_organization_id, load_point_id, unload_organization_id, unload_point_id, weight, volume, creator_person_id, notes, load_type_id)    VALUES (2, 1, 1, 2, 32, 78, 1, '32',1);
2018-10-19T15:31:49.541Z [DEBUG] messages: Send info message: Точка добавлена. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:49.542Z [DEBUG] messages: Send data: addTicket. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:49.543Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:31:49.551Z [DEBUG] commands: Command: getTickets. From: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:49.552Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:31:49.554Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:31:49.554Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:49.556Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:31:49.561Z [DEBUG] messages: Send data: getTickets. To: -bLPmg1aioZDyDiCAAAO
2018-10-19T15:31:59.389Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:31:59.392Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:33:04.656Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:33:04.689Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:33:04.691Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:33:04.693Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:33:04.815Z [DEBUG] io: Client connected:  uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.870Z [DEBUG] commands: Command: getTickets. From: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.871Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:33:04.874Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:33:04.875Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:33:04.877Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:33:04.884Z [DEBUG] messages: Send data: getTickets. To: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.890Z [DEBUG] commands: Command: getLoadTypes. From: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:33:04.892Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:33:04.893Z [DEBUG] messages: Send data: getLoadTypes. To: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.962Z [DEBUG] commands: Command: getOrganizations. From: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:04.963Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:33:04.965Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:33:04.966Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:33:04.968Z [DEBUG] messages: Send data: getOrganizations. To: uFzsgGkHh4ulxJI1AAAP
2018-10-19T15:33:39.667Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:33:39.698Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:34:41.304Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:34:41.326Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:34:41.328Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:34:41.330Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:34:41.456Z [DEBUG] io: Client connected:  90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.516Z [DEBUG] commands: Command: getTickets. From: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.517Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:34:41.520Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:34:41.521Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:34:41.523Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:34:41.529Z [DEBUG] messages: Send data: getTickets. To: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.537Z [DEBUG] commands: Command: getLoadTypes. From: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.537Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:34:41.540Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:34:41.541Z [DEBUG] messages: Send data: getLoadTypes. To: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.633Z [DEBUG] commands: Command: getOrganizations. From: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:41.633Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:34:41.636Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:34:41.637Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:34:41.639Z [DEBUG] messages: Send data: getOrganizations. To: 90vIBWiZVF4xDJVTAAAQ
2018-10-19T15:34:47.300Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:34:47.303Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:35:26.750Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:35:26.791Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:36:28.628Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:28.653Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:36:28.656Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:36:28.658Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:36:28.925Z [DEBUG] io: Client connected:  MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:28.961Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:28.963Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:36:29.068Z [DEBUG] commands: Command: getTickets. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.069Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:36:29.072Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:36:29.073Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:29.075Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:36:29.081Z [DEBUG] messages: Send data: getTickets. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.094Z [DEBUG] commands: Command: getTicket. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.095Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:36:29.097Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:36:29.098Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:36:29.102Z [DEBUG] messages: Send data: getTicket. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.263Z [DEBUG] commands: Command: getLoadTypes. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.263Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:36:29.265Z [DEBUG] commands: Command: getOrganizations. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.266Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:36:29.267Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:36:29.267Z [DEBUG] messages: Send data: getLoadTypes. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.269Z [DEBUG] commands: Command: getOrganization. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.270Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:36:29.271Z [DEBUG] commands: Command: getOrganization. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.272Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:36:29.273Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:36:29.274Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:36:29.276Z [DEBUG] messages: Send data: getOrganization. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.278Z [DEBUG] commands: Command: getPoint. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.278Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:36:29.281Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:36:29.282Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:36:29.283Z [DEBUG] commands: Command: getPoint. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.284Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:36:29.285Z [DEBUG] messages: Send data: getPoint. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.288Z [DEBUG] commands: Command: getPerson. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.288Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:36:29.292Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:36:29.293Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:36:29.297Z [DEBUG] messages: Send data: getPerson. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.301Z [DEBUG] commands: Command: getTicketHistory. From: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.302Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:36:29.304Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:36:29.305Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:36:29.307Z [DEBUG] messages: Send data: getTicketHistory. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.349Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:36:29.350Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:36:29.351Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:36:29.352Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:36:29.353Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:36:29.353Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:36:29.354Z [DEBUG] messages: Send data: getOrganizations. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.356Z [DEBUG] messages: Send data: getPoint. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.357Z [DEBUG] messages: Send data: getOrganization. To: MhxSK7ieU_eM87LMAAAR
2018-10-19T15:36:29.483Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:29.485Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:36:29.486Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:36:29.488Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:36:29.716Z [DEBUG] io: Client connected:  FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:29.745Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:29.747Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:36:29.847Z [DEBUG] commands: Command: getTickets. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:29.848Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:36:29.850Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:36:29.851Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:29.852Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:36:29.859Z [DEBUG] messages: Send data: getTickets. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:29.869Z [DEBUG] commands: Command: getTicket. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:29.869Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:36:29.871Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:36:29.872Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:36:29.876Z [DEBUG] messages: Send data: getTicket. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.045Z [DEBUG] commands: Command: getLoadTypes. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.046Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:36:30.047Z [DEBUG] commands: Command: getOrganizations. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.048Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:36:30.049Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:36:30.049Z [DEBUG] messages: Send data: getLoadTypes. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.051Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:36:30.051Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:36:30.053Z [DEBUG] commands: Command: getOrganization. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.053Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:36:30.054Z [DEBUG] messages: Send data: getOrganizations. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.056Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:36:30.056Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:36:30.058Z [DEBUG] messages: Send data: getOrganization. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.059Z [DEBUG] commands: Command: getOrganization. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.060Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:36:30.063Z [DEBUG] commands: Command: getPoint. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.063Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:36:30.064Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:36:30.065Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:36:30.067Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:36:30.068Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:36:30.069Z [DEBUG] messages: Send data: getOrganization. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.071Z [DEBUG] messages: Send data: getPoint. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.073Z [DEBUG] commands: Command: getPoint. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.074Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:36:30.076Z [DEBUG] commands: Command: getPerson. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.076Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:36:30.078Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:36:30.078Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:36:30.080Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:36:30.081Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:36:30.082Z [DEBUG] commands: Command: getTicketHistory. From: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.082Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:36:30.084Z [DEBUG] messages: Send data: getPoint. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.085Z [DEBUG] messages: Send data: getPerson. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:30.087Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:36:30.087Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:36:30.089Z [DEBUG] messages: Send data: getTicketHistory. To: FECFVQZ64v4_wJyOAAAS
2018-10-19T15:36:31.091Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:31.093Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:36:31.095Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:36:31.097Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:36:31.322Z [DEBUG] io: Client connected:  KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:31.349Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:31.351Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T15:36:31.453Z [DEBUG] commands: Command: getTickets. From: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:31.454Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:36:31.456Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:36:31.457Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:36:31.459Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:36:31.466Z [DEBUG] messages: Send data: getTickets. To: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:53.104Z [DEBUG] commands: Command: getLoadTypes. From: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:53.105Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:36:53.138Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:36:53.139Z [DEBUG] messages: Send data: getLoadTypes. To: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:53.174Z [DEBUG] commands: Command: getOrganizations. From: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:36:53.175Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:36:53.177Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:36:53.178Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:36:53.180Z [DEBUG] messages: Send data: getOrganizations. To: KHU8ZQa4N9SZ9Yj0AAAT
2018-10-19T15:39:52.022Z [DEBUG] io: Client connected:  Pqdu8dneX95ozKgcAAAU
2018-10-19T15:41:10.912Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:41:10.938Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:41:10.940Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:41:10.942Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:41:11.083Z [DEBUG] io: Client connected:  XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.163Z [DEBUG] commands: Command: getTickets. From: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.164Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:41:11.167Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:41:11.168Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:41:11.170Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:41:11.176Z [DEBUG] messages: Send data: getTickets. To: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.238Z [DEBUG] commands: Command: getLoadTypes. From: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.239Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:41:11.241Z [DEBUG] commands: Command: getOrganizations. From: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.242Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:41:11.243Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:41:11.244Z [DEBUG] messages: Send data: getLoadTypes. To: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:11.270Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:41:11.271Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:41:11.272Z [DEBUG] messages: Send data: getOrganizations. To: XhVwzBRSYL0FWnGVAAAV
2018-10-19T15:41:49.618Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:41:49.647Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:41:49.649Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:41:49.651Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:41:49.781Z [DEBUG] io: Client connected:  AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.856Z [DEBUG] commands: Command: getTickets. From: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.857Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:41:49.859Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:41:49.860Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:41:49.863Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:41:49.871Z [DEBUG] messages: Send data: getTickets. To: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.882Z [DEBUG] commands: Command: getLoadTypes. From: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.883Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:41:49.885Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:41:49.887Z [DEBUG] messages: Send data: getLoadTypes. To: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.963Z [DEBUG] commands: Command: getOrganizations. From: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:41:49.964Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:41:49.966Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:41:49.967Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:41:49.969Z [DEBUG] messages: Send data: getOrganizations. To: AWDPqz_sClMhqrhBAAAW
2018-10-19T15:42:30.781Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:30.815Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:42:30.817Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:42:30.819Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:42:30.928Z [DEBUG] io: Client connected:  xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:30.980Z [DEBUG] commands: Command: getTickets. From: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:30.980Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:30.984Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:30.985Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:30.987Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:30.993Z [DEBUG] messages: Send data: getTickets. To: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:31.000Z [DEBUG] commands: Command: getLoadTypes. From: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:31.001Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:31.003Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:31.005Z [DEBUG] messages: Send data: getLoadTypes. To: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:31.084Z [DEBUG] commands: Command: getOrganizations. From: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:31.085Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:31.087Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:31.089Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:31.091Z [DEBUG] messages: Send data: getOrganizations. To: xGLC-gcnKj6LPpE7AAAX
2018-10-19T15:42:32.363Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:32.366Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:42:32.368Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:42:32.370Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:42:32.458Z [DEBUG] io: Client connected:  U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.511Z [DEBUG] commands: Command: getTickets. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.511Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:32.513Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:32.514Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:32.516Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:32.521Z [DEBUG] messages: Send data: getTickets. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.569Z [DEBUG] commands: Command: getTicket. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.570Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:42:32.571Z [DEBUG] commands: Command: getLoadTypes. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.572Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:32.573Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:42:32.574Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:42:32.577Z [DEBUG] commands: Command: getOrganizations. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.578Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:32.579Z [DEBUG] messages: Send data: getTicket. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.590Z [DEBUG] commands: Command: getOrganization. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.591Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:32.593Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:32.594Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:42:32.595Z [DEBUG] messages: Send data: getOrganization. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.619Z [DEBUG] commands: Command: getOrganization. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.620Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:32.622Z [DEBUG] commands: Command: getPoint. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.622Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:32.623Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:32.624Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:42:32.627Z [DEBUG] messages: Send data: getOrganization. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.630Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:32.632Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:32.635Z [DEBUG] commands: Command: getPoint. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.635Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:32.636Z [DEBUG] messages: Send data: getOrganizations. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.638Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:32.639Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:42:32.640Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:32.641Z [DEBUG] messages: Send data: getLoadTypes. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.642Z [DEBUG] messages: Send data: getPoint. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.644Z [DEBUG] commands: Command: getPerson. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.644Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:32.646Z [DEBUG] commands: Command: getTicketHistory. From: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.646Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:42:32.647Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:32.648Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:32.650Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:42:32.652Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:42:32.653Z [DEBUG] messages: Send data: getPerson. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.654Z [DEBUG] messages: Send data: getTicketHistory. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:32.668Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:32.669Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:42:32.671Z [DEBUG] messages: Send data: getPoint. To: U1CHiqXDIPZutX9bAAAY
2018-10-19T15:42:34.150Z [DEBUG] io: Client connected:  iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.180Z [DEBUG] commands: Command: getTickets. From: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.181Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:34.183Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:34.184Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:34.186Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:34.195Z [DEBUG] messages: Send data: getTickets. To: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.198Z [DEBUG] commands: Command: getLoadTypes. From: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.199Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:34.201Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:34.202Z [DEBUG] messages: Send data: getLoadTypes. To: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.260Z [DEBUG] commands: Command: getOrganizations. From: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:34.261Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:34.263Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:34.264Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:34.265Z [DEBUG] messages: Send data: getOrganizations. To: iwT7Bwp0mcJyCO4jAAAZ
2018-10-19T15:42:35.707Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:35.710Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:42:35.712Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:42:35.713Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:42:35.796Z [DEBUG] io: Client connected:  S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.829Z [DEBUG] commands: Command: getTickets. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.829Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:35.832Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:35.832Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:35.834Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:35.838Z [DEBUG] messages: Send data: getTickets. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.847Z [DEBUG] commands: Command: getTicket. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.848Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:42:35.850Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:42:35.851Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:42:35.855Z [DEBUG] messages: Send data: getTicket. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.922Z [DEBUG] commands: Command: getLoadTypes. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.922Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:35.924Z [DEBUG] commands: Command: getOrganizations. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.925Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:35.925Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:35.926Z [DEBUG] messages: Send data: getLoadTypes. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.927Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:35.928Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:35.929Z [DEBUG] commands: Command: getOrganization. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.930Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:35.931Z [DEBUG] messages: Send data: getOrganizations. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.932Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:35.933Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:42:35.934Z [DEBUG] commands: Command: getOrganization. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.935Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:35.935Z [DEBUG] messages: Send data: getOrganization. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.937Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:35.937Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:42:35.939Z [DEBUG] commands: Command: getPoint. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.939Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:35.940Z [DEBUG] messages: Send data: getOrganization. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.942Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:35.943Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:42:35.945Z [DEBUG] messages: Send data: getPoint. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.946Z [DEBUG] commands: Command: getPoint. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.947Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:35.948Z [DEBUG] commands: Command: getPerson. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.949Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:35.950Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:35.950Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:42:35.951Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:35.952Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:35.954Z [DEBUG] commands: Command: getTicketHistory. From: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.954Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:42:35.955Z [DEBUG] messages: Send data: getPoint. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.956Z [DEBUG] messages: Send data: getPerson. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:35.958Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:42:35.959Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:42:35.960Z [DEBUG] messages: Send data: getTicketHistory. To: S5smI8bqfwZllx1KAAAa
2018-10-19T15:42:39.820Z [DEBUG] io: Client connected:  q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.846Z [DEBUG] commands: Command: getTickets. From: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.846Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:39.848Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:39.849Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:39.852Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:39.857Z [DEBUG] messages: Send data: getTickets. To: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.859Z [DEBUG] commands: Command: getLoadTypes. From: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.860Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:39.862Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:39.863Z [DEBUG] messages: Send data: getLoadTypes. To: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.924Z [DEBUG] commands: Command: getOrganizations. From: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:39.925Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:39.927Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:39.928Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:39.930Z [DEBUG] messages: Send data: getOrganizations. To: q6-N9n2U-wtNa0XyAAAb
2018-10-19T15:42:41.971Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:41.974Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:42:41.977Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:42:41.978Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:42:42.071Z [DEBUG] io: Client connected:  GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.106Z [DEBUG] commands: Command: getTickets. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.106Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:42.109Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:42.109Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:42.111Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:42.116Z [DEBUG] messages: Send data: getTickets. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.123Z [DEBUG] commands: Command: getTicket. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.124Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:42:42.126Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:42:42.127Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:42:42.130Z [DEBUG] messages: Send data: getTicket. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.188Z [DEBUG] commands: Command: getLoadTypes. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.188Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:42.190Z [DEBUG] commands: Command: getOrganizations. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.190Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:42.191Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:42.192Z [DEBUG] messages: Send data: getLoadTypes. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.194Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:42.194Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:42.195Z [DEBUG] commands: Command: getOrganization. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.196Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:42.198Z [DEBUG] messages: Send data: getOrganizations. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.200Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:42.201Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:42:42.203Z [DEBUG] commands: Command: getOrganization. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.204Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:42.205Z [DEBUG] messages: Send data: getOrganization. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.206Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:42.207Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:42:42.209Z [DEBUG] commands: Command: getPoint. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.209Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:42.210Z [DEBUG] messages: Send data: getOrganization. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.211Z [DEBUG] commands: Command: getPoint. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.212Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:42.213Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:42.214Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:42:42.216Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:42.216Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:42:42.218Z [DEBUG] messages: Send data: getPoint. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.219Z [DEBUG] commands: Command: getPerson. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.220Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:42.221Z [DEBUG] messages: Send data: getPoint. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.222Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:42.223Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:42.225Z [DEBUG] commands: Command: getPerson. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.225Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:42.226Z [DEBUG] messages: Send data: getPerson. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.227Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:42.228Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:42.229Z [DEBUG] commands: Command: getTicketHistory. From: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.230Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:42:42.231Z [DEBUG] messages: Send data: getPerson. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:42.232Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:42:42.233Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:42:42.235Z [DEBUG] messages: Send data: getTicketHistory. To: GieRThANZwC9Ydy7AAAc
2018-10-19T15:42:49.395Z [DEBUG] io: Client connected:  Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.424Z [DEBUG] commands: Command: getTickets. From: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.425Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:49.427Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:49.429Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:49.431Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:49.437Z [DEBUG] commands: Command: getLoadTypes. From: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.438Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:49.440Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:49.440Z [DEBUG] messages: Send data: getLoadTypes. To: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.446Z [DEBUG] messages: Send data: getTickets. To: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.490Z [DEBUG] commands: Command: getOrganizations. From: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:49.490Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:49.493Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:49.494Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:49.495Z [DEBUG] messages: Send data: getOrganizations. To: Kq5EKhVKOGXa4nTzAAAd
2018-10-19T15:42:50.683Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:50.686Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:42:50.688Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:42:50.690Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:42:50.775Z [DEBUG] io: Client connected:  Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.810Z [DEBUG] commands: Command: getTickets. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.810Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:42:50.812Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:42:50.813Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:42:50.815Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:42:50.820Z [DEBUG] messages: Send data: getTickets. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.828Z [DEBUG] commands: Command: getTicket. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.828Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:42:50.831Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:42:50.831Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:42:50.836Z [DEBUG] messages: Send data: getTicket. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.889Z [DEBUG] commands: Command: getLoadTypes. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:42:50.891Z [DEBUG] commands: Command: getOrganizations. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.891Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:42:50.892Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:42:50.894Z [DEBUG] messages: Send data: getLoadTypes. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.896Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:42:50.897Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:42:50.899Z [DEBUG] commands: Command: getOrganization. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.899Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:50.901Z [DEBUG] messages: Send data: getOrganizations. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.903Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:50.904Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:42:50.906Z [DEBUG] commands: Command: getOrganization. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.907Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:42:50.908Z [DEBUG] messages: Send data: getOrganization. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.909Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:42:50.910Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:42:50.912Z [DEBUG] commands: Command: getPoint. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.913Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:50.914Z [DEBUG] messages: Send data: getOrganization. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.915Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:50.916Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:42:50.918Z [DEBUG] commands: Command: getPoint. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.919Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:42:50.920Z [DEBUG] messages: Send data: getPoint. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.921Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:42:50.922Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:42:50.923Z [DEBUG] commands: Command: getPerson. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.923Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:50.924Z [DEBUG] messages: Send data: getPoint. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.926Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:50.927Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:50.928Z [DEBUG] commands: Command: getPerson. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.929Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:42:50.930Z [DEBUG] messages: Send data: getPerson. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.932Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:42:50.933Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:42:50.934Z [DEBUG] commands: Command: getTicketHistory. From: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.935Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:42:50.936Z [DEBUG] messages: Send data: getPerson. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:42:50.938Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:42:50.938Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:42:50.940Z [DEBUG] messages: Send data: getTicketHistory. To: Gkmjjy10ZRaWyPFBAAAe
2018-10-19T15:43:00.406Z [DEBUG] io: Client connected:  dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.463Z [DEBUG] commands: Command: getTickets. From: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.464Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:43:00.466Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:43:00.467Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:43:00.469Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:43:00.474Z [DEBUG] messages: Send data: getTickets. To: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.509Z [DEBUG] commands: Command: getLoadTypes. From: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.510Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:43:00.512Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:43:00.513Z [DEBUG] messages: Send data: getLoadTypes. To: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.558Z [DEBUG] commands: Command: getOrganizations. From: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:43:00.558Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:43:00.560Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:43:00.561Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:43:00.562Z [DEBUG] messages: Send data: getOrganizations. To: dH-N6pMT-0ZDaHP-AAAf
2018-10-19T15:44:57.952Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:44:57.979Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:44:57.982Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:44:57.984Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:44:58.137Z [DEBUG] io: Client connected:  ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.205Z [DEBUG] commands: Command: getTickets. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.205Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:44:58.208Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:44:58.209Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:44:58.211Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:44:58.218Z [DEBUG] messages: Send data: getTickets. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.225Z [DEBUG] commands: Command: getTicket. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.226Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:44:58.229Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:44:58.230Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:44:58.234Z [DEBUG] messages: Send data: getTicket. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.313Z [DEBUG] commands: Command: getLoadTypes. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.314Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:44:58.316Z [DEBUG] commands: Command: getOrganizations. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.317Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:44:58.318Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:44:58.319Z [DEBUG] messages: Send data: getLoadTypes. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.321Z [DEBUG] commands: Command: getOrganization. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.322Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:44:58.323Z [DEBUG] commands: Command: getOrganization. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.324Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:44:58.325Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:44:58.326Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:44:58.328Z [DEBUG] commands: Command: getPoint. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.329Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:44:58.330Z [DEBUG] messages: Send data: getOrganization. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.332Z [DEBUG] commands: Command: getPoint. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.333Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:44:58.334Z [DEBUG] commands: Command: getPerson. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.334Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:44:58.336Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:44:58.337Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:44:58.338Z [DEBUG] messages: Send data: getPoint. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.340Z [DEBUG] commands: Command: getPerson. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.341Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:44:58.343Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:44:58.344Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:44:58.346Z [DEBUG] commands: Command: getTicketHistory. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.346Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:44:58.347Z [DEBUG] messages: Send data: getPerson. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.353Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:44:58.354Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:44:58.356Z [DEBUG] messages: Send data: getOrganizations. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.377Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:44:58.378Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:44:58.379Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:44:58.380Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:44:58.381Z [DEBUG] messages: Send data: getOrganization. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.382Z [DEBUG] messages: Send data: getPerson. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.385Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:44:58.385Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:44:58.388Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:44:58.389Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:44:58.390Z [DEBUG] messages: Send data: getPoint. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:44:58.392Z [DEBUG] messages: Send data: getTicketHistory. To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:45:04.928Z [DEBUG] commands: Command: closeTicket. From: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:45:04.928Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-19T15:45:04.931Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-19T15:45:04.933Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:45:04.937Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 890 WHERE ticket_id = 2;
2018-10-19T15:45:04.939Z [ERROR] db: Qery error: { error: column "closed_cost" of relation "tickets" does not exist
    at Connection.parseE (d:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (d:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (d:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 133,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '57',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2339',
  routine: 'transformUpdateTargetList' }
2018-10-19T15:45:04.941Z [DEBUG] messages: Send error message: Ошибка. Невозможно перевести заявку в статус "Закрыта". To: ZLTHPvBjF8PIUuFLAAAg
2018-10-19T15:45:05.016Z [DEBUG] io: Client connected:  BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.050Z [DEBUG] commands: Command: getTickets. From: BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.051Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:45:05.053Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:45:05.054Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:45:05.056Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:45:05.062Z [DEBUG] messages: Send data: getTickets. To: BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.067Z [DEBUG] commands: Command: getLoadTypes. From: BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.067Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:45:05.069Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:45:05.070Z [DEBUG] messages: Send data: getLoadTypes. To: BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.127Z [DEBUG] commands: Command: getOrganizations. From: BhICT34_EvTtHUTVAAAh
2018-10-19T15:45:05.128Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:45:05.130Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:45:05.131Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:45:05.132Z [DEBUG] messages: Send data: getOrganizations. To: BhICT34_EvTtHUTVAAAh
2018-10-19T15:54:38.311Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T15:54:38.316Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T15:54:38.317Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T15:54:38.317Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T15:54:38.474Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T15:54:40.447Z [DEBUG] io: Client connected:  kgWWEYhNU8W5wkcvAAAA
2018-10-19T15:54:40.450Z [DEBUG] messages: Send command: logout. To: kgWWEYhNU8W5wkcvAAAA
2018-10-19T15:54:40.646Z [DEBUG] io: Client connected:  SuZOMnHON6E7gcq_AAAB
2018-10-19T15:54:53.289Z [DEBUG] commands: Command: logon. From: SuZOMnHON6E7gcq_AAAB
2018-10-19T15:54:53.289Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-19T15:54:53.318Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-19T15:54:53.320Z [DEBUG] commands: Logon granted for: admin. From: SuZOMnHON6E7gcq_AAAB
2018-10-19T15:54:53.321Z [DEBUG] users: Add user: admin, SessionID: qZYjvwf9JZpqxxqCOpvT66SAFR6G3XqE
2018-10-19T15:54:53.322Z [INFO]  users: User admin was added
2018-10-19T15:54:53.323Z [DEBUG] messages: Send command: logon. To: SuZOMnHON6E7gcq_AAAB
2018-10-19T15:54:53.353Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:54:53.357Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-19T15:54:53.359Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-19T15:54:53.362Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:54:53.466Z [DEBUG] io: Client connected:  CF6pfhaz1Dh2fo2KAAAC
2018-10-19T15:54:55.172Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:54:55.175Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T15:54:55.177Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T15:54:55.179Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:54:55.262Z [DEBUG] io: Client connected:  5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:04.070Z [DEBUG] commands: Command: getReport_periodReport. From: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:04.071Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:55:04.074Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:55:04.079Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	t.volume
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:55:04.083Z [ERROR] db: Qery error: { error: syntax error at or near "."
    at Connection.parseE (d:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (d:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (d:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 91,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '499',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-19T15:55:04.084Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:10.374Z [DEBUG] commands: Command: getReport_periodReport. From: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:10.375Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:55:10.400Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:55:10.401Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	t.volume
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:55:10.403Z [ERROR] db: Qery error: { error: syntax error at or near "."
    at Connection.parseE (d:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (d:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (d:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 91,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '499',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-19T15:55:10.404Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:15.334Z [DEBUG] commands: Command: getReport_periodReport. From: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:55:15.334Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:55:15.363Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:55:15.364Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight
	t.volume
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:55:15.366Z [ERROR] db: Qery error: { error: syntax error at or near "."
    at Connection.parseE (d:\Node\Poligruz\node_modules\pg\lib\connection.js:553:11)
    at Connection.parseMessage (d:\Node\Poligruz\node_modules\pg\lib\connection.js:378:19)
    at Socket.<anonymous> (d:\Node\Poligruz\node_modules\pg\lib\connection.js:119:22)
    at Socket.emit (events.js:182:13)
    at addChunk (_stream_readable.js:283:12)
    at readableAddChunk (_stream_readable.js:264:11)
    at Socket.Readable.push (_stream_readable.js:219:10)
    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)
  name: 'error',
  length: 91,
  severity: 'ERROR',
  code: '42601',
  detail: undefined,
  hint: undefined,
  position: '499',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'scan.l',
  line: '1087',
  routine: 'scanner_yyerror' }
2018-10-19T15:55:15.366Z [DEBUG] messages: Send error message: Ошибка. Невозможно создать отчет.. To: 5OuyvKaYfWOREdKvAAAD
2018-10-19T15:56:11.816Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-19T15:56:11.822Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-19T15:56:11.824Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-19T15:56:11.825Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-19T15:56:11.992Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-19T15:56:12.429Z [DEBUG] io: Client connected:  QqGzwzZqVlBxwSjnAAAA
2018-10-19T15:56:17.540Z [DEBUG] commands: Command: logon. From: QqGzwzZqVlBxwSjnAAAA
2018-10-19T15:56:17.540Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-19T15:56:17.542Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-19T15:56:17.544Z [DEBUG] commands: Logon granted for: admin. From: QqGzwzZqVlBxwSjnAAAA
2018-10-19T15:56:17.546Z [DEBUG] users: Add user: admin, SessionID: qZYjvwf9JZpqxxqCOpvT66SAFR6G3XqE
2018-10-19T15:56:17.546Z [INFO]  users: User admin was added
2018-10-19T15:56:17.547Z [DEBUG] messages: Send command: logon. To: QqGzwzZqVlBxwSjnAAAA
2018-10-19T15:56:17.556Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:56:17.560Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-19T15:56:17.561Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-19T15:56:17.563Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:56:17.647Z [DEBUG] io: Client connected:  fWU1a5TwkdJ7CTT9AAAB
2018-10-19T15:56:19.175Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:56:19.178Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T15:56:19.179Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T15:56:19.180Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:56:19.269Z [DEBUG] io: Client connected:  gRG_74e0yfzd8ptMAAAC
2018-10-19T15:56:27.810Z [DEBUG] commands: Command: getReport_periodReport. From: gRG_74e0yfzd8ptMAAAC
2018-10-19T15:56:27.811Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:56:27.814Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:56:27.818Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:56:27.824Z [DEBUG] messages: Send data: getReport_dayReport. To: gRG_74e0yfzd8ptMAAAC
2018-10-19T15:56:47.065Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:56:47.094Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T15:56:47.097Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T15:56:47.099Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:56:47.215Z [DEBUG] io: Client connected:  B_j1OoHeh4sGI6EFAAAD
2018-10-19T15:56:56.289Z [DEBUG] commands: Command: getReport_periodReport. From: B_j1OoHeh4sGI6EFAAAD
2018-10-19T15:56:56.290Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:56:56.293Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:56:56.294Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:56:56.300Z [DEBUG] messages: Send data: getReport_dayReport. To: B_j1OoHeh4sGI6EFAAAD
2018-10-19T15:57:23.343Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:23.367Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T15:57:23.369Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T15:57:23.372Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:23.417Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:23.419Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:57:23.421Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:57:23.423Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:23.545Z [DEBUG] io: Client connected:  FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.602Z [DEBUG] commands: Command: getTickets. From: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.603Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:23.606Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:23.608Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:23.610Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:23.617Z [DEBUG] messages: Send data: getTickets. To: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.629Z [DEBUG] commands: Command: getLoadTypes. From: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.629Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:23.632Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:23.633Z [DEBUG] messages: Send data: getLoadTypes. To: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.707Z [DEBUG] commands: Command: getOrganizations. From: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:23.708Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:23.710Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:23.712Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:23.713Z [DEBUG] messages: Send data: getOrganizations. To: FAEcQTYtnjsiwdhzAAAE
2018-10-19T15:57:25.545Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:25.548Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:57:25.550Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:57:25.552Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:25.640Z [DEBUG] io: Client connected:  K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.693Z [DEBUG] commands: Command: getTickets. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.693Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:25.696Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:25.697Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:25.699Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:25.703Z [DEBUG] messages: Send data: getTickets. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.758Z [DEBUG] commands: Command: getTicket. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.759Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:57:25.760Z [DEBUG] commands: Command: getLoadTypes. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.760Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:25.763Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:57:25.764Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:57:25.766Z [DEBUG] commands: Command: getOrganizations. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.766Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:25.768Z [DEBUG] messages: Send data: getTicket. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.788Z [DEBUG] commands: Command: getOrganization. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.788Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:25.791Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:25.792Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:57:25.793Z [DEBUG] messages: Send data: getOrganization. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.803Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:25.804Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:25.805Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:25.806Z [DEBUG] messages: Send data: getLoadTypes. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.807Z [DEBUG] messages: Send data: getOrganizations. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.835Z [DEBUG] commands: Command: getOrganization. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.836Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:25.838Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:25.839Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:57:25.840Z [DEBUG] messages: Send data: getOrganization. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.843Z [DEBUG] commands: Command: getPoint. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.843Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:25.845Z [DEBUG] commands: Command: getPoint. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.846Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:25.847Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:25.849Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:57:25.851Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:25.851Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:57:25.853Z [DEBUG] messages: Send data: getPoint. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.854Z [DEBUG] commands: Command: getPerson. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.855Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:25.856Z [DEBUG] messages: Send data: getPoint. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.858Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:25.859Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:25.860Z [DEBUG] commands: Command: getTicketHistory. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.861Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:57:25.862Z [DEBUG] messages: Send data: getPerson. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:25.863Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:57:25.864Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:57:25.866Z [DEBUG] messages: Send data: getTicketHistory. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:36.579Z [DEBUG] commands: Command: takeTicket. From: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:36.580Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'takeTicket'                 AND users.login = 'admin';
2018-10-19T15:57:36.631Z [DEBUG] commands: Granted command  takeTicket  for user admin
2018-10-19T15:57:36.632Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:57:36.635Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 2, logist_person_id = 1 WHERE ticket_id = 4;
2018-10-19T15:57:36.637Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (4, 1, 10, 'Заявка переведена в статус "В работе": Администратор');
2018-10-19T15:57:36.640Z [DEBUG] messages: Send info message: Заявка взята в рабту. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:36.640Z [DEBUG] messages: Send data: takeTicket. To: K1TdDLFsKwx4SZ7-AAAF
2018-10-19T15:57:36.641Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:57:36.677Z [DEBUG] io: Client connected:  XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.724Z [DEBUG] commands: Command: getTickets. From: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.724Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:36.726Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:36.727Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:36.729Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:36.738Z [DEBUG] messages: Send data: getTickets. To: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.742Z [DEBUG] commands: Command: getLoadTypes. From: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.742Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:36.745Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:36.746Z [DEBUG] messages: Send data: getLoadTypes. To: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.816Z [DEBUG] commands: Command: getOrganizations. From: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:36.816Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:36.819Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:36.820Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:36.821Z [DEBUG] messages: Send data: getOrganizations. To: XvuVAseGDphDzxFRAAAG
2018-10-19T15:57:38.031Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:38.033Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:57:38.035Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:57:38.037Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:38.132Z [DEBUG] io: Client connected:  UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.166Z [DEBUG] commands: Command: getTickets. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.167Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:38.169Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:38.170Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:38.172Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:38.176Z [DEBUG] messages: Send data: getTickets. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.187Z [DEBUG] commands: Command: getTicket. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.187Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:57:38.190Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:57:38.190Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:57:38.194Z [DEBUG] messages: Send data: getTicket. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.257Z [DEBUG] commands: Command: getLoadTypes. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.257Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:38.259Z [DEBUG] commands: Command: getOrganizations. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.260Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:38.261Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:38.262Z [DEBUG] messages: Send data: getLoadTypes. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.267Z [DEBUG] commands: Command: getOrganization. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.268Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:38.270Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:38.270Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:57:38.272Z [DEBUG] messages: Send data: getOrganization. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.274Z [DEBUG] commands: Command: getOrganization. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.275Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:38.276Z [DEBUG] commands: Command: getPoint. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.277Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:38.278Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:38.279Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:57:38.280Z [DEBUG] messages: Send data: getOrganization. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.282Z [DEBUG] commands: Command: getPoint. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.282Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:38.285Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:38.285Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:57:38.288Z [DEBUG] messages: Send data: getPoint. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.290Z [DEBUG] commands: Command: getPerson. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.291Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:38.293Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:38.294Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:38.295Z [DEBUG] commands: Command: getPerson. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.296Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:38.297Z [DEBUG] messages: Send data: getPerson. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.298Z [DEBUG] commands: Command: getTicketHistory. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.300Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:57:38.302Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:57:38.303Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:57:38.305Z [DEBUG] messages: Send data: getTicketHistory. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.314Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:38.315Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:38.317Z [DEBUG] messages: Send data: getOrganizations. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.332Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:38.333Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:38.335Z [DEBUG] messages: Send data: getPerson. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:38.336Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:38.337Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:57:38.340Z [DEBUG] messages: Send data: getPoint. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:41.228Z [DEBUG] commands: Command: planTicket. From: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:41.229Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'planTicket'                 AND users.login = 'admin';
2018-10-19T15:57:41.232Z [DEBUG] commands: Granted command  planTicket  for user admin
2018-10-19T15:57:41.233Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:57:41.235Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 3, logist_person_id = 1 WHERE ticket_id = 4;
2018-10-19T15:57:41.249Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (4, 1, 10, 'Заявка переведена в статус "Запланирована": Администратор');
2018-10-19T15:57:41.251Z [DEBUG] messages: Send info message: Заявка запланирована. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:41.252Z [DEBUG] messages: Send data: planTicket. To: UEfldatGSYytgbWqAAAH
2018-10-19T15:57:41.253Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:57:41.307Z [DEBUG] io: Client connected:  eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.335Z [DEBUG] commands: Command: getTickets. From: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.336Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:41.338Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:41.339Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:41.342Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:41.347Z [DEBUG] messages: Send data: getTickets. To: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.349Z [DEBUG] commands: Command: getLoadTypes. From: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.350Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:41.352Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:41.353Z [DEBUG] messages: Send data: getLoadTypes. To: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.405Z [DEBUG] commands: Command: getOrganizations. From: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:41.406Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:41.408Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:41.409Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:41.412Z [DEBUG] messages: Send data: getOrganizations. To: eT9YKi9Qqi_REPvKAAAI
2018-10-19T15:57:42.411Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:42.413Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:57:42.415Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:57:42.417Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:42.508Z [DEBUG] io: Client connected:  l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.542Z [DEBUG] commands: Command: getTickets. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.543Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:42.545Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:42.546Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:42.548Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:42.553Z [DEBUG] messages: Send data: getTickets. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.561Z [DEBUG] commands: Command: getTicket. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.562Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:57:42.564Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:57:42.565Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:57:42.568Z [DEBUG] messages: Send data: getTicket. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.624Z [DEBUG] commands: Command: getLoadTypes. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.624Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:42.626Z [DEBUG] commands: Command: getOrganizations. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.626Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:42.627Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:42.628Z [DEBUG] messages: Send data: getLoadTypes. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.630Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:42.631Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:42.632Z [DEBUG] commands: Command: getOrganization. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.633Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:42.634Z [DEBUG] messages: Send data: getOrganizations. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.636Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:42.636Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:57:42.639Z [DEBUG] messages: Send data: getOrganization. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.641Z [DEBUG] commands: Command: getOrganization. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.641Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:42.643Z [DEBUG] commands: Command: getPoint. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.643Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:42.645Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:42.645Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:57:42.647Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:42.648Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:57:42.649Z [DEBUG] messages: Send data: getOrganization. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.651Z [DEBUG] messages: Send data: getPoint. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.653Z [DEBUG] commands: Command: getPoint. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.653Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:42.655Z [DEBUG] commands: Command: getPerson. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.656Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:42.657Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:42.658Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:57:42.659Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:42.659Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:42.661Z [DEBUG] commands: Command: getPerson. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.661Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:42.662Z [DEBUG] messages: Send data: getPoint. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.664Z [DEBUG] messages: Send data: getPerson. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.665Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:42.666Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:42.668Z [DEBUG] commands: Command: getTicketHistory. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.668Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:57:42.669Z [DEBUG] messages: Send data: getPerson. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:42.670Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:57:42.671Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:57:42.673Z [DEBUG] messages: Send data: getTicketHistory. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:44.892Z [DEBUG] commands: Command: onWayTicket. From: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:44.893Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'onWayTicket'                 AND users.login = 'admin';
2018-10-19T15:57:44.896Z [DEBUG] commands: Granted command  onWayTicket  for user admin
2018-10-19T15:57:44.897Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:57:44.899Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 4, logist_person_id = 1 WHERE ticket_id = 4;
2018-10-19T15:57:44.901Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (4, 1, 10, 'Заявка переведена в статус "В пути": Администратор');
2018-10-19T15:57:44.903Z [DEBUG] messages: Send info message: Заявка переведена в статус "В пути". To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:44.905Z [DEBUG] messages: Send data: onWayTicket. To: l0u51FxrqSLaFbuqAAAJ
2018-10-19T15:57:44.906Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:57:44.970Z [DEBUG] io: Client connected:  5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:44.997Z [DEBUG] commands: Command: getTickets. From: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:44.998Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:45.000Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:45.001Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:45.003Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:45.010Z [DEBUG] commands: Command: getLoadTypes. From: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:45.010Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:45.012Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:45.013Z [DEBUG] messages: Send data: getLoadTypes. To: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:45.016Z [DEBUG] messages: Send data: getTickets. To: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:45.063Z [DEBUG] commands: Command: getOrganizations. From: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:45.064Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:45.066Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:45.067Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:45.068Z [DEBUG] messages: Send data: getOrganizations. To: 5Rtbkir2xeYg6qMXAAAK
2018-10-19T15:57:45.720Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:45.722Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:57:45.724Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:57:45.725Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:57:45.839Z [DEBUG] io: Client connected:  6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.873Z [DEBUG] commands: Command: getTickets. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.874Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:57:45.876Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:57:45.877Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:57:45.879Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:57:45.882Z [DEBUG] messages: Send data: getTickets. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.889Z [DEBUG] commands: Command: getTicket. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.890Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:57:45.892Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:57:45.893Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 4;
2018-10-19T15:57:45.896Z [DEBUG] messages: Send data: getTicket. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.953Z [DEBUG] commands: Command: getLoadTypes. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.954Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:57:45.956Z [DEBUG] commands: Command: getOrganizations. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.956Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:57:45.957Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:57:45.958Z [DEBUG] messages: Send data: getLoadTypes. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.959Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:57:45.960Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:57:45.961Z [DEBUG] commands: Command: getOrganization. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.962Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:45.963Z [DEBUG] messages: Send data: getOrganizations. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.965Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:45.966Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:57:45.967Z [DEBUG] messages: Send data: getOrganization. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.969Z [DEBUG] commands: Command: getOrganization. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.969Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:57:45.971Z [DEBUG] commands: Command: getPoint. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.972Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:45.974Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:57:45.974Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:57:45.976Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:45.977Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:57:45.978Z [DEBUG] commands: Command: getPoint. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.979Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:57:45.979Z [DEBUG] messages: Send data: getOrganization. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.981Z [DEBUG] messages: Send data: getPoint. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.982Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:57:45.983Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:57:45.984Z [DEBUG] commands: Command: getPerson. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.984Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:45.985Z [DEBUG] messages: Send data: getPoint. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.987Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:45.987Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:45.989Z [DEBUG] commands: Command: getPerson. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.990Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:57:45.991Z [DEBUG] messages: Send data: getPerson. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.993Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:57:45.994Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:57:45.996Z [DEBUG] messages: Send data: getPerson. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.997Z [DEBUG] commands: Command: getTicketHistory. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:57:45.997Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:57:46.000Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:57:46.001Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 4;
2018-10-19T15:57:46.002Z [DEBUG] messages: Send data: getTicketHistory. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:58:04.652Z [DEBUG] commands: Command: closeTicket. From: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:58:04.653Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-19T15:58:04.704Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-19T15:58:04.705Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T15:58:04.711Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 5600.1 WHERE ticket_id = 4;
2018-10-19T15:58:04.716Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (4, 1, 10, 'Заявка переведена в статус "Закрыта": Администратор');
2018-10-19T15:58:04.718Z [DEBUG] messages: Send info message: Заявка переведена в статус "Закрыта". To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:58:04.719Z [DEBUG] messages: Send data: closeTicket. To: 6v8tyPIgGH1VnNrqAAAL
2018-10-19T15:58:04.720Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T15:58:04.785Z [DEBUG] io: Client connected:  Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.834Z [DEBUG] commands: Command: getTickets. From: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.834Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:58:04.837Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:58:04.837Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:58:04.840Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:58:04.845Z [DEBUG] messages: Send data: getTickets. To: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.863Z [DEBUG] commands: Command: getLoadTypes. From: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.863Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:58:04.866Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:58:04.866Z [DEBUG] messages: Send data: getLoadTypes. To: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.923Z [DEBUG] commands: Command: getOrganizations. From: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:04.924Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:58:04.926Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:58:04.927Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:58:04.928Z [DEBUG] messages: Send data: getOrganizations. To: Z6TCpnTIdKKq--ucAAAM
2018-10-19T15:58:07.415Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:58:07.417Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T15:58:07.419Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T15:58:07.421Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:58:07.506Z [DEBUG] io: Client connected:  E2GcKe16TXJINOXqAAAN
2018-10-19T15:58:16.966Z [DEBUG] commands: Command: getReport_periodReport. From: E2GcKe16TXJINOXqAAAN
2018-10-19T15:58:16.966Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T15:58:16.968Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T15:58:16.969Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T15:58:16.973Z [DEBUG] messages: Send data: getReport_dayReport. To: E2GcKe16TXJINOXqAAAN
2018-10-19T15:59:03.741Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:03.766Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T15:59:03.768Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T15:59:03.770Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:03.880Z [DEBUG] io: Client connected:  kvMP4VIUPKtQFiZ4AAAO
2018-10-19T15:59:40.094Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:40.125Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T15:59:40.127Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T15:59:40.130Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:40.139Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:40.141Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:59:40.143Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:59:40.145Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:40.277Z [DEBUG] io: Client connected:  7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.335Z [DEBUG] commands: Command: getTickets. From: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.336Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:59:40.339Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:59:40.340Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:40.342Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:59:40.348Z [DEBUG] messages: Send data: getTickets. To: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.357Z [DEBUG] commands: Command: getLoadTypes. From: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.358Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:59:40.361Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:59:40.362Z [DEBUG] messages: Send data: getLoadTypes. To: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.439Z [DEBUG] commands: Command: getOrganizations. From: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:40.440Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:59:40.443Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:59:40.444Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:59:40.445Z [DEBUG] messages: Send data: getOrganizations. To: 7nW3ymT7XvAnRnxHAAAP
2018-10-19T15:59:41.438Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:41.440Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:59:41.442Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:59:41.443Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:41.546Z [DEBUG] io: Client connected:  WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.581Z [DEBUG] commands: Command: getTickets. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.582Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:59:41.584Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:59:41.585Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:41.588Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:59:41.593Z [DEBUG] messages: Send data: getTickets. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.601Z [DEBUG] commands: Command: getTicket. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.602Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:59:41.604Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:59:41.605Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 2;
2018-10-19T15:59:41.609Z [DEBUG] messages: Send data: getTicket. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.678Z [DEBUG] commands: Command: getLoadTypes. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.679Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:59:41.681Z [DEBUG] commands: Command: getOrganizations. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.682Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:59:41.684Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:59:41.685Z [DEBUG] messages: Send data: getLoadTypes. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.687Z [DEBUG] commands: Command: getOrganization. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.688Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:59:41.689Z [DEBUG] commands: Command: getOrganization. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.690Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:59:41.691Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:59:41.692Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:59:41.694Z [DEBUG] messages: Send data: getOrganization. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.696Z [DEBUG] commands: Command: getPoint. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.697Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:59:41.699Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:59:41.701Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:59:41.702Z [DEBUG] commands: Command: getPoint. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.703Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:59:41.704Z [DEBUG] messages: Send data: getPoint. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.706Z [DEBUG] commands: Command: getPerson. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.706Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:59:41.708Z [DEBUG] commands: Command: getPerson. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.708Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:59:41.709Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:59:41.711Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:59:41.713Z [DEBUG] messages: Send data: getPerson. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.716Z [DEBUG] commands: Command: getTicketHistory. From: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.716Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:59:41.719Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:59:41.720Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 2;
2018-10-19T15:59:41.722Z [DEBUG] messages: Send data: getTicketHistory. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.737Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:59:41.738Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:59:41.740Z [DEBUG] messages: Send data: getOrganizations. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.751Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:59:41.752Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:59:41.754Z [DEBUG] messages: Send data: getPoint. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.756Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:59:41.756Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:59:41.758Z [DEBUG] messages: Send data: getOrganization. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:41.759Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:59:41.760Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:59:41.762Z [DEBUG] messages: Send data: getPerson. To: WHa_bELx8LlSpwxPAAAQ
2018-10-19T15:59:43.870Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:43.873Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets';
2018-10-19T15:59:43.875Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets' AND users.user_id=1;
2018-10-19T15:59:43.876Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:43.885Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:43.887Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:59:43.888Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:59:43.890Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:43.979Z [DEBUG] io: Client connected:  Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.012Z [DEBUG] commands: Command: getTickets. From: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.013Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:59:44.015Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:59:44.016Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:44.018Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:59:44.024Z [DEBUG] messages: Send data: getTickets. To: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.031Z [DEBUG] commands: Command: getLoadTypes. From: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.032Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:59:44.034Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:59:44.035Z [DEBUG] messages: Send data: getLoadTypes. To: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.098Z [DEBUG] commands: Command: getOrganizations. From: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:44.099Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:59:44.101Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:59:44.102Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:59:44.103Z [DEBUG] messages: Send data: getOrganizations. To: Q5xxdtx9JKQuR6-TAAAR
2018-10-19T15:59:45.502Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:45.504Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T15:59:45.506Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T15:59:45.507Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T15:59:45.594Z [DEBUG] io: Client connected:  O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.632Z [DEBUG] commands: Command: getTickets. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.633Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T15:59:45.635Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T15:59:45.636Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T15:59:45.638Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T15:59:45.642Z [DEBUG] messages: Send data: getTickets. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.649Z [DEBUG] commands: Command: getTicket. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.650Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T15:59:45.652Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T15:59:45.653Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T15:59:45.656Z [DEBUG] messages: Send data: getTicket. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.716Z [DEBUG] commands: Command: getLoadTypes. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.716Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T15:59:45.717Z [DEBUG] commands: Command: getOrganizations. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.718Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T15:59:45.719Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T15:59:45.720Z [DEBUG] messages: Send data: getLoadTypes. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.721Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T15:59:45.722Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T15:59:45.723Z [DEBUG] commands: Command: getOrganization. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.724Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:59:45.725Z [DEBUG] messages: Send data: getOrganizations. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.726Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:59:45.727Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T15:59:45.729Z [DEBUG] messages: Send data: getOrganization. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.731Z [DEBUG] commands: Command: getOrganization. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.732Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T15:59:45.734Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T15:59:45.735Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T15:59:45.736Z [DEBUG] commands: Command: getPoint. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.737Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:59:45.738Z [DEBUG] messages: Send data: getOrganization. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.740Z [DEBUG] commands: Command: getPoint. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.740Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T15:59:45.741Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:59:45.742Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T15:59:45.743Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T15:59:45.744Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T15:59:45.745Z [DEBUG] messages: Send data: getPoint. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.746Z [DEBUG] messages: Send data: getPoint. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.747Z [DEBUG] commands: Command: getPerson. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.748Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:59:45.749Z [DEBUG] commands: Command: getPerson. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.750Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T15:59:45.751Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:59:45.752Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:59:45.753Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T15:59:45.753Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T15:59:45.754Z [DEBUG] messages: Send data: getPerson. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.756Z [DEBUG] commands: Command: getTicketHistory. From: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.756Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T15:59:45.757Z [DEBUG] messages: Send data: getPerson. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T15:59:45.758Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T15:59:45.759Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T15:59:45.761Z [DEBUG] messages: Send data: getTicketHistory. To: O9CldEXjDMVQcU0aAAAS
2018-10-19T16:01:04.396Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:01:04.424Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/tickets/active';
2018-10-19T16:01:04.426Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/tickets/active' AND users.user_id=1;
2018-10-19T16:01:04.428Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:01:04.541Z [DEBUG] io: Client connected:  _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.597Z [DEBUG] commands: Command: getTickets. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.598Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T16:01:04.602Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T16:01:04.603Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:01:04.605Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T16:01:04.612Z [DEBUG] messages: Send data: getTickets. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.621Z [DEBUG] commands: Command: getTicket. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.621Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicket'                 AND users.login = 'admin';
2018-10-19T16:01:04.623Z [DEBUG] commands: Granted command  getTicket  for user admin
2018-10-19T16:01:04.624Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name        FROM tickets        INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id        INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id        INNER JOIN points p1 ON tickets.load_point_id = p1.point_id        INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id        INNER JOIN states s1 ON p1.state_id = s1.state_id        INNER JOIN states s2 ON p2.state_id = s2.state_id        INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id        INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id        INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id        INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id        WHERE tickets.ticket_id = 1;
2018-10-19T16:01:04.628Z [DEBUG] messages: Send data: getTicket. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.699Z [DEBUG] commands: Command: getLoadTypes. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.699Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T16:01:04.701Z [DEBUG] commands: Command: getOrganizations. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.701Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T16:01:04.703Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T16:01:04.704Z [DEBUG] messages: Send data: getLoadTypes. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.706Z [DEBUG] commands: Command: getOrganization. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.707Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T16:01:04.709Z [DEBUG] commands: Command: getOrganization. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.710Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganization'                 AND users.login = 'admin';
2018-10-19T16:01:04.712Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T16:01:04.713Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 1;
2018-10-19T16:01:04.715Z [DEBUG] messages: Send data: getOrganization. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.717Z [DEBUG] commands: Command: getPoint. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.718Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T16:01:04.720Z [DEBUG] commands: Command: getPoint. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.721Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPoint'                 AND users.login = 'admin';
2018-10-19T16:01:04.722Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T16:01:04.724Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 2;
2018-10-19T16:01:04.726Z [DEBUG] messages: Send data: getPoint. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.728Z [DEBUG] commands: Command: getPerson. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.729Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T16:01:04.731Z [DEBUG] commands: Command: getPerson. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.731Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getPerson'                 AND users.login = 'admin';
2018-10-19T16:01:04.732Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T16:01:04.733Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T16:01:04.736Z [DEBUG] messages: Send data: getPerson. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.738Z [DEBUG] commands: Command: getTicketHistory. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.740Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTicketHistory'                 AND users.login = 'admin';
2018-10-19T16:01:04.742Z [DEBUG] commands: Granted command  getTicketHistory  for user admin
2018-10-19T16:01:04.743Z [DEBUG] db: DB query: SELECT * FROM tickets_history WHERE ticket_id = 1;
2018-10-19T16:01:04.745Z [DEBUG] messages: Send data: getTicketHistory. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.769Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T16:01:04.770Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T16:01:04.772Z [DEBUG] messages: Send data: getOrganizations. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.775Z [DEBUG] commands: Granted command  getPoint  for user admin
2018-10-19T16:01:04.776Z [DEBUG] db: DB query: SELECT *, points.name AS name, trim(BOTH FROM s2.state_name || ', ' || l.locality_short_type || ' ' || points.locality_name || ', ' || points.address) AS full_address, o.name AS organization_name    FROM points    INNER JOIN localities l ON points.locality_id = l.locality_id    INNER JOIN states s2 ON points.state_id = s2.state_id    INNER JOIN organizations o ON points.organization_id = o.organization_id    WHERE points.point_id = 1;
2018-10-19T16:01:04.778Z [DEBUG] messages: Send data: getPoint. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.786Z [DEBUG] commands: Granted command  getOrganization  for user admin
2018-10-19T16:01:04.787Z [DEBUG] db: DB query: SELECT * FROM organizations WHERE organization_id = 2;
2018-10-19T16:01:04.789Z [DEBUG] messages: Send data: getOrganization. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:04.796Z [DEBUG] commands: Granted command  getPerson  for user admin
2018-10-19T16:01:04.797Z [DEBUG] db: DB query: SELECT            *,            trim(BOTH FROM persons.surname || ' ' || persons.name || ' ' || persons.patronymic) AS full_snp        FROM persons        WHERE persons.person_id = 1;
2018-10-19T16:01:04.799Z [DEBUG] messages: Send data: getPerson. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:38.459Z [DEBUG] commands: Command: closeTicket. From: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:38.459Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'closeTicket'                 AND users.login = 'admin';
2018-10-19T16:01:38.491Z [DEBUG] commands: Granted command  closeTicket  for user admin
2018-10-19T16:01:38.492Z [DEBUG] db: DB query: SELECT *,        trim(BOTH FROM p.surname || ' ' || p.name || ' ' || p.patronymic) AS full_snp     FROM users        INNER JOIN persons p ON users.person_id = p.person_id        WHERE users.user_id = 1;
2018-10-19T16:01:38.495Z [DEBUG] db: DB query: UPDATE tickets SET status_id = 5, logist_person_id = 1, closed_cost = 245 WHERE ticket_id = 1;
2018-10-19T16:01:38.497Z [DEBUG] db: DB query: INSERT INTO tickets_history (ticket_id, creator_person_id, event_id, event_description)            VALUES (1, 1, 10, 'Заявка переведена в статус "Закрыта": Администратор');
2018-10-19T16:01:38.499Z [DEBUG] messages: Send info message: Заявка переведена в статус "Закрыта". To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:38.500Z [DEBUG] messages: Send data: closeTicket. To: _Jzi72-8pcWHJjnUAAAT
2018-10-19T16:01:38.500Z [DEBUG] messages: Send Broadcast command: newTicket.
2018-10-19T16:01:38.567Z [DEBUG] io: Client connected:  Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.618Z [DEBUG] commands: Command: getTickets. From: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.618Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getTickets'                 AND users.login = 'admin';
2018-10-19T16:01:38.621Z [DEBUG] commands: Granted command  getTickets  for user admin
2018-10-19T16:01:38.621Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:01:38.623Z [DEBUG] db: DB query: SELECT            tickets.ticket_id,            o1.organization_id AS load_organization_id,            o1.name AS load_organization_name,            o1.full_name AS load_organization_full_name,            o2.organization_id AS unload_organization_id,            o2.name AS unload_organization_name,            o2.full_name AS unload_organization_full_name,            p1.point_id AS load_point_id,            p1.name AS load_point_name,            p1.state_id AS load_point_state_id,            s1.state_name AS load_point_state_name,            p1.locality_id AS load_point_locality_id,            lo1.locality_type AS load_point_locality_type,            lo1.locality_short_type AS load_point_locality_short_type,            p1.locality_name AS load_point_locality_name,            p1.address AS load_point_address,            trim(BOTH FROM s1.state_name || ', ' || lo1.locality_short_type || ' ' || p1.locality_name || ', ' || p1.address) AS load_point_full_address,            p1.notes AS load_point_notes,            p2.point_id AS unload_point_id,            p2.name AS unload_point_name,            p2.state_id AS unload_point_state_id,            s2.state_name AS unload_point_state_name,            p2.locality_id AS unload_point_locality_id,            lo2.locality_type AS unload_point_locality_type,            lo2.locality_short_type AS unload_point_locality_short_type,            p2.locality_name AS unload_point_locality_name,            p2.address AS unload_point_address,            trim(BOTH FROM s2.state_name || ', ' || lo2.locality_short_type || ' ' || p2.locality_name || ', ' || p2.address) AS unload_point_full_address,            p2.notes AS unload_point_notes,            tickets.weight,            tickets.volume,            tickets.load_type_id,            lt.load_type_name,            tickets.notes,            tickets.creator_person_id,            tickets.logist_person_id,            trim(BOTH FROM persons.surname || persons.name || persons.patronymic) AS logist_full_name,            tickets.creation_datetime,            tickets.status_id,            ts.ticket_status_name AS status_name            FROM tickets            INNER JOIN organizations o1 ON tickets.load_organization_id = o1.organization_id            INNER JOIN organizations o2 ON tickets.unload_organization_id = o2.organization_id            INNER JOIN points p1 ON tickets.load_point_id = p1.point_id            INNER JOIN points p2 ON tickets.unload_point_id = p2.point_id            INNER JOIN states s1 ON p1.state_id = s1.state_id            INNER JOIN states s2 ON p2.state_id = s2.state_id            INNER JOIN localities lo1 ON p1.locality_id = lo1.locality_id            INNER JOIN localities lo2 ON p2.locality_id = lo2.locality_id            INNER JOIN tickets_statuses ts ON tickets.status_id = ts.ticket_status_id            INNER JOIN load_types lt ON tickets.load_type_id = lt.load_type_id            LEFT JOIN persons ON tickets.logist_person_id = persons.person_id  WHERE tickets.status_id < 5 ORDER BY tickets.creation_datetime DESC;
2018-10-19T16:01:38.628Z [DEBUG] messages: Send data: getTickets. To: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.637Z [DEBUG] commands: Command: getLoadTypes. From: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.638Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getLoadTypes'                 AND users.login = 'admin';
2018-10-19T16:01:38.640Z [DEBUG] commands: Granted command  getLoadTypes  for user admin
2018-10-19T16:01:38.641Z [DEBUG] messages: Send data: getLoadTypes. To: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.709Z [DEBUG] commands: Command: getOrganizations. From: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:38.710Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getOrganizations'                 AND users.login = 'admin';
2018-10-19T16:01:38.712Z [DEBUG] commands: Granted command  getOrganizations  for user admin
2018-10-19T16:01:38.713Z [DEBUG] db: DB query: SELECT * FROM organizations ORDER BY organizations.name;
2018-10-19T16:01:38.715Z [DEBUG] messages: Send data: getOrganizations. To: Un1dso0G98BjC0snAAAU
2018-10-19T16:01:41.147Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:01:41.150Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:01:41.152Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:01:41.153Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:01:41.251Z [DEBUG] io: Client connected:  I--Jwk8UBQkAP7AuAAAV
2018-10-19T16:01:46.361Z [DEBUG] commands: Command: getReport_periodReport. From: I--Jwk8UBQkAP7AuAAAV
2018-10-19T16:01:46.362Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:01:46.364Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:01:46.365Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:01:46.368Z [DEBUG] messages: Send data: getReport_dayReport. To: I--Jwk8UBQkAP7AuAAAV
2018-10-19T16:01:54.537Z [DEBUG] commands: Command: getReport_periodReport. From: I--Jwk8UBQkAP7AuAAAV
2018-10-19T16:01:54.538Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:01:54.540Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:01:54.541Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:01:54.545Z [DEBUG] messages: Send data: getReport_dayReport. To: I--Jwk8UBQkAP7AuAAAV
2018-10-19T16:11:00.745Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:11:00.769Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:11:00.771Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:11:00.773Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:11:00.906Z [DEBUG] io: Client connected:  Bcv3TJmkqeQQ6zISAAAW
2018-10-19T16:11:06.231Z [DEBUG] commands: Command: getReport_periodReport. From: Bcv3TJmkqeQQ6zISAAAW
2018-10-19T16:11:06.232Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:11:06.235Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:11:06.236Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:11:06.241Z [DEBUG] messages: Send data: getReport_dayReport. To: Bcv3TJmkqeQQ6zISAAAW
2018-10-19T16:11:08.206Z [DEBUG] commands: Command: getReport_periodReport. From: Bcv3TJmkqeQQ6zISAAAW
2018-10-19T16:11:08.207Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:11:08.209Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:11:08.210Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:11:08.214Z [DEBUG] messages: Send data: getReport_dayReport. To: Bcv3TJmkqeQQ6zISAAAW
2018-10-19T16:11:47.865Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:11:47.892Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:11:47.895Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:11:47.897Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:11:48.039Z [DEBUG] io: Client connected:  Be-A8z0RPimYN8LhAAAX
2018-10-19T16:11:52.496Z [DEBUG] commands: Command: getReport_periodReport. From: Be-A8z0RPimYN8LhAAAX
2018-10-19T16:11:52.497Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:11:52.500Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:11:52.501Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:11:52.506Z [DEBUG] messages: Send data: getReport_dayReport. To: Be-A8z0RPimYN8LhAAAX
2018-10-19T16:11:55.520Z [DEBUG] commands: Command: getReport_periodReport. From: Be-A8z0RPimYN8LhAAAX
2018-10-19T16:11:55.521Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:11:55.523Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:11:55.524Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:11:55.528Z [DEBUG] messages: Send data: getReport_dayReport. To: Be-A8z0RPimYN8LhAAAX
2018-10-19T16:12:43.494Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:12:43.526Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T16:17:26.159Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:17:26.181Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:17:26.184Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:17:26.186Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:17:26.303Z [DEBUG] io: Client connected:  ks1c0gwvZwb47PXjAAAY
2018-10-19T16:17:32.099Z [DEBUG] commands: Command: getReport_periodReport. From: ks1c0gwvZwb47PXjAAAY
2018-10-19T16:17:32.100Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:17:32.103Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:17:32.104Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:17:32.109Z [DEBUG] messages: Send data: getReport_dayReport. To: ks1c0gwvZwb47PXjAAAY
2018-10-19T16:17:33.945Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:17:33.947Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T16:19:06.380Z [DEBUG] commands: Command: getReport_periodReport. From: ks1c0gwvZwb47PXjAAAY
2018-10-19T16:19:06.380Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:19:06.405Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:19:06.406Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:19:06.411Z [DEBUG] messages: Send data: getReport_dayReport. To: ks1c0gwvZwb47PXjAAAY
2018-10-19T16:19:37.467Z [DEBUG] io: Client connected:  wLxiKKv-nXpIHkQdAAAZ
2018-10-19T16:20:20.525Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:20:20.562Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:20:20.564Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:20:20.566Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:20:20.767Z [DEBUG] io: Client connected:  ii1ZtcSeNyqwbXcPAAAa
2018-10-19T16:20:20.843Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:20:20.845Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T16:21:09.902Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:21:09.933Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:21:09.935Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:21:09.937Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:21:10.138Z [DEBUG] io: Client connected:  zmz5eCqu5mDOdoKEAAAb
2018-10-19T16:21:10.265Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:21:10.268Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T16:21:16.151Z [DEBUG] commands: Command: getReport_periodReport. From: zmz5eCqu5mDOdoKEAAAb
2018-10-19T16:21:16.151Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:21:16.154Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:21:16.155Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:21:16.161Z [DEBUG] messages: Send data: getReport_dayReport. To: zmz5eCqu5mDOdoKEAAAb
2018-10-19T16:21:39.223Z [DEBUG] commands: Command: getReport_periodReport. From: zmz5eCqu5mDOdoKEAAAb
2018-10-19T16:21:39.223Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:21:39.258Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:21:39.259Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:21:39.264Z [DEBUG] messages: Send data: getReport_dayReport. To: zmz5eCqu5mDOdoKEAAAb
2018-10-19T16:22:15.307Z [DEBUG] io: Client connected:  9_fr_Qi-paCys4sYAAAc
2018-10-19T16:23:23.462Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:23:23.495Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-19T16:23:23.497Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-19T16:23:23.498Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-19T16:23:23.706Z [DEBUG] io: Client connected:  CHN1eFEMuep-eIE1AAAd
2018-10-19T16:23:23.770Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-19T16:23:23.772Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-19T16:23:29.568Z [DEBUG] commands: Command: getReport_periodReport. From: CHN1eFEMuep-eIE1AAAd
2018-10-19T16:23:29.568Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-19T16:23:29.571Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-19T16:23:29.572Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-19T16:23:29.577Z [DEBUG] messages: Send data: getReport_dayReport. To: CHN1eFEMuep-eIE1AAAd
2018-10-22T10:43:20.515Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-22T10:43:20.533Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-22T10:43:20.535Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-22T10:43:20.536Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-22T10:43:21.592Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-22T10:43:27.331Z [DEBUG] io: Client connected:  wWhkVcssTGTVkGelAAAA
2018-10-22T10:43:33.324Z [DEBUG] commands: Command: logon. From: wWhkVcssTGTVkGelAAAA
2018-10-22T10:43:33.325Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-22T10:43:33.371Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-22T10:43:33.384Z [DEBUG] commands: Logon granted for: admin. From: wWhkVcssTGTVkGelAAAA
2018-10-22T10:43:33.385Z [DEBUG] users: Add user: admin, SessionID: 1SjLqB42xLr2VFI1QBkTGvNmhJZYhabz
2018-10-22T10:43:33.386Z [INFO]  users: User admin was added
2018-10-22T10:43:33.388Z [DEBUG] messages: Send command: logon. To: wWhkVcssTGTVkGelAAAA
2018-10-22T10:43:33.413Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T10:43:33.435Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-22T10:43:33.436Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-22T10:43:33.438Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T10:43:33.549Z [DEBUG] io: Client connected:  8k-yuNwOoxkjkFjMAAAB
2018-10-22T10:43:38.520Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T10:43:38.522Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T10:43:38.523Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T10:43:38.525Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T10:43:38.601Z [DEBUG] io: Client connected:  CAS4tTJV-cSHIX7QAAAC
2018-10-22T10:44:13.536Z [DEBUG] commands: Command: getReport_periodReport. From: CAS4tTJV-cSHIX7QAAAC
2018-10-22T10:44:13.537Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T10:44:13.585Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T10:44:13.590Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T10:44:13.647Z [DEBUG] messages: Send data: getReport_dayReport. To: CAS4tTJV-cSHIX7QAAAC
2018-10-22T10:44:20.177Z [DEBUG] commands: Command: getReport_periodReport. From: CAS4tTJV-cSHIX7QAAAC
2018-10-22T10:44:20.178Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T10:44:20.180Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T10:44:20.181Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T10:44:20.184Z [DEBUG] messages: Send data: getReport_dayReport. To: CAS4tTJV-cSHIX7QAAAC
2018-10-22T11:01:26.539Z [DEBUG] io: Client connected:  cJxXni_ezFixLJn6AAAD
2018-10-22T11:01:32.622Z [DEBUG] commands: Command: logon. From: cJxXni_ezFixLJn6AAAD
2018-10-22T11:01:32.623Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-22T11:01:32.685Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-22T11:01:32.695Z [DEBUG] commands: Logon granted for: admin. From: cJxXni_ezFixLJn6AAAD
2018-10-22T11:01:32.696Z [DEBUG] users: Add user: admin, SessionID: n0G7wXnW2d2H3DI1vrS46IyI4ebnwBsJ
2018-10-22T11:01:32.697Z [INFO]  users: User admin was added
2018-10-22T11:01:32.697Z [DEBUG] messages: Send command: logon. To: cJxXni_ezFixLJn6AAAD
2018-10-22T11:01:32.707Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:01:32.727Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-22T11:01:32.737Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-22T11:01:32.739Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:01:32.820Z [DEBUG] io: Client connected:  LB4co4OhWzIEVHdkAAAE
2018-10-22T11:01:36.235Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:01:36.237Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:01:36.238Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:01:36.240Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:01:36.338Z [DEBUG] io: Client connected:  rWgAQgTeKeUX8TS4AAAF
2018-10-22T11:01:41.340Z [DEBUG] commands: Command: getReport_periodReport. From: rWgAQgTeKeUX8TS4AAAF
2018-10-22T11:01:41.341Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:01:41.366Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:01:41.366Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:01:41.404Z [DEBUG] messages: Send data: getReport_dayReport. To: rWgAQgTeKeUX8TS4AAAF
2018-10-22T11:04:00.067Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:04:00.102Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:04:00.105Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:04:00.107Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:04:00.233Z [DEBUG] io: Client connected:  sGfS6f0NN_9Wyi8EAAAG
2018-10-22T11:04:05.414Z [DEBUG] commands: Command: getReport_periodReport. From: sGfS6f0NN_9Wyi8EAAAG
2018-10-22T11:04:05.414Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:04:05.418Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:04:05.419Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:04:05.424Z [DEBUG] messages: Send data: getReport_dayReport. To: sGfS6f0NN_9Wyi8EAAAG
2018-10-22T11:05:52.710Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:05:52.733Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:05:52.735Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:05:52.737Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:05:52.864Z [DEBUG] io: Client connected:  3Bo1XtyBLYXvLD-cAAAH
2018-10-22T11:05:58.845Z [DEBUG] commands: Command: getReport_periodReport. From: 3Bo1XtyBLYXvLD-cAAAH
2018-10-22T11:05:58.846Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:05:58.849Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:05:58.850Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:05:58.855Z [DEBUG] messages: Send data: getReport_dayReport. To: 3Bo1XtyBLYXvLD-cAAAH
2018-10-22T11:08:13.355Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:08:13.379Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:08:13.382Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:08:13.384Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:08:13.516Z [DEBUG] io: Client connected:  Fn4ZegH-jpWOwulEAAAI
2018-10-22T11:08:20.086Z [DEBUG] commands: Command: getReport_periodReport. From: Fn4ZegH-jpWOwulEAAAI
2018-10-22T11:08:20.086Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:08:20.089Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:08:20.090Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:08:20.116Z [DEBUG] messages: Send data: getReport_dayReport. To: Fn4ZegH-jpWOwulEAAAI
2018-10-22T11:08:30.133Z [DEBUG] commands: Command: getReport_periodReport. From: Fn4ZegH-jpWOwulEAAAI
2018-10-22T11:08:30.135Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:08:30.160Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:08:30.161Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:08:30.166Z [DEBUG] messages: Send data: getReport_dayReport. To: Fn4ZegH-jpWOwulEAAAI
2018-10-22T11:09:02.260Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:09:02.284Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:09:02.286Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:09:02.288Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:09:02.418Z [DEBUG] io: Client connected:  VPjvF_iBx3_v7CjfAAAJ
2018-10-22T11:09:07.782Z [DEBUG] commands: Command: getReport_periodReport. From: VPjvF_iBx3_v7CjfAAAJ
2018-10-22T11:09:07.782Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:09:07.785Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:09:07.786Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:09:07.792Z [DEBUG] messages: Send data: getReport_dayReport. To: VPjvF_iBx3_v7CjfAAAJ
2018-10-22T11:09:11.661Z [DEBUG] commands: Command: getReport_periodReport. From: VPjvF_iBx3_v7CjfAAAJ
2018-10-22T11:09:11.662Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:09:11.664Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:09:11.665Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:09:11.669Z [DEBUG] messages: Send data: getReport_dayReport. To: VPjvF_iBx3_v7CjfAAAJ
2018-10-22T11:09:47.164Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:09:47.191Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:09:47.193Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:09:47.195Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:09:47.321Z [DEBUG] io: Client connected:  al8taZP5PL8giW-lAAAK
2018-10-22T11:09:51.958Z [DEBUG] commands: Command: getReport_periodReport. From: al8taZP5PL8giW-lAAAK
2018-10-22T11:09:51.958Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:09:51.963Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:09:51.964Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:09:51.969Z [DEBUG] messages: Send data: getReport_dayReport. To: al8taZP5PL8giW-lAAAK
2018-10-22T11:09:56.039Z [DEBUG] commands: Command: getReport_periodReport. From: al8taZP5PL8giW-lAAAK
2018-10-22T11:09:56.040Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:09:56.042Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:09:56.043Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:09:56.047Z [DEBUG] messages: Send data: getReport_dayReport. To: al8taZP5PL8giW-lAAAK
2018-10-22T11:15:42.663Z [DEBUG] db: DB query: SELECT * FROM states ORDER BY state_name
2018-10-22T11:15:42.668Z [DEBUG] db: DB query: SELECT * FROM localities ORDER BY locality_type
2018-10-22T11:15:42.669Z [DEBUG] db: DB query: SELECT * FROM load_types ORDER BY load_type_id
2018-10-22T11:15:42.670Z [DEBUG] db: DB query: SELECT * FROM pages         ORDER BY page_id ASC;
2018-10-22T11:15:42.839Z [DEBUG] db: DB query: SELECT *, permissions.description FROM permissions            INNER JOIN pages ON permissions.owner_page_id = pages.page_id        ORDER BY pages.page_id;
2018-10-22T11:15:43.735Z [DEBUG] io: Client connected:  0pfK1zSgZ5V2ZzzAAAAA
2018-10-22T11:15:43.738Z [DEBUG] messages: Send command: logout. To: 0pfK1zSgZ5V2ZzzAAAAA
2018-10-22T11:15:43.908Z [DEBUG] io: Client connected:  mcRBsuUbh_QJQlzKAAAB
2018-10-22T11:15:50.761Z [DEBUG] commands: Command: logon. From: mcRBsuUbh_QJQlzKAAAB
2018-10-22T11:15:50.762Z [DEBUG] db: DB query: SELECT * FROM users WHERE login = 'admin' AND password_hash = '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918' AND enable = TRUE;
2018-10-22T11:15:50.775Z [DEBUG] db: DB query: SELECT * FROM persons WHERE person_id=1;
2018-10-22T11:15:50.787Z [DEBUG] commands: Logon granted for: admin. From: mcRBsuUbh_QJQlzKAAAB
2018-10-22T11:15:50.788Z [DEBUG] users: Add user: admin, SessionID: n0G7wXnW2d2H3DI1vrS46IyI4ebnwBsJ
2018-10-22T11:15:50.789Z [INFO]  users: User admin was added
2018-10-22T11:15:50.789Z [DEBUG] messages: Send command: logon. To: mcRBsuUbh_QJQlzKAAAB
2018-10-22T11:15:50.804Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:15:50.816Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/';
2018-10-22T11:15:50.817Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/' AND users.user_id=1;
2018-10-22T11:15:50.819Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:15:50.907Z [DEBUG] io: Client connected:  C4AvfQNu6mUmwQdBAAAC
2018-10-22T11:15:52.077Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:15:52.079Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:15:52.080Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:15:52.081Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:15:52.183Z [DEBUG] io: Client connected:  ETiNUyWNfga-hnM6AAAD
2018-10-22T11:15:56.822Z [DEBUG] commands: Command: getReport_periodReport. From: ETiNUyWNfga-hnM6AAAD
2018-10-22T11:15:56.823Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:15:56.848Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:15:56.852Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:15:56.882Z [DEBUG] messages: Send data: getReport_periodReport. To: ETiNUyWNfga-hnM6AAAD
2018-10-22T11:19:59.023Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:19:59.074Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
2018-10-22T11:20:03.381Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:20:03.390Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/reports';
2018-10-22T11:20:03.393Z [DEBUG] db: DB query: SELECT * FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             pages.url='/reports' AND users.user_id=1;
2018-10-22T11:20:03.397Z [DEBUG] db: DB query: SELECT page_id, url, path, title, description, icon, menu_level, menu_index, parent_page_id FROM pages             INNER JOIN groups_permissions ON pages.view_permission_id = groups_permissions.permission_id             INNER JOIN users_groups ON groups_permissions.group_id = users_groups.group_id             INNER JOIN users ON users_groups.user_id = users.user_id         WHERE             users.user_id = 1 ORDER BY page_id ASC;
2018-10-22T11:20:03.531Z [DEBUG] io: Client connected:  T91bbwROu2yDoHbRAAAE
2018-10-22T11:20:21.591Z [DEBUG] commands: Command: getReport_periodReport. From: T91bbwROu2yDoHbRAAAE
2018-10-22T11:20:21.591Z [DEBUG] db: DB query: SELECT COUNT(*)             FROM commands                 INNER JOIN permissions ON commands.permission_id = permissions.permission_id                 INNER JOIN groups_permissions ON permissions.permission_id = groups_permissions.permission_id                 INNER JOIN groups ON groups_permissions.group_id = groups.group_id                 INNER JOIN users_groups ON groups.group_id = users_groups.group_id                 INNER JOIN users ON users.user_id = users_groups.user_id             WHERE                 commands.name = 'getReport_periodReport'                 AND users.login = 'admin';
2018-10-22T11:20:21.633Z [DEBUG] commands: Granted command  getReport_periodReport  for user admin
2018-10-22T11:20:21.634Z [DEBUG] db: DB query: SELECT 	
	loadpointState.loadpointState_name,
	loadpointLocalities.localitiesLocalityShort_type,
	loadpoint.loadpoint_localityname,
	unloadpointState.unloadpointState_name,
	unloadpointLocalities.unlocalitiesLocalityShort_type,
	unloadpoint.unloadpoint_localityname,
	ticketsStatuses.ticketsStatusesStatus_name,
	loadCompany.loadCompany_name,
	unloadCompany.unloadCompany_name,
	logistPerson.logistPerson_surname,
	logistPerson.logistPerson_name,
	logistPerson.logistPerson_patronymic,
	t.weight,
	t.volume,
	t.closed_cost
	FROM tickets AS t
			 /*следующие 3 join подгружают местоположение места погрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as loadpoint_id,
				 	points.state_id as loadpoint_stateid,
				 	points.locality_id as loadpoint_localityid,
				 	points.locality_name as loadpoint_localityname
				 from points
			 ) as loadpoint on t.load_point_id = loadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as loadpointState_id,
				 	states.state_name as loadpointState_name
				 from
				 	states
			 ) as loadpointState on loadpoint_stateid = loadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as localitiesLocality_id,
				 	localities.locality_short_type as localitiesLocalityShort_type
				from
				 	localities
			 ) as loadpointLocalities on loadpoint_localityid = localitiesLocality_id
			/*следующие 3 join подгружают местоположение места выгрузки*/
			 left join (
			 /* выборка региона погрузки */
				 select 
				 	points.point_id as unloadpoint_id,
				 	points.state_id as unloadpoint_stateid,
				 	points.locality_id as unloadpoint_localityid,
				 	points.locality_name as unloadpoint_localityname
				 from points
			 ) as unloadpoint on t.unload_point_id = unloadpoint_id
			 /* подгружаем наименование региона */
			 left join (
				 select
				 	states.state_id as unloadpointState_id,
				 	states.state_name as unloadpointState_name
				 from
				 	states
			 ) as unloadpointState on unloadpoint_stateid = unloadpointState_id
			 /* подгружаем наименование места - город, поселок и т.д. */
			 left join(
			 	select
					localities.locality_id as unlocalitiesLocality_id,
				 	localities.locality_short_type as unlocalitiesLocalityShort_type
				from
				 	localities
			 ) as unloadpointLocalities on unloadpoint_localityid = unlocalitiesLocality_id
			 /* подгружаем словесное описание статуса заявки */
			 left join(
			 	select
					tickets_statuses.ticket_status_id as ticketsStatusesStatus_id,
				 	tickets_statuses.ticket_status_name as ticketsStatusesStatus_name
				from tickets_statuses
			 ) as ticketsStatuses on t.status_id = ticketsStatusesStatus_id
			 /* подгружаем название компании - погрузка */
			 left join(
			 	select 
					organizations.organization_id as loadCompany_id,
				 	organizations.name as loadCompany_name
				from organizations
			 ) as loadCompany on t.load_organization_id = loadCompany_id
			 /* подгружаем название компании - выгрузка */
			 left join(
			 	select 
					organizations.organization_id as unloadCompany_id,
				 	organizations.name as unloadCompany_name
				from organizations
			 ) as unloadCompany on t.unload_organization_id = unloadCompany_id
			 /* подгружаем имя логиста */
			 left join(
				 select
				 	persons.person_id as logistPerson_id,
				 	persons.name as logistPerson_name,
				 	persons.surname as logistPerson_surname,
				 	persons.patronymic as logistPerson_patronymic
				 from persons
			 ) as logistPerson on t.logist_person_id = logistPerson_id
WHERE t.status_id IN (1,2,3,4) AND      t.creation_datetime > '2018-10-01 00:00:00 +3:00'
      AND t.creation_datetime < '2018-10-31 23:59:59 +3:00'
2018-10-22T11:20:21.672Z [DEBUG] messages: Send data: getReport_periodReport. To: T91bbwROu2yDoHbRAAAE
2018-10-22T11:20:43.861Z [DEBUG] db: DB query: SELECT p.permission_id, p.name FROM users AS u            INNER JOIN users_groups ug ON u.user_id = ug.user_id            INNER JOIN groups_permissions gp ON gp.group_id = ug.group_id            INNER JOIN permissions p ON gp.permission_id = p.permission_id        WHERE u.user_id = 1;
2018-10-22T11:20:43.889Z [DEBUG] db: DB query: SELECT * FROM pages WHERE url='/js/luxon.min.js.map';
